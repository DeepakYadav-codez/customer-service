"use strict";(self.webpackChunkangular_firebase_auth=self.webpackChunkangular_firebase_auth||[]).push([[179],{2011:(at,Ae,k)=>{k.d(Ae,{Dh:()=>he,GT:()=>ge,cc:()=>De,hO:()=>He,on:()=>j,pX:()=>X,xv:()=>le});var g=k(5e3),Y=k(127),O=k(5813);at=k.hmd(at);const oe=["ngOnDestroy"],X=(ve,Ye,We,we={})=>new Proxy(ve,{get:(ye,Ee)=>We.runOutsideAngular(()=>{var Ve;if(ve[Ee])return(null===(Ve=null==we?void 0:we.spy)||void 0===Ve?void 0:Ve.get)&&we.spy.get(Ee,ve[Ee]),ve[Ee];if(oe.indexOf(Ee)>-1)return()=>{};const Be=Ye.toPromise().then(re=>{const Ge=re&&re[Ee];return"function"==typeof Ge?Ge.bind(re):Ge&&Ge.then?Ge.then(pt=>We.run(()=>pt)):We.run(()=>Ge)});return new Proxy(()=>{},{get:(re,Ge)=>Be[Ge],apply:(re,Ge,pt)=>Be.then(Pt=>{var rt;const Kt=Pt&&Pt(...pt);return(null===(rt=null==we?void 0:we.spy)||void 0===rt?void 0:rt.apply)&&we.spy.apply(Ee,pt,Kt),Kt})})})}),ge=(ve,Ye)=>{Ye.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(we=>{Object.defineProperty(ve.prototype,we,Object.getOwnPropertyDescriptor(We.prototype||We,we))})})};class ie{constructor(Ye){return Ye}}const he=new g.OlP("angularfire2.app.options"),le=new g.OlP("angularfire2.app.name");function j(ve,Ye,We){const ye="object"==typeof We&&We||{};ye.name=ye.name||"string"==typeof We&&We||"[DEFAULT]";const Ve=Y.Z.apps.filter(Be=>Be&&Be.name===ye.name)[0]||Ye.runOutsideAngular(()=>Y.Z.initializeApp(ve,ye));try{JSON.stringify(ve)!==JSON.stringify(Ve.options)&&B("error",`${Ve.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new ie(Ve)}const B=(ve,...Ye)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[ve](...Ye)},Q={provide:ie,useFactory:j,deps:[he,g.R0b,[new g.FiY,le]]};let He=(()=>{class ve{constructor(We){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",g.q4F.full,We.toString())}static initializeApp(We,we){return{ngModule:ve,providers:[{provide:he,useValue:We},{provide:le,useValue:we}]}}}return ve.\u0275fac=function(We){return new(We||ve)(g.LFG(g.Lbi))},ve.\u0275mod=g.oAB({type:ve}),ve.\u0275inj=g.cJS({providers:[Q]}),ve})();function De(ve,Ye,We,we,ye){const[,Ee,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===ve)||[];if(Ee)return function xe(ve,Ye){try{return ve.toString()===Ye.toString()}catch(We){return ve===Ye}}(ye,Ve)||(me("error",`${Ye} was already initialized on the ${We} Firebase App with different settings.${ke?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:ye,was:Ve})),Ee;{const Be=we();return globalThis.\u0275AngularfireInstanceCache.push([ve,Be,ye]),Be}}const ke=!!at.hot,me=(ve,...Ye)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[ve](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,Ae,k)=>{k.d(Ae,{q4:()=>bi,iC:()=>oo,HU:()=>Ol,vb:()=>so,JM:()=>qc});var g=k(5e3),Y=k(5867),O=k(5861),oe=k(9681),X=k(2090),ge=k(4859),ie=k(1877);const he="@firebase/installations",B="w:0.5.8",Q="FIS_v2",ve=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(D){return D instanceof X.ZR&&D.code.includes("request-failed")}function We({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function we(D){return{token:D.token,requestStatus:2,expiresIn:pt(D.expiresIn),creationTime:Date.now()}}function ye(D,b){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return ve.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ve({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Be(D,{refreshToken:b}){const M=Ve(D);return M.append("Authorization",function Pt(D){return`${Q} ${D}`}(b)),M}function re(D){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function pt(D){return Number(D.replace("s","000"))}function rt(D,b){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:M}){const F=We(D),z=Ve(D),ue=b.getImmediate({optional:!0});if(ue){const Xe=yield ue.getHeartbeatsHeader();Xe&&z.append("x-firebase-client",Xe)}const ze={method:"POST",headers:z,body:JSON.stringify({fid:M,authVersion:Q,appId:D.appId,sdkVersion:B})},_t=yield re(()=>fetch(F,ze));if(_t.ok){const Xe=yield _t.json();return{fid:Xe.fid||M,registrationStatus:2,refreshToken:Xe.refreshToken,authToken:we(Xe.authToken)}}throw yield ye("Create Installation",_t)})).apply(this,arguments)}function tt(D){return new Promise(b=>{setTimeout(b,D)})}const Wi=/^[cdef][\w-]{21}$/;function Nn(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function At(D){return function ki(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Wi.test(M)?M:""}catch(D){return""}}function K(D){return`${D.appName}!${D.appId}`}const ne=new Map;function pe(D,b){const M=K(D);_e(M,b),function Pe(D,b){const M=function an(){return!wt&&"BroadcastChannel"in self&&(wt=new BroadcastChannel("[Firebase] FID Change"),wt.onmessage=D=>{_e(D.data.key,D.data.fid)}),wt}();M&&M.postMessage({key:D,fid:b}),function ct(){0===ne.size&&wt&&(wt.close(),wt=null)}()}(M,b)}function _e(D,b){const M=ne.get(D);if(M)for(const F of M)F(b)}let wt=null;const On="firebase-installations-store";let qt=null;function In(){return qt||(qt=(0,X.X3)("firebase-installations-database",1,(D,b)=>{0===b&&D.createObjectStore(On)})),qt}function Ze(D,b){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(D,b){const M=K(D),z=(yield In()).transaction(On,"readwrite"),ue=z.objectStore(On),Se=yield ue.get(M);return yield ue.put(b,M),yield z.complete,(!Se||Se.fid!==b.fid)&&pe(D,b.fid),b})).apply(this,arguments)}function mn(D){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,O.Z)(function*(D){const b=K(D),F=(yield In()).transaction(On,"readwrite");yield F.objectStore(On).delete(b),yield F.complete})).apply(this,arguments)}function ri(D,b){return $s.apply(this,arguments)}function $s(){return($s=(0,O.Z)(function*(D,b){const M=K(D),z=(yield In()).transaction(On,"readwrite"),ue=z.objectStore(On),Se=yield ue.get(M),ze=b(Se);return void 0===ze?yield ue.delete(M):yield ue.put(ze,M),yield z.complete,ze&&(!Se||Se.fid!==ze.fid)&&pe(D,ze.fid),ze})).apply(this,arguments)}function wn(D){return nr.apply(this,arguments)}function nr(){return(nr=(0,O.Z)(function*(D){let b;const M=yield ri(D.appConfig,F=>{const z=fs(F),ue=Ko(D,z);return b=ue.registrationPromise,ue.installationEntry});return""===M.fid?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}})).apply(this,arguments)}function fs(D){return Ut(D||{fid:Nn(),registrationStatus:0})}function Ko(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(ve.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function zt(D,b){return it.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:yt(D)}:{installationEntry:b}}function it(){return(it=(0,O.Z)(function*(D,b){try{const M=yield rt(D,b);return Ze(D.appConfig,M)}catch(M){throw Ye(M)&&409===M.customData.serverCode?yield mn(D.appConfig):yield Ze(D.appConfig,{fid:b.fid,registrationStatus:0}),M}})).apply(this,arguments)}function yt(D){return ur.apply(this,arguments)}function ur(){return(ur=(0,O.Z)(function*(D){let b=yield Fi(D.appConfig);for(;1===b.registrationStatus;)yield tt(100),b=yield Fi(D.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield wn(D);return F||M}return b})).apply(this,arguments)}function Fi(D){return ri(D,b=>{if(!b)throw ve.create("installation-not-found");return Ut(b)})}function Ut(D){return function Hs(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function vr(D,b){return lr.apply(this,arguments)}function lr(){return(lr=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},M){const F=ut(D,M),z=Be(D,M),ue=b.getImmediate({optional:!0});if(ue){const Xe=yield ue.getHeartbeatsHeader();Xe&&z.append("x-firebase-client",Xe)}const ze={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:B,appId:D.appId}})},_t=yield re(()=>fetch(F,ze));if(_t.ok)return we(yield _t.json());throw yield ye("Generate Auth Token",_t)})).apply(this,arguments)}function ut(D,{fid:b}){return`${We(D)}/${b}/authTokens:generate`}function Er(D){return kt.apply(this,arguments)}function kt(){return(kt=(0,O.Z)(function*(D,b=!1){let M;const F=yield ri(D.appConfig,ue=>{if(!Ot(ue))throw ve.create("not-registered");const Se=ue.authToken;if(!b&&U(Se))return ue;if(1===Se.requestStatus)return M=Ke(D,b),ue;{if(!navigator.onLine)throw ve.create("app-offline");const ze=$(ue);return M=lt(D,ze),ze}});return M?yield M:F.authToken})).apply(this,arguments)}function Ke(D,b){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(D,b){let M=yield Qe(D.appConfig);for(;1===M.authToken.requestStatus;)yield tt(100),M=yield Qe(D.appConfig);const F=M.authToken;return 0===F.requestStatus?Er(D,b):F})).apply(this,arguments)}function Qe(D){return ri(D,b=>{if(!Ot(b))throw ve.create("not-registered");return function ae(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function lt(D,b){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,O.Z)(function*(D,b){try{const M=yield vr(D,b),F=Object.assign(Object.assign({},b),{authToken:M});return yield Ze(D.appConfig,F),M}catch(M){if(!Ye(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Ze(D.appConfig,F)}else yield mn(D.appConfig);throw M}})).apply(this,arguments)}function Ot(D){return void 0!==D&&2===D.registrationStatus}function U(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function $(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function Ue(){return(Ue=(0,O.Z)(function*(D){const b=D,{installationEntry:M,registrationPromise:F}=yield wn(b);return F?F.catch(console.error):Er(b).catch(console.error),M.fid})).apply(this,arguments)}function Zt(){return(Zt=(0,O.Z)(function*(D,b=!1){const M=D;return yield wr(M),(yield Er(M,b)).token})).apply(this,arguments)}function wr(D){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(D){const{registrationPromise:b}=yield wn(D);b&&(yield b)})).apply(this,arguments)}function Yn(D){return ve.create("missing-app-config-values",{valueName:D})}const Yo="installations",Re=D=>{const b=D.getProvider("app").getImmediate(),M=function Ki(D){if(!D||!D.options)throw Yn("App Configuration");if(!D.name)throw Yn("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!D.options[M])throw Yn(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Nt=D=>{const b=D.getProvider("app").getImmediate(),M=(0,oe._getProvider)(b,Yo).getImmediate();return{getId:()=>function Z(D){return Ue.apply(this,arguments)}(M),getToken:z=>function gt(D){return Zt.apply(this,arguments)}(M,z)}};(function hn(){(0,oe._registerComponent)(new ge.wA(Yo,Re,"PUBLIC")),(0,oe._registerComponent)(new ge.wA("installations-internal",Nt,"PRIVATE"))})(),(0,oe.registerVersion)(he,"0.5.8"),(0,oe.registerVersion)(he,"0.5.8","esm2017");const cr="@firebase/remote-config",Pn=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class sh{constructor(b,M,F,z){this.client=b,this.storage=M,this.storageCache=F,this.logger=z}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,z=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${z}.`),z}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(z&&M.isCachedDataFresh(b.cacheMaxAgeMillis,F))return z;b.eTag=z&&z.eTag;const ue=yield M.client.fetch(b),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Se),ue})()}}function Cc(D=navigator){return D.languages&&D.languages[0]||D.language}class qa{constructor(b,M,F,z,ue,Se){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=F,this.projectId=z,this.apiKey=ue,this.appId=Se}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},_t={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:M.appId,language_code:Cc()},Xe={method:"POST",headers:ze,body:JSON.stringify(_t)},$t=fetch(Se,Xe),bt=new Promise((Kr,pr)=>{b.signal.addEventListener(()=>{const xs=new Error("The operation was aborted.");xs.name="AbortError",pr(xs)})});let Jn;try{yield Promise.race([$t,bt]),Jn=yield $t}catch(Kr){let pr="fetch-client-network";throw"AbortError"===Kr.name&&(pr="fetch-timeout"),Pn.create(pr,{originalErrorMessage:Kr.message})}let fn=Jn.status;const pa=Jn.headers.get("ETag")||void 0;let No,Ti;if(200===Jn.status){let Kr;try{Kr=yield Jn.json()}catch(pr){throw Pn.create("fetch-client-parse",{originalErrorMessage:pr.message})}No=Kr.entries,Ti=Kr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ti?fn=500:"NO_CHANGE"===Ti?fn=304:("NO_TEMPLATE"===Ti||"EMPTY_CONFIG"===Ti)&&(No={}),304!==fn&&200!==fn)throw Pn.create("fetch-status",{httpStatus:fn});return{status:fn,eTag:pa,config:No}})()}}class Lp{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,F)})()}attemptFetch(b,M){var F=this;return(0,O.Z)(function*(z,{throttleEndTimeMillis:ue,backoffCount:Se}){yield function Bn(D,b){return new Promise((M,F)=>{const z=Math.max(b-Date.now(),0),ue=setTimeout(M,z);D.addEventListener(()=>{clearTimeout(ue),F(Pn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(z.signal,ue);try{const ze=yield F.client.fetch(z);return yield F.storage.deleteThrottleMetadata(),ze}catch(ze){if(!function Tc(D){if(!(D instanceof X.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ze))throw ze;const _t={throttleEndTimeMillis:Date.now()+(0,X.$s)(Se),backoffCount:Se+1};return yield F.storage.setThrottleMetadata(_t),F.attemptFetch(z,_t)}}).apply(this,arguments)}}class Ac{constructor(b,M,F,z,ue){this.app=b,this._client=M,this._storageCache=F,this._storage=z,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ll(D,b){const M=D.target.error||void 0;return Pn.create(b,{originalErrorMessage:M&&M.message})}const _s="app_namespace_store";class jp{constructor(b,M,F,z=function Bp(){return new Promise((D,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{b(ll(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(_s,{keyPath:"compositeKey"})}}catch(M){b(Pn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=b,this.appName=M,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((z,ue)=>{const ze=F.transaction([_s],"readonly").objectStore(_s),_t=M.createCompositeKey(b);try{const Xe=ze.get(_t);Xe.onerror=$t=>{ue(ll($t,"storage-get"))},Xe.onsuccess=$t=>{const bt=$t.target.result;z(bt?bt.value:void 0)}}catch(Xe){ue(Pn.create("storage-get",{originalErrorMessage:Xe&&Xe.message}))}})})()}set(b,M){var F=this;return(0,O.Z)(function*(){const z=yield F.openDbPromise;return new Promise((ue,Se)=>{const _t=z.transaction([_s],"readwrite").objectStore(_s),Xe=F.createCompositeKey(b);try{const $t=_t.put({compositeKey:Xe,value:M});$t.onerror=bt=>{Se(ll(bt,"storage-set"))},$t.onsuccess=()=>{ue()}}catch($t){Se(Pn.create("storage-set",{originalErrorMessage:$t&&$t.message}))}})})()}delete(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((z,ue)=>{const ze=F.transaction([_s],"readwrite").objectStore(_s),_t=M.createCompositeKey(b);try{const Xe=ze.delete(_t);Xe.onerror=$t=>{ue(ll($t,"storage-delete"))},Xe.onsuccess=()=>{z()}}catch(Xe){ue(Pn.create("storage-delete",{originalErrorMessage:Xe&&Xe.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Mc{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const M=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),z=b.storage.getActiveConfig(),ue=yield M;ue&&(b.lastFetchStatus=ue);const Se=yield F;Se&&(b.lastSuccessfulFetchTimestampMillis=Se);const ze=yield z;ze&&(b.activeConfig=ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function zs(){return oh.apply(this,arguments)}function oh(){return(oh=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}!function po(){(0,oe._registerComponent)(new ge.wA("remote-config",function D(b,{instanceIdentifier:M}){const F=b.getProvider("app").getImmediate(),z=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Pn.create("registration-window");if(!(0,X.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:ue,apiKey:Se,appId:ze}=F.options;if(!ue)throw Pn.create("registration-project-id");if(!Se)throw Pn.create("registration-api-key");if(!ze)throw Pn.create("registration-app-id");const _t=new jp(ze,F.name,M=M||"firebase"),Xe=new Mc(_t),$t=new ie.Yd(cr);$t.logLevel=ie.in.ERROR;const bt=new qa(z,oe.SDK_VERSION,M,ue,Se,ze),Jn=new Lp(bt,_t),fn=new sh(Jn,_t,Xe,$t),pa=new Ac(F,fn,Xe,_t,$t);return function si(D){const b=(0,X.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(pa),pa},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(cr,"0.3.7"),(0,oe.registerVersion)(cr,"0.3.7","esm2017")}();const cl="/firebase-messaging-sw.js",vs="/firebase-cloud-messaging-push-scope",Gr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ws="google.c.a.c_id",Jo="google.c.a.c_l",xc="google.c.a.ts",$p="google.c.a.e";var Es=(()=>{return(D=Es||(Es={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Es;var D})();function ai(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Wa(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),z=new Uint8Array(F.length);for(let ue=0;ue<F.length;++ue)z[ue]=F.charCodeAt(ue);return z}const Ka="fcm_token_details_db",hr="fcm_token_object_Store";function ah(D){return Za.apply(this,arguments)}function Za(){return Za=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(Ka))return null;let b=null;return(yield(0,X.X3)(Ka,5,function(){var F=(0,O.Z)(function*(z,ue,Se,ze){var _t;if(ue<2||!z.objectStoreNames.contains(hr))return;const Xe=ze.objectStore(hr),$t=yield Xe.index("fcmSenderId").get(D);if(yield Xe.clear(),$t)if(2===ue){const bt=$t;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;b={token:bt.fcmToken,createTime:null!==(_t=bt.createTime)&&void 0!==_t?_t:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:ai(bt.vapidKey)}}}else if(3===ue){const bt=$t;b={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:ai(bt.auth),p256dh:ai(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:ai(bt.vapidKey)}}}else if(4===ue){const bt=$t;b={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:ai(bt.auth),p256dh:ai(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:ai(bt.vapidKey)}}}});return function(z,ue,Se,ze){return F.apply(this,arguments)}}())).close(),yield(0,X.Lj)(Ka),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),Rc(b)?b:null}),Za.apply(this,arguments)}function Rc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Ji="firebase-messaging-store";let Xo=null;function dl(){return Xo||(Xo=(0,X.X3)("firebase-messaging-database",1,(D,b)=>{0===b&&D.createObjectStore(Ji)})),Xo}function yn(D){return yo.apply(this,arguments)}function yo(){return(yo=(0,O.Z)(function*(D){const b=Zs(D),F=yield(yield dl()).transaction(Ji).objectStore(Ji).get(b);if(F)return F;{const z=yield ah(D.appConfig.senderId);if(z)return yield ws(D,z),z}})).apply(this,arguments)}function ws(D,b){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(D,b){const M=Zs(D),z=(yield dl()).transaction(Ji,"readwrite");return yield z.objectStore(Ji).put(b,M),yield z.complete,b})).apply(this,arguments)}function Nc(D){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(D){const b=Zs(D),F=(yield dl()).transaction(Ji,"readwrite");yield F.objectStore(Ji).delete(b),yield F.complete})).apply(this,arguments)}function Zs({appConfig:D}){return D.appId}const kn=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ea(D,b){return yi.apply(this,arguments)}function yi(){return(yi=(0,O.Z)(function*(D,b){const M=yield Ds(D),F=ft(b),z={method:"POST",headers:M,body:JSON.stringify(F)};let ue;try{ue=yield(yield fetch(zr(D.appConfig),z)).json()}catch(Se){throw kn.create("token-subscribe-failed",{errorInfo:Se})}if(ue.error)throw kn.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw kn.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function Ir(D,b){return Is.apply(this,arguments)}function Is(){return(Is=(0,O.Z)(function*(D,b){const M=yield Ds(D),F=ft(b.subscriptionOptions),z={method:"PATCH",headers:M,body:JSON.stringify(F)};let ue;try{ue=yield(yield fetch(`${zr(D.appConfig)}/${b.token}`,z)).json()}catch(Se){throw kn.create("token-update-failed",{errorInfo:Se})}if(ue.error)throw kn.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw kn.create("token-update-no-token");return ue.token})).apply(this,arguments)}function Xi(D,b){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,O.Z)(function*(D,b){const F={method:"DELETE",headers:yield Ds(D)};try{const ue=yield(yield fetch(`${zr(D.appConfig)}/${b}`,F)).json();if(ue.error)throw kn.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(z){throw kn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function zr({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ds(D){return bs.apply(this,arguments)}function bs(){return(bs=(0,O.Z)(function*({appConfig:D,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function ft({p256dh:D,auth:b,endpoint:M,vapidKey:F}){const z={web:{endpoint:M,auth:b,p256dh:D}};return F!==Gr&&(z.web.applicationPubKey=F),z}const _o=6048e5;function Xa(D){return eu.apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(D){const b=yield jt(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:ai(b.getKey("auth")),p256dh:ai(b.getKey("p256dh"))},F=yield yn(D.firebaseDependencies);if(F){if(bn(F.subscriptionOptions,M))return Date.now()>=F.createTime+_o?nu(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Xi(D.firebaseDependencies,F.token)}catch(z){console.warn(z)}return Ys(D.firebaseDependencies,M)}return Ys(D.firebaseDependencies,M)})).apply(this,arguments)}function tu(D){return hl.apply(this,arguments)}function hl(){return(hl=(0,O.Z)(function*(D){const b=yield yn(D.firebaseDependencies);b&&(yield Xi(D.firebaseDependencies,b.token),yield Nc(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function nu(D,b){return fl.apply(this,arguments)}function fl(){return(fl=(0,O.Z)(function*(D,b){try{const M=yield Ir(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield ws(D.firebaseDependencies,F),M}catch(M){throw yield tu(D),M}})).apply(this,arguments)}function Ys(D,b){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,O.Z)(function*(D,b){const F={token:yield ea(D,b),createTime:Date.now(),subscriptionOptions:b};return yield ws(D,F),F.token})).apply(this,arguments)}function jt(D,b){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Wa(b)})})).apply(this,arguments)}function bn(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function pl(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Cs(D,b){if(!b.notification)return;D.notification={};const M=b.notification.title;M&&(D.notification.title=M);const F=b.notification.body;F&&(D.notification.body=F);const z=b.notification.image;z&&(D.notification.image=z)}(b,D),function Vi(D,b){!b.data||(D.data=b.data)}(b,D),function gl(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const M=b.fcmOptions.link;M&&(D.fcmOptions.link=M);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function na(D){return"object"==typeof D&&!!D&&Ws in D}function Oc(D,b){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<b.length&&M.push(b.charAt(F));return M.join("")}function ru(D){return kn.create("missing-app-config-values",{valueName:D})}Oc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Oc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ra{constructor(b,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function uh(D){if(!D||!D.options)throw ru("App Configuration Object");if(!D.name)throw ru("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of b)if(!M[F])throw ru(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:z,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Qn(D){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(cl,{scope:vs}),D.swRegistration.update().catch(()=>{})}catch(b){throw kn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function iu(D,b){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield Qn(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw kn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function vi(D,b){return ml.apply(this,arguments)}function ml(){return(ml=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=Gr)})).apply(this,arguments)}function yl(){return(yl=(0,O.Z)(function*(D,b){if(!navigator)throw kn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw kn.create("permission-blocked");return yield vi(D,null==b?void 0:b.vapidKey),yield iu(D,null==b?void 0:b.serviceWorkerRegistration),Xa(D)})).apply(this,arguments)}function _l(D,b,M){return sa.apply(this,arguments)}function sa(){return(sa=(0,O.Z)(function*(D,b,M){const F=su(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Ws],message_name:M[Jo],message_time:M[xc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function su(D){switch(D){case Es.NOTIFICATION_CLICKED:return"notification_open";case Es.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ou(){return(ou=(0,O.Z)(function*(D,b){const M=b.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Es.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(pl(M)):D.onMessageHandler.next(pl(M)));const F=M.data;na(F)&&"1"===F[$p]&&(yield _l(D,M.messageType,F))})).apply(this,arguments)}const kc="@firebase/messaging",au=D=>{const b=new ra(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Pc(D,b){return ou.apply(this,arguments)}(b,M)),b},Qs=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function ia(D,b){return yl.apply(this,arguments)}(b,F)}};function Lc(){return aa.apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Fc(){(0,oe._registerComponent)(new ge.wA("messaging",au,"PUBLIC")),(0,oe._registerComponent)(new ge.wA("messaging-internal",Qs,"PRIVATE")),(0,oe.registerVersion)(kc,"0.9.12"),(0,oe.registerVersion)(kc,"0.9.12","esm2017")}();const El="analytics",ay="firebase_id",ua="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uu="https://www.googletagmanager.com/gtag/js",Fn=new ie.Yd("@firebase/analytics");function Il(D){return Promise.all(D.map(b=>b.catch(M=>M)))}function ch(D,b){const M=document.createElement("script");M.src=`${uu}?l=${D}&id=${b}`,M.async=!0,document.head.appendChild(M)}function es(D,b,M,F,z,ue){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(D,b,M,F,z,ue){const Se=F[z];try{if(Se)yield b[Se];else{const _t=(yield Il(M)).find(Xe=>Xe.measurementId===z);_t&&(yield b[_t.appId])}}catch(ze){Fn.error(ze)}D("config",z,ue)})).apply(this,arguments)}function Dl(D,b,M,F,z){return bl.apply(this,arguments)}function bl(){return(bl=(0,O.Z)(function*(D,b,M,F,z){try{let ue=[];if(z&&z.send_to){let Se=z.send_to;Array.isArray(Se)||(Se=[Se]);const ze=yield Il(M);for(const _t of Se){const Xe=ze.find(bt=>bt.measurementId===_t),$t=Xe&&b[Xe.appId];if(!$t){ue=[];break}ue.push($t)}}0===ue.length&&(ue=Object.values(b)),yield Promise.all(ue),D("event",F,z||{})}catch(ue){Fn.error(ue)}})).apply(this,arguments)}function Hp(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(uu))return b;return null}const Tn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),cu=new class Uc{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function ts(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Bc(D){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(D){var b;const{appId:M,apiKey:F}=D,z={method:"GET",headers:ts(F)},ue=ua.replace("{app-id}",M),Se=yield fetch(ue,z);if(200!==Se.status&&304!==Se.status){let ze="";try{const _t=yield Se.json();(null===(b=_t.error)||void 0===b?void 0:b.message)&&(ze=_t.error.message)}catch(_t){}throw Tn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:ze})}return Se.json()})).apply(this,arguments)}function Ii(D){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(D,b=cu,M){const{appId:F,apiKey:z,measurementId:ue}=D.options;if(!F)throw Tn.create("no-app-id");if(!z){if(ue)return{measurementId:ue,appId:F};throw Tn.create("no-api-key")}const Se=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new hu;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==M?M:6e4),It({appId:F,apiKey:z,measurementId:ue},Se,ze,b)})).apply(this,arguments)}function It(D,b,M){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:M},F,z=cu){const{appId:ue,measurementId:Se}=D;try{yield du(F,b)}catch(ze){if(Se)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ue,measurementId:Se};throw ze}try{const ze=yield Bc(D);return z.deleteThrottleMetadata(ue),ze}catch(ze){if(!dh(ze)){if(z.deleteThrottleMetadata(ue),Se)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ue,measurementId:Se};throw ze}const _t=503===Number(ze.customData.httpStatus)?(0,X.$s)(M,z.intervalMillis,30):(0,X.$s)(M,z.intervalMillis),Xe={throttleEndTimeMillis:Date.now()+_t,backoffCount:M+1};return z.setThrottleMetadata(ue,Xe),Fn.debug(`Calling attemptFetch again in ${_t} millis`),It(D,Xe,F,z)}})).apply(this,arguments)}function du(D,b){return new Promise((M,F)=>{const z=Math.max(b-Date.now(),0),ue=setTimeout(M,z);D.addEventListener(()=>{clearTimeout(ue),F(Tn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function dh(D){if(!(D instanceof X.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class hu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function jc(){return eo.apply(this,arguments)}function eo(){return(eo=(0,O.Z)(function*(){if(!(0,X.hl)())return Fn.warn(Tn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(D){return Fn.warn(Tn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(D,b,M,F,z,ue,Se){var ze;const _t=Ii(D);_t.then(fn=>{M[fn.measurementId]=fn.appId,D.options.measurementId&&fn.measurementId!==D.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${fn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fn=>Fn.error(fn)),b.push(_t);const Xe=jc().then(fn=>{if(fn)return F.getId()}),[$t,bt]=yield Promise.all([_t,Xe]);Hp()||ch(ue,$t.measurementId),z("js",new Date);const Jn=null!==(ze=null==Se?void 0:Se.config)&&void 0!==ze?ze:{};return Jn.origin="firebase",Jn.update=!0,null!=bt&&(Jn[ay]=bt),z("config",$t.measurementId,Jn),$t.measurementId})).apply(this,arguments)}class wo{constructor(b){this.app=b}_delete(){return delete ui[this.app.options.appId],Promise.resolve()}}let ui={},to=[];const Io={};let li,Ss,Do="dataLayer",$n=!1;function Ms(D,b,M){!function Gp(){const D=[];if((0,X.ru)()&&D.push("This is a browser extension environment."),(0,X.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,z)=>`(${z+1}) ${F}`).join(" "),M=Tn.create("invalid-analytics-context",{errorInfo:b});Fn.warn(M.message)}}();const F=D.options.appId;if(!F)throw Tn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Tn.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ui[F])throw Tn.create("already-exists",{id:F});if(!$n){!function Vc(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Do);const{wrappedGtag:ue,gtagCore:Se}=function Cl(D,b,M,F,z){let ue=function(...Se){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(ue=window[z]),window[z]=function lu(D,b,M,F){function ue(){return(ue=(0,O.Z)(function*(Se,ze,_t){try{"event"===Se?yield Dl(D,b,M,ze,_t):"config"===Se?yield es(D,b,M,F,ze,_t):D("set",ze)}catch(Xe){Fn.error(Xe)}})).apply(this,arguments)}return function z(Se,ze,_t){return ue.apply(this,arguments)}}(ue,D,b,M),{gtagCore:ue,wrappedGtag:window[z]}}(ui,to,Io,Do,"gtag");Ss=ue,li=Se,$n=!0}return ui[F]=function As(D,b,M,F,z,ue,Se){return Ln.apply(this,arguments)}(D,to,Io,b,li,Do,M),new wo(D)}function fu(){return(fu=(0,O.Z)(function*(D,b,M,F,z){if(z&&z.global)D("event",M,F);else{const ue=yield b;D("event",M,Object.assign(Object.assign({},F),{send_to:ue}))}})).apply(this,arguments)}function pu(){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(D){return!1}})).apply(this,arguments)}const Sl="@firebase/analytics";!function ph(){(0,oe._registerComponent)(new ge.wA(El,(b,{options:M})=>Ms(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new ge.wA("analytics-internal",function D(b){try{const M=b.getProvider(El).getImmediate();return{logEvent:(F,z,ue)=>function $c(D,b,M,F){D=(0,X.m9)(D),function Co(D,b,M,F,z){return fu.apply(this,arguments)}(Ss,ui[D.app.options.appId],b,M,F).catch(z=>Fn.error(z))}(M,F,z,ue)}}catch(M){throw Tn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(Sl,"0.7.8"),(0,oe.registerVersion)(Sl,"0.7.8","esm2017")}();var Gc=k(4408),Mo=k(7565);const Vn=new class Ml extends Mo.v{}(class ca extends Gc.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,M,F):(b.flush(this),0)}});var Hn=k(4986),xl=k(8505),Rl=k(9468),Wr=k(5363);const bi=new g.GfV("7.2.0"),di="__angularfire_symbol__analyticsIsSupported",xo="__angularfire_symbol__remoteConfigIsSupported",Nl="__angularfire_symbol__messagingIsSupported";function qc(D,b,M){if(b){if(1===b.length)return b[0];const ue=b.filter(Se=>Se.app===M);if(1===ue.length)return ue[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[di]||(globalThis[di]=pu().then(D=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=D)),globalThis[Nl]||(globalThis[Nl]=Lc().then(D=>globalThis.__angularfire_symbol__messagingIsSupportedValue=D)),globalThis[xo]||(globalThis[xo]=zs().then(D=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=D));const so=(D,b)=>{const M=b?[b]:(0,Y.C6)(),F=[];return M.forEach(z=>{z.container.getProvider(D).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function ha(){}class Ro{constructor(b,M=Vn){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,F){const z=this.zone;return this.delegate.schedule(function(Se){z.runGuarded(()=>{b.apply(this,[Se])})},M,F)}}class yh{constructor(b){this.zone=b,this.task=null}call(b,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ha,{},ha,ha)),M.pipe((0,xl.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ol=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Ro(Zone.current)),this.insideAngular=M.run(()=>new Ro(Zone.current,Hn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function rs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function oo(D){return rs(),function _u(D){return function(M){return(M=M.lift(new yh(D.ngZone))).pipe((0,Rl.R)(D.outsideAngular),(0,Wr.Q)(D.insideAngular))}}(rs())(D)}},2090:(at,Ae,k)=>{k.d(Ae,{$s:()=>Hs,BH:()=>De,G6:()=>re,L:()=>le,LL:()=>ki,Lj:()=>Vt,Mn:()=>Ve,Sg:()=>xe,UG:()=>ve,US:()=>ie,X3:()=>lt,ZB:()=>Q,ZR:()=>tt,b$:()=>we,d:()=>ye,eu:()=>pt,hl:()=>Ge,jU:()=>Ye,m9:()=>ut,ne:()=>Ze,pd:()=>qt,r3:()=>_e,ru:()=>We,tV:()=>j,uI:()=>me,vZ:()=>ct,w1:()=>Ee,xO:()=>cn,xb:()=>wt,z$:()=>ke,zI:()=>Pt,zd:()=>On});var g=k(5861);const X=function(U){const L=[];let $=0;for(let ae=0;ae<U.length;ae++){let Z=U.charCodeAt(ae);Z<128?L[$++]=Z:Z<2048?(L[$++]=Z>>6|192,L[$++]=63&Z|128):55296==(64512&Z)&&ae+1<U.length&&56320==(64512&U.charCodeAt(ae+1))?(Z=65536+((1023&Z)<<10)+(1023&U.charCodeAt(++ae)),L[$++]=Z>>18|240,L[$++]=Z>>12&63|128,L[$++]=Z>>6&63|128,L[$++]=63&Z|128):(L[$++]=Z>>12|224,L[$++]=Z>>6&63|128,L[$++]=63&Z|128)}return L},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ae=[];for(let Z=0;Z<U.length;Z+=3){const Ue=U[Z],gt=Z+1<U.length,Zt=gt?U[Z+1]:0,wr=Z+2<U.length,Bt=wr?U[Z+2]:0;let dn=(15&Zt)<<2|Bt>>6,rr=63&Bt;wr||(rr=64,gt||(dn=64)),ae.push($[Ue>>2],$[(3&Ue)<<4|Zt>>4],$[dn],$[rr])}return ae.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(X(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let $=0,ae=0;for(;$<U.length;){const Z=U[$++];if(Z<128)L[ae++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const Ue=U[$++];L[ae++]=String.fromCharCode((31&Z)<<6|63&Ue)}else if(Z>239&&Z<365){const wr=((7&Z)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;L[ae++]=String.fromCharCode(55296+(wr>>10)),L[ae++]=String.fromCharCode(56320+(1023&wr))}else{const Ue=U[$++],gt=U[$++];L[ae++]=String.fromCharCode((15&Z)<<12|(63&Ue)<<6|63&gt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,ae=[];for(let Z=0;Z<U.length;){const Ue=$[U.charAt(Z++)],Zt=Z<U.length?$[U.charAt(Z)]:0;++Z;const Bt=Z<U.length?$[U.charAt(Z)]:64;++Z;const St=Z<U.length?$[U.charAt(Z)]:64;if(++Z,null==Ue||null==Zt||null==Bt||null==St)throw Error();ae.push(Ue<<2|Zt>>4),64!==Bt&&(ae.push(Zt<<4&240|Bt>>2),64!==St&&ae.push(Bt<<6&192|St))}return ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},le=function(U){return function(U){const L=X(U);return ie.encodeByteArray(L,!0)}(U).replace(/\./g,"")},j=function(U){try{return ie.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!He($)||(U[$]=Q(U[$],L[$]));return U}function He(U){return"__proto__"!==U}class De{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,ae)=>{$?this.reject($):this.resolve(ae),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,ae))}}}function xe(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ae=L||"demo-project",Z=U.iat||0,Ue=U.sub||U.user_id;if(!Ue)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${ae}`,aud:ae,iat:Z,exp:Z+3600,auth_time:Z,sub:Ue,user_id:Ue,firebase:{sign_in_provider:"custom",identities:{}}},U);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(gt)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function me(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Ye(){return"object"==typeof self&&self.self===self}function We(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function we(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return ke().indexOf("Electron/")>=0}function Ee(){const U=ke();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ve(){return ke().indexOf("MSAppHost/")>=0}function re(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){return"object"==typeof indexedDB}function pt(){return new Promise((U,L)=>{try{let $=!0;const ae="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(ae);Z.onsuccess=()=>{Z.result.close(),$||self.indexedDB.deleteDatabase(ae),U(!0)},Z.onupgradeneeded=()=>{$=!1},Z.onerror=()=>{var Ue;L((null===(Ue=Z.error)||void 0===Ue?void 0:Ue.message)||"")}}catch($){L($)}})}function Pt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class tt extends Error{constructor(L,$,ae){super($),this.code=L,this.customData=ae,this.name="FirebaseError",Object.setPrototypeOf(this,tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ki.prototype.create)}}class ki{constructor(L,$,ae){this.service=L,this.serviceName=$,this.errors=ae}create(L,...$){const ae=$[0]||{},Z=`${this.service}/${L}`,Ue=this.errors[L],gt=Ue?function Wi(U,L){return U.replace(ni,($,ae)=>{const Z=L[ae];return null!=Z?String(Z):`<${ae}?>`})}(Ue,ae):"Error";return new tt(Z,`${this.serviceName}: ${gt} (${Z}).`,ae)}}const ni=/\{\$([^}]+)}/g;function _e(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function wt(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function ct(U,L){if(U===L)return!0;const $=Object.keys(U),ae=Object.keys(L);for(const Z of $){if(!ae.includes(Z))return!1;const Ue=U[Z],gt=L[Z];if(Lt(Ue)&&Lt(gt)){if(!ct(Ue,gt))return!1}else if(Ue!==gt)return!1}for(const Z of ae)if(!$.includes(Z))return!1;return!0}function Lt(U){return null!==U&&"object"==typeof U}function cn(U){const L=[];for(const[$,ae]of Object.entries(U))Array.isArray(ae)?ae.forEach(Z=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(Z))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(ae));return L.length?"&"+L.join("&"):""}function On(U){const L={};return U.replace(/^\?/,"").split("&").forEach(ae=>{if(ae){const[Z,Ue]=ae.split("=");L[decodeURIComponent(Z)]=decodeURIComponent(Ue)}}),L}function qt(U){const L=U.indexOf("?");if(!L)return"";const $=U.indexOf("#",L);return U.substring(L,$>0?$:void 0)}function Ze(U,L){const $=new Dn(U,L);return $.subscribe.bind($)}class Dn{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(ae=>{this.error(ae)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,ae){let Z;if(void 0===L&&void 0===$&&void 0===ae)throw new Error("Missing Observer.");Z=function Zn(U,L){if("object"!=typeof U||null===U)return!1;for(const $ of L)if($ in U&&"function"==typeof U[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:ae},void 0===Z.next&&(Z.next=ri),void 0===Z.error&&(Z.error=ri),void 0===Z.complete&&(Z.complete=ri);const Ue=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch(gt){}}),this.observers.push(Z),Ue}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(ae){"undefined"!=typeof console&&console.error&&console.error(ae)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ri(){}function Hs(U,L=1e3,$=2){const ae=L*Math.pow($,U),Z=Math.round(.5*ae*(Math.random()-.5)*2);return Math.min(144e5,ae+Z)}function ut(U){return U&&U._delegate?U._delegate:U}function Er(U,L){return new Promise(($,ae)=>{U.onsuccess=Z=>{$(Z.target.result)},U.onerror=Z=>{var Ue;ae(`${L}: ${null===(Ue=Z.target.error)||void 0===Ue?void 0:Ue.message}`)}})}class kt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$="readonly"){return new Ke(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new Ce(this._db.createObjectStore(L,$))}close(){this._db.close()}}class Ke{constructor(L){this._transaction=L,this.complete=new Promise(($,ae)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{ae(this._transaction.error)},this._transaction.onabort=()=>{ae(this._transaction.error)}})}objectStore(L){return new Ce(this._transaction.objectStore(L))}}class Ce{constructor(L){this._store=L}index(L){return new Qe(this._store.index(L))}createIndex(L,$,ae){return new Qe(this._store.createIndex(L,$,ae))}get(L){return Er(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return Er(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return Er(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return Er(this._store.clear(),"Error clearing IndexedDB object store")}}class Qe{constructor(L){this._index=L}get(L){return Er(this._index.get(L),"Error reading from IndexedDB")}}function lt(U,L,$){return new Promise((ae,Z)=>{try{const Ue=indexedDB.open(U,L);Ue.onsuccess=gt=>{ae(new kt(gt.target.result))},Ue.onerror=gt=>{var Zt;Z(`Error opening indexedDB: ${null===(Zt=gt.target.error)||void 0===Zt?void 0:Zt.message}`)},Ue.onupgradeneeded=gt=>{$(new kt(Ue.result),gt.oldVersion,gt.newVersion,new Ke(Ue.transaction))}}catch(Ue){Z(`Error opening indexedDB: ${Ue.message}`)}})}function Vt(U){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,g.Z)(function*(U){return new Promise((L,$)=>{try{const ae=indexedDB.deleteDatabase(U);ae.onsuccess=()=>{L()},ae.onerror=Z=>{var Ue;$(`Error deleting indexedDB database "${U}": ${null===(Ue=Z.target.error)||void 0===Ue?void 0:Ue.message}`)}}catch(ae){$(`Error deleting indexedDB database "${U}": ${ae.message}`)}})})).apply(this,arguments)}},7085:(at,Ae,k)=>{var g=k(5e3);let Y=null;function O(){return Y}const ie=new g.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function le(){return(0,g.LFG)(B)}()},providedIn:"platform"}),n})();const j=new g.OlP("Location Initialized");let B=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function He(){return new B((0,g.LFG)(ie))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ke(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(n){const e=(0,g.LFG)(ie).location;return new We((0,g.LFG)(he),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ye=new g.OlP("appBaseHref");let We=(()=>{class n extends me{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ke(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,l){const d=this.prepareExternalUrl(o+ke(l));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){const d=this.prepareExternalUrl(o+ke(l));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(Ye,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),we=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=De(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,l){let d=this.prepareExternalUrl(o+ke(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){let d=this.prepareExternalUrl(o+ke(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(Ye,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=xe(Be(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ke(r))}normalize(t){return n.stripTrailingSlash(function Ve(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=ke,n.joinWithSlash=De,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(g.LFG(me),g.LFG(he))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ee(){return new ye((0,g.LFG)(me),(0,g.LFG)(he))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}let si=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new un,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$a("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$a("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class un{constructor(){this.$implicit=null,this.ngIf=null}}function $a(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let mo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function hr(n){return"server"===n}let Ya=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Qa((0,g.LFG)(ie),window)}),n})();class Qa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Xo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const l=o.shadowRoot;if(l){const d=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],o-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ji(this.window.history)||Ji(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ji(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ws extends class yo extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Y||(Y=n)}(new ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Nc(){return ln=ln||document.querySelector("base"),ln?ln.getAttribute("href"):null}();return null==t?null:function Zs(n){Ks=Ks||document.createElement("a"),Ks.setAttribute("href",n);const e=Ks.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ln=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function fo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let Ks,ln=null;const fr=new g.OlP("TRANSITION_ID"),ea=[{provide:g.ip1,useFactory:function kn(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[fr,ie,g.zs3],multi:!0}];class yi{static init(){(0,g.VLi)(new yi)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let l=o.length,d=!1;const m=function(w){d=d||w,l--,0==l&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ir=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Is=new g.OlP("EventManagerPlugins");let Xi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const d=o[l];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Is),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ja{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let zr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ds=(()=>{class n extends zr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(bs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bs))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function bs(n){O().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_o=/%COMP%/g;function Ys(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ys(n,o,t):(o=o.replace(_o,n),t.push(o))}return t}function Ie(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ta=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new bn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Vi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new gl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ys(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Xi),g.LFG(Ds),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class bn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=ft[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ft[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ie(r)):this.eventManager.addEventListener(e,t,Ie(r))}}class Vi extends bn{constructor(e,t,r,o){super(e),this.component=r;const l=Ys(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function nu(n){return"_ngcontent-%COMP%".replace(_o,n)}(o+"-"+r.id),this.hostAttr=function fl(n){return"_nghost-%COMP%".replace(_o,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class gl extends bn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Ys(o.id,o.styles,[]);for(let d=0;d<l.length;d++){const m=document.createElement("style");m.textContent=l[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let na=(()=>{class n extends Ja{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Oc=["alt","control","meta","shift"],ru={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ra={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Qn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let _i=(()=>{class n extends Ja{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,l.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let d="";if(Oc.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),d+=w+".")}),d+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function iu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ra.hasOwnProperty(e)&&(e=ra[e]))}return ru[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Oc.forEach(l=>{l!=o&&Qn[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const yl=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Ts(){ws.makeCurrent(),yi.init()},multi:!0},{provide:ie,useFactory:function ml(){return(0,g.RDi)(document),document},deps:[]}]),_l=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function vi(){return new g.qLn},deps:[]},{provide:Is,useClass:na,multi:!0,deps:[ie,g.R0b,g.Lbi]},{provide:Is,useClass:_i,multi:!0,deps:[ie]},{provide:ta,useClass:ta,deps:[Xi,Ds,g.AFp]},{provide:g.FYo,useExisting:ta},{provide:zr,useExisting:Ds},{provide:Ds,useClass:Ds,deps:[ie]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Xi,useClass:Xi,deps:[Is,g.R0b]},{provide:class yn{},useClass:Ir,deps:[]}];let sa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:fr,useExisting:g.AFp},ea]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:_l,imports:[mo,g.hGG]}),n})();"undefined"!=typeof window&&window;var xn=k(8996),Tn=k(8306);const{isArray:uy}=Array,{getPrototypeOf:wi,prototype:Uc,keys:cu}=Object;function ts(n){if(1===n.length){const e=n[0];if(uy(e))return{args:e,keys:null};if(function Bc(n){return n&&"object"==typeof n&&wi(n)===Uc}(e)){const t=cu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var _n=k(8421),Ii=k(7669),jn=k(5403),It=k(4004);const{isArray:Xs}=Array;function dh(n){return(0,It.U)(e=>function du(n,e){return Xs(e)?n(...e):n(e)}(n,e))}function hu(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let eo=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),As=(()=>{class n extends eo{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Ln=new g.OlP("NgValueAccessor"),to={provide:Ln,useExisting:(0,g.Gpc)(()=>bo),multi:!0},Do=new g.OlP("CompositionEventMode");let bo=(()=>{class n extends eo{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Io(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Do,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[g._Bn([to]),g.qOj]}),n})();const $n=new g.OlP("NgValidators"),no=new g.OlP("NgAsyncValidators");function ci(n){return null!=n}function So(n){const e=(0,g.QGY)(n)?(0,xn.D)(n):n;return(0,g.CqO)(e),e}function Al(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function pu(n,e){return e.map(t=>t(n))}function qp(n){return n.map(e=>function Ui(n){return!n.validate}(e)?e:t=>e.validate(t))}function An(n){return null!=n?function hh(n){if(!n)return null;const e=n.filter(ci);return 0==e.length?null:function(t){return Al(pu(t,e))}}(qp(n)):null}function $c(n){return null!=n?function fh(n){if(!n)return null;const e=n.filter(ci);return 0==e.length?null:function(t){return function jc(...n){const e=(0,Ii.jO)(n),{args:t,keys:r}=ts(n),o=new Tn.y(l=>{const{length:d}=t;if(!d)return void l.complete();const m=new Array(d);let w=d,C=d;for(let x=0;x<d;x++){let N=!1;(0,_n.Xf)(t[x]).subscribe((0,jn.x)(l,H=>{N||(N=!0,C--),m[x]=H},()=>w--,void 0,()=>{(!w||!N)&&(C||l.next(r?hu(r,m):m),l.complete())}))}});return e?o.pipe(dh(e)):o}(pu(t,e).map(So)).pipe((0,It.U)(Al))}}(qp(n)):null}function Sl(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Gc(n){return n?Array.isArray(n)?n:[n]:[]}function ca(n,e){return Array.isArray(n)?n.includes(e):n===e}function Mo(n,e){const t=Gc(e);return Gc(n).forEach(o=>{ca(t,o)||t.push(o)}),t}function Ml(n,e){return Gc(e).filter(t=>!ca(n,t))}class Vn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=An(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$c(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Di extends Vn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Hn extends Vn{get formDirective(){return null}get path(){return null}}let bi=(()=>{class n extends class xl{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Di,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})();function Mr(n,e){(function _u(n,e){const t=function Hc(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Sl(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function ph(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Sl(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();fa(e._rawValidators,o),fa(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),function zc(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&b(n,e)})}(n,e),function M(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function D(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&b(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function oo(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function fa(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function b(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function fn(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ti="VALID",Kr="INVALID",pr="PENDING",xs="DISABLED";function _h(n){return(kl(n)?n.validators:n)||null}function Wc(n){return Array.isArray(n)?An(n):n||null}function ga(n,e){return(kl(e)?e.asyncValidators:n)||null}function Pl(n){return Array.isArray(n)?$c(n):n||null}function kl(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Fl=n=>n instanceof Zp;function wu(n){return(n=>n instanceof Kp)(n)?n.value:n.getRawValue()}function vh(n,e){const t=Fl(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function ly(n,e){Fl(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new g.vHH(1002,"")})}class ma{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Wc(this._rawValidators),this._composedAsyncValidatorFn=Pl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ti}get invalid(){return this.status===Kr}get pending(){return this.status==pr}get disabled(){return this.status===xs}get enabled(){return this.status!==xs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Wc(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Pl(e)}addValidators(e){this.setValidators(Mo(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Mo(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ml(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ml(e,this._rawAsyncValidators))}hasValidator(e){return ca(this._rawValidators,e)}hasAsyncValidator(e){return ca(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=pr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xs,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ti,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ti||this.status===pr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xs:Ti}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=pr,this._hasOwnPendingAsyncValidator=!0;const t=So(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function vu(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Fl(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof cy)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?xs:this.errors?Kr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pr)?pr:this._anyControlsHaveStatus(Kr)?Kr:Ti}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kl(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Kp extends ma{constructor(e=null,t,r){super(_h(t),ga(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kl(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fn(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fn(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Zp extends ma{constructor(e,t,r){super(_h(t),ga(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ly(this,e),Object.keys(e).forEach(r=>{vh(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=wu(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,l)=>{r=t(r,o,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class cy extends ma{constructor(e,t,r){super(_h(t),ga(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ly(this,e),e.forEach((r,o)=>{vh(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>wu(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const wh={provide:Di,useExisting:(0,g.Gpc)(()=>Zc)},Kc=(()=>Promise.resolve(null))();let Zc=(()=>{class n extends Di{constructor(t,r,o,l,d){super(),this._changeDetectorRef=d,this.control=new Kp,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Jn(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===bo?t=l:function $t(n){return Object.getPrototypeOf(n.constructor)===As}(l)?r=l:o=l}),o||r||t||null}(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Xe(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Mr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Kc.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;Kc.then(()=>{var l;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(l=this._changeDetectorRef)||void 0===l||l.markForCheck()})}_getPath(t){return this._parent?function mu(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hn,9),g.Y36($n,10),g.Y36(no,10),g.Y36(Ln,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([wh]),g.qOj,g.TTD]}),n})(),Ul=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),Vh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[Ul]]}),n})(),Uh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Vh]}),n})();var is=k(2011),Ns=k(7579);function vt(...n){const e=(0,Ii.yG)(n);return(0,xn.D)(n,e)}var Zr=k(6451),ss=k(5363),Cr=k(4482);function Gn(n,e){return(0,Cr.e)((t,r)=>{let o=null,l=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,jn.x)(r,w=>{null==o||o.unsubscribe();let C=0;const x=l++;(0,_n.Xf)(n(w,x)).subscribe(o=(0,jn.x)(r,N=>r.next(e?e(w,N,x,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var jh=k(6063);class $h extends Ns.x{constructor(e=1/0,t=1/0,r=jh.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:d}=this;t||(r.push(e),!o&&r.push(l.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,l=o.slice();for(let d=0;d<l.length&&!e.closed;d+=r?1:2)e.next(l[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,l=(o?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var j0=k(3099);function Hh(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,j0.B)({connector:()=>new $h(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const Ai=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function os(n,e){return(0,Cr.e)((t,r)=>{let o=0;t.subscribe((0,jn.x)(r,l=>n.call(e,l,o++)&&r.next(l)))})}var ko=k(515);function sd(n){return n<=0?()=>ko.E:(0,Cr.e)((e,t)=>{let r=0;e.subscribe((0,jn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Gh(n){return(0,Cr.e)((e,t)=>{let r=!1;e.subscribe((0,jn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function qh(n=hi){return(0,Cr.e)((e,t)=>{let r=!1;e.subscribe((0,jn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function hi(){return new Ai}var _a=k(4671);function uo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?os((o,l)=>n(o,l,r)):_a.y,sd(1),t?Gh(e):qh(()=>new Ai))}var zh=k(576);function Tr(n,e){return(0,zh.m)(e)?Gn(()=>n,e):Gn(()=>n)}var as=k(9468),ir=k(5813);k(5867);var q=k(5861),Ht=k(9681),Yr=k(4859),xt=k(2090),Qr=k(1877);const Su=new Map,ad={activated:!1,tokenObservers:[]},wy={initialized:!1,enabled:!1};function sr(n){return Su.get(n)||ad}function Si(n,e){Su.set(n,e)}function Hl(){return wy}class Dy{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,q.Z)(function*(){t.stop();try{t.pending=new xt.BH,yield function pD(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Mi=new xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function dg(n){if(!sr(n).activated)throw Mi.create("use-before-activation",{appName:n.name})}function Cy(n,e){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,q.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const l={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,l)}catch(N){throw Mi.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw Mi.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw Mi.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),x=Date.now();return{token:m.attestationToken,expireTimeMillis:x+C,issuedAtTimeMillis:x}})).apply(this,arguments)}function wT(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Zh="firebase-app-check-store";let ld=null;function z0(){return ld||(ld=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Mi.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Zh,{keyPath:"compositeKey"})}}catch(t){e(Mi.create("storage-open",{originalErrorMessage:t.message}))}}),ld)}function Sy(){return(Sy=(0,q.Z)(function*(n,e){const r=(yield z0()).transaction(Zh,"readwrite"),l=r.objectStore(Zh).put({compositeKey:n,value:e});return new Promise((d,m)=>{l.onsuccess=w=>{d()},r.onerror=w=>{var C;m(Mi.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Yh=new Qr.Yd("@firebase/app-check");function zl(n,e){return(0,xt.hl)()?function fg(n,e){return function W0(n,e){return Sy.apply(this,arguments)}(function Z0(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Yh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ED(){return Hl().enabled}function Ry(){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,q.Z)(function*(){const n=Hl();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const IT={error:"UNKNOWN_ERROR"};function X0(n){return xt.US.encodeString(JSON.stringify(n),!1)}function pg(n){return gg.apply(this,arguments)}function gg(){return(gg=(0,q.Z)(function*(n,e=!1){const t=n.app;dg(t);const r=sr(t);let l,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&mg(w)&&(o=w)}if(!e&&o&&mg(o))return{token:o.token};let m,d=!1;if(ED()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Cy(wT(t,yield Ry()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield zl(t,w),Si(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Yh.warn(w.message):Yh.error(w),l=w}return o?(m={token:o.token},Si(t,Object.assign(Object.assign({},r),{token:o})),yield zl(t,o)):m=ID(l),d&&Py(t,m),m})).apply(this,arguments)}function Oy(n,e){const t=sr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Si(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Os(n){const{app:e}=n,t=sr(e);let r=t.tokenRefresher;r||(r=function wD(n){const{app:e}=n;return new Dy((0,q.Z)(function*(){let r;if(r=sr(e).token?yield pg(n,!0):yield pg(n),r.error)throw r.error}),()=>!0,()=>{const t=sr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Si(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Py(n,e){const t=sr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function mg(n){return n.expireTimeMillis-Date.now()>0}function ID(n){return{token:X0(IT),error:n}}class DD{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=sr(this.app);for(const t of e)Oy(this.app,t.next);return Promise.resolve()}}const sE="app-check-internal";!function xD(){(0,Ht._registerComponent)(new Yr.wA("app-check",n=>function bD(n,e){return new DD(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sE).initialize()})),(0,Ht._registerComponent)(new Yr.wA(sE,n=>function eE(n){return{getToken:e=>pg(n,e),addTokenListener:e=>function Ny(n,e,t,r){const{app:o}=n,l=sr(o),d={next:t,error:r,type:e};if(Si(o,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&mg(l.token)){const m=l.token;Promise.resolve().then(()=>{t({token:m.token}),Os(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Os(n))}(n,"INTERNAL",e),removeTokenListener:e=>Oy(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ht.registerVersion)("@firebase/app-check","0.5.6")}();class wg{constructor(){return(0,ir.vb)("app-check")}}"undefined"!=typeof window&&window;var OD=k(127);const Ea=new g.OlP("angularfire2.auth.use-emulator"),Ig=new g.OlP("angularfire2.auth.settings"),uE=new g.OlP("angularfire2.auth.tenant-id"),$y=new g.OlP("angularfire2.auth.langugage-code"),Dg=new g.OlP("angularfire2.auth.use-device-language"),Hy=new g.OlP("angularfire.auth.persistence"),bg=(n,e,t,r,o,l,d,m)=>(0,is.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,l&&w.useDeviceLanguage(),d)for(const[C,x]of Object.entries(d))w.settings[C]=x;return m&&w.setPersistence(m),w},[t,r,o,l,d,m]);let Cg=(()=>{class n{constructor(t,r,o,l,d,m,w,C,x,N,H,J){const ce=new Ns.x,Le=vt(void 0).pipe((0,ss.Q)(d.outsideAngular),Gn(()=>l.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,820)))),(0,It.U)(()=>(0,is.on)(t,l,r)),(0,It.U)(st=>bg(st,l,m,C,x,N,w,H)),Hh({bufferSize:1,refCount:!1}));if(hr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{Le.pipe(uo()).subscribe();const Qt=Le.pipe(Gn(Ft=>Ft.getRedirectResult().then(Xt=>Xt,()=>null)),ir.iC,Hh({bufferSize:1,refCount:!1})),Jt=Le.pipe(Gn(Ft=>new Tn.y(Xt=>({unsubscribe:l.runOutsideAngular(()=>Ft.onAuthStateChanged(En=>Xt.next(En),En=>Xt.error(En),()=>Xt.complete()))})))),tn=Le.pipe(Gn(Ft=>new Tn.y(Xt=>({unsubscribe:l.runOutsideAngular(()=>Ft.onIdTokenChanged(En=>Xt.next(En),En=>Xt.error(En),()=>Xt.complete()))}))));this.authState=Qt.pipe(Tr(Jt),(0,as.R)(d.outsideAngular),(0,ss.Q)(d.insideAngular)),this.user=Qt.pipe(Tr(tn),(0,as.R)(d.outsideAngular),(0,ss.Q)(d.insideAngular)),this.idToken=this.user.pipe(Gn(Ft=>Ft?(0,xn.D)(Ft.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(Gn(Ft=>Ft?(0,xn.D)(Ft.getIdTokenResult()):vt(null))),this.credential=(0,Zr.T)(Qt,ce,this.authState.pipe(os(Ft=>!Ft))).pipe((0,It.U)(Ft=>(null==Ft?void 0:Ft.user)?Ft:null),(0,as.R)(d.outsideAngular),(0,ss.Q)(d.insideAngular))}return(0,is.pX)(this,Le,l,{spy:{apply:(st,Qt,Jt)=>{(st.startsWith("signIn")||st.startsWith("createUser"))&&Jt.then(tn=>ce.next(tn))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(is.Dh),g.LFG(is.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(ir.HU),g.LFG(Ea,8),g.LFG(Ig,8),g.LFG(uE,8),g.LFG($y,8),g.LFG(Dg,8),g.LFG(Hy,8),g.LFG(wg,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Mu=(()=>{class n{constructor(){OD.Z.registerVersion("angularfire",ir.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Cg]}),n})();var lE=k(4986),Tg=k(8189);function qy(...n){return function Gy(){return(0,Tg.J)(1)}()((0,xn.D)(n,(0,Ii.yG)(n)))}function ef(...n){const e=(0,Ii.yG)(n);return(0,Cr.e)((t,r)=>{(e?qy(n,t,e):qy(n,t)).subscribe(r)})}function zy(){return(0,Cr.e)((n,e)=>{let t,r=!1;n.subscribe((0,jn.x)(e,o=>{const l=t;t=o,r&&e.next([l,o]),r=!0}))})}function PD(n,e,t,r,o){return(l,d)=>{let m=t,w=e,C=0;l.subscribe((0,jn.x)(d,x=>{const N=C++;w=m?n(w,x,N):(m=!0,x),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function wa(n,e){return(0,Cr.e)(PD(n,e,arguments.length>=2,!0))}function Wy(n,e){return n===e}k(820);var et,nf=k(3942),dd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ia={},Ag=Ag||{},Ct=dd||self;function hd(){}function Sg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function xu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Mg="closure_uid_"+(1e9*Math.random()>>>0),TT=0;function cE(n,e,t){return n.call.apply(n.bind,arguments)}function dE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Jr(n,e,t){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cE:dE).apply(null,arguments)}function rf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Xr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Ru(){this.s=this.s,this.o=this.o}var FD={};Ru.prototype.s=!1,Ru.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function kD(n){return Object.prototype.hasOwnProperty.call(n,Mg)&&n[Mg]||(n[Mg]=++TT)}(this);delete FD[n]}},Ru.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},LD=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function Ky(n){return Array.prototype.concat.apply([],arguments)}function fE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function xg(n){return/^[\s\xa0]*$/.test(n)}var xi,Rg=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function fi(n,e){return-1!=n.indexOf(e)}function Zy(n,e){return n<e?-1:n>e?1:0}e:{var pE=Ct.navigator;if(pE){var Yy=pE.userAgent;if(Yy){xi=Yy;break e}}xi=""}function Qy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Jy(n){const e={};for(const t in n)e[t]=n[t];return e}var gE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mE(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<gE.length;l++)t=gE[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ng(n){return Ng[" "](n),n}Ng[" "]=hd;var Pg,n,VD=fi(xi,"Opera"),Ri=fi(xi,"Trident")||fi(xi,"MSIE"),Og=fi(xi,"Edge"),Xy=Og||Ri,_E=fi(xi,"Gecko")&&!(fi(xi.toLowerCase(),"webkit")&&!fi(xi,"Edge"))&&!(fi(xi,"Trident")||fi(xi,"MSIE"))&&!fi(xi,"Edge"),ST=fi(xi.toLowerCase(),"webkit")&&!fi(xi,"Edge");function e_(){var n=Ct.document;return n?n.documentMode:void 0}e:{var t_="",n_=(n=xi,_E?/rv:([^\);]+)(\)|;)/.exec(n):Og?/Edge\/([\d\.]+)/.exec(n):Ri?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ST?/WebKit\/(\S+)/.exec(n):VD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(n_&&(t_=n_?n_[1]:""),Ri){var sf=e_();if(null!=sf&&sf>parseFloat(t_)){Pg=String(sf);break e}}Pg=t_}var UD={};var jD=Ct.document&&Ri&&(e_()||parseInt(Pg,10))||void 0,r_=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",hd,e),Ct.removeEventListener("test",hd,e)}catch(t){}return n}();function Nr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function pd(n,e){if(Nr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(_E){e:{try{Ng(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:MT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&pd.Z.h.call(this)}}Nr.prototype.h=function(){this.defaultPrevented=!0},Xr(pd,Nr);var MT={2:"touch",3:"pen",4:"mouse"};pd.prototype.h=function(){pd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fg="closure_listenable_"+(1e6*Math.random()|0),i_=0;function xT(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++i_,this.ca=this.fa=!1}function Lg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function of(n){this.src=n,this.g={},this.h=0}function Vg(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=hE(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(Lg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ug(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}of.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=Ug(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new xT(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var Bg="closure_lm_"+(1e6*Math.random()|0),jg={};function Lo(n,e,t,r,o){if(r&&r.once)return vE(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Lo(n,e[l],t,r,o);return null}return t=lf(t),n&&n[Fg]?n.N(e,t,xu(r)?!!r.capture:!!r,o):af(n,e,t,!1,r,o)}function af(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var d=xu(o)?!!o.capture:!!o,m=Wl(n);if(m||(n[Bg]=m=new of(n)),(t=m.add(e,t,r,d,l)).proxy)return t;if(r=function $D(){var e=o_;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)r_||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(s_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vE(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)vE(n,e[l],t,r,o);return null}return t=lf(t),n&&n[Fg]?n.O(e,t,xu(r)?!!r.capture:!!r,o):af(n,e,t,!0,r,o)}function HD(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)HD(n,e[l],t,r,o);else r=xu(r)?!!r.capture:!!r,t=lf(t),n&&n[Fg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ug(l=n.g[e],t,r,o))&&(Lg(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Wl(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ug(e,t,r,o)),(t=-1<n?e[n]:null)&&uf(t))}function uf(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Fg])Vg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(s_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Wl(e))?(Vg(t,n),0==t.h&&(t.src=null,e[Bg]=null)):Lg(n)}}}function s_(n){return n in jg?jg[n]:jg[n]="on"+n}function o_(n,e){if(n.ca)n=!0;else{e=new pd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&uf(n),n=t.call(r,e)}return n}function Wl(n){return(n=n[Bg])instanceof of?n:null}var a_="__closure_events_fn_"+(1e9*Math.random()>>>0);function lf(n){return"function"==typeof n?n:(n[a_]||(n[a_]=function(e){return n.handleEvent(e)}),n[a_])}function Ar(){Ru.call(this),this.i=new of(this),this.P=this,this.I=null}function Or(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Nr(e,n);else if(e instanceof Nr)e.target=e.target||n;else{var o=e;mE(e=new Nr(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var d=e.g=t[l];o=cf(d,r,!0,e)&&o}if(o=cf(d=e.g=n,r,!0,e)&&o,o=cf(d,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=cf(d=e.g=t[l],r,!1,e)&&o}function cf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var d=e[l];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&Vg(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Xr(Ar,Ru),Ar.prototype[Fg]=!0,Ar.prototype.removeEventListener=function(n,e,t,r){HD(this,n,e,t,r)},Ar.prototype.M=function(){if(Ar.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Lg(t[r]);delete n.g[e],n.h--}}this.I=null},Ar.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ar.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var u_=Ct.JSON.stringify;function l_(){var n=IE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var c_,EE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new wE,n=>n.reset());class wE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function gd(n){Ct.setTimeout(()=>{throw n},0)}function $g(n,e){c_||function qD(){var n=Ct.Promise.resolve(void 0);c_=function(){n.then(zD)}}(),Nu||(c_(),Nu=!0),IE.add(n,e)}var Nu=!1,IE=new class GD{constructor(){this.h=this.g=null}add(e,t){const r=EE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function zD(){for(var n;n=l_();){try{n.h.call(n.g)}catch(t){gd(t)}var e=EE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Nu=!1}function Hg(n,e){Ar.call(this),this.h=n||1,this.g=e||Ct,this.j=Jr(this.kb,this),this.l=Date.now()}function d_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ks(n,e,t){if("function"==typeof n)t&&(n=Jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function Gg(n){n.g=ks(()=>{n.g=null,n.i&&(n.i=!1,Gg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Xr(Hg,Ar),(et=Hg.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Or(this,"tick"),this.da&&(d_(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){Hg.Z.M.call(this),d_(this),delete this.g};class DE extends Ru{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Gg(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function md(n){Ru.call(this),this.h=n,this.g={}}Xr(md,Ru);var h_=[];function f_(n,e,t,r){Array.isArray(t)||(t&&(h_[0]=t.toString()),t=h_);for(var o=0;o<t.length;o++){var l=Lo(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function bE(n){Qy(n.g,function(e,t){this.g.hasOwnProperty(t)&&uf(e)},n),n.g={}}function qg(){this.g=!0}function Kl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function CE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<o.length;d++)o[d]=""}}}return u_(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}md.prototype.M=function(){md.Z.M.call(this),bE(this)},md.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qg.prototype.Aa=function(){this.g=!1},qg.prototype.info=function(){};var Zl={},TE=null;function p_(){return TE=TE||new Ar}function ZD(n){Nr.call(this,Zl.Ma,n)}function Yl(n){const e=p_();Or(e,new ZD(e,n))}function AE(n,e){Nr.call(this,Zl.STAT_EVENT,n),this.stat=e}function pi(n){const e=p_();Or(e,new AE(e,n))}function g_(n,e){Nr.call(this,Zl.Na,n),this.size=e}function zg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}Zl.Ma="serverreachability",Xr(ZD,Nr),Zl.STAT_EVENT="statevent",Xr(AE,Nr),Zl.Na="timingevent",Xr(g_,Nr);var ji={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},YD={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function SE(){}function y_(){}SE.prototype.h=null;var Wg,yd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function __(){Nr.call(this,"d")}function ME(){Nr.call(this,"c")}function _d(){}function df(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new md(this),this.P=QD,this.W=new Hg(n=Xy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Kg}function Kg(){this.i=null,this.g="",this.h=!1}Xr(__,Nr),Xr(ME,Nr),Xr(_d,SE),_d.prototype.g=function(){return new XMLHttpRequest},_d.prototype.i=function(){return{}},Wg=new _d;var QD=45e3,v_={},Zg={};function E_(n,e,t){n.K=1,n.v=Aa($i(e)),n.s=t,n.U=!0,xE(n,null)}function xE(n,e){n.F=Date.now(),ff(n),n.A=$i(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),UE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Kg,n.g=QE(n.l,t?e:null,!n.s),0<n.O&&(n.L=new DE(Jr(n.Ia,n,n.g),n.O)),f_(n.V,n.g,"readystatechange",n.gb),e=n.H?Jy(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Yl(1),function WD(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var d="",m=l.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var x=C[0];C=C[1];var N=x.split("_");d=2<=N.length&&"type"==N[1]?d+(x+"=")+C+"&":d+(x+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function RE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function hf(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=vd(n,t),o==Zg){4==e&&(n.o=4,pi(14),r=!1),Kl(n.j,n.m,null,"[Incomplete Response]");break}if(o==v_){n.o=4,pi(15),Kl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Kl(n.j,n.m,o,null),Fs(n,o)}RE(n)&&o!=Zg&&o!=v_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Cf(e),e.L=!0,pi(11))):(Kl(n.j,n.m,t,"[Invalid Chunked Response]"),Da(n),pf(n))}function vd(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Zg:(t=Number(e.substring(t,r)),isNaN(t)?v_:(r+=1)+t>e.length?Zg:(e=e.substr(r,t),n.C=r+t,e))}function ff(n){n.Y=Date.now()+n.P,Ed(n,n.P)}function Ed(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zg(Jr(n.eb,n),e)}function Yg(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function pf(n){0==n.l.G||n.I||am(n.l,n)}function Da(n){Yg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,d_(n.W),bE(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Fs(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||b_(t.i,n)))if(t.I=n.N,!n.J&&b_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=zg(Jr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;om(t),wf(t)}bf(t),pi(18)}if(1>=tb(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else ku(t,11)}else if((n.J||t.g==n)&&om(t),!xg(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const x=C[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const H=C[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const ce=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ce){var l=r.i;!l.g&&(fi(ce,"spdy")||fi(ce,"quic")||fi(ce,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(mf(l,l.h),l.h=null))}if(r.D){const Le=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Le&&(r.sa=Le,vn(r.F,r.D,Le))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=M_(r,r.H?r.la:null,r.W),d.J){Jg(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(Yg(m),ff(m)),r.g=d}else YE(r);0<t.l.length&&im(t)}else"stop"!=C[0]&&"close"!=C[0]||ku(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?ku(t,7):Jl(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Yl(4)}catch(C){}}function Pr(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Sg(n)||"string"==typeof n)LD(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Sg(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function gf(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Sg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function Ls(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ls)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function wd(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];kr(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)kr(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function kr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=df.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==Vo(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const x=Vo(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>x)&&(3!=x||Xy||this.g&&(this.h.h||this.g.ga()||nm(this.g)))){this.I||4!=x||7==e||Yl(8==e||0>=N?3:2),Yg(this);var t=this.g.ba();this.N=t;t:if(RE(this)){var r=nm(this.g);n="";var o=r.length,l=4==Vo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Da(this),pf(this);var d="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function KD(n,e,t,r,o,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xg(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,pi(12),Da(this),pf(this);break e}Kl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fs(this,t)}this.U?(hf(this,x,d),Xy&&this.i&&3==x&&(f_(this.V,this.W,"tick",this.fb),this.W.start())):(Kl(this.j,this.m,d,null),Fs(this,d)),4==x&&Da(this),this.i&&!this.I&&(4==x?am(this.l,this):(this.i=!1,ff(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,pi(12)):(this.o=0,pi(13)),Da(this),pf(this)}}}catch(x){}},et.fb=function(){if(this.g){var n=Vo(this.g),e=this.g.ga();this.C<e.length&&(Yg(this),hf(this,n,e),this.i&&4!=n&&ff(this))}},et.cancel=function(){this.I=!0,Da(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function RT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Yl(3),pi(17)),Da(this),this.o=2,pf(this)):Ed(this,this.Y-n)},(et=Ls.prototype).R=function(){wd(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return wd(this),this.g.concat()},et.get=function(n,e){return kr(this.h,n)?this.h[n]:e},et.set=function(n,e){kr(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var Qg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vs(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Vs){this.g=void 0!==e?e:n.g,ba(this,n.j),this.s=n.s,Ca(this,n.i),Ta(this,n.m),this.l=n.l,e=n.h;var t=new Cd;t.i=e.i,e.g&&(t.g=new Ls(e.g),t.h=e.h),Ql(this,t),this.o=n.o}else n&&(t=String(n).match(Qg))?(this.g=!!e,ba(this,t[1]||"",!0),this.s=Dd(t[2]||""),Ca(this,t[3]||"",!0),Ta(this,t[4]),this.l=Dd(t[5]||"",!0),Ql(this,t[6]||"",!0),this.o=Dd(t[7]||"")):(this.g=!!e,this.h=new Cd(null,this.g))}function $i(n){return new Vs(n)}function ba(n,e,t){n.j=t?Dd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ca(n,e,t){n.i=t?Dd(e,!0):e}function Ta(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ql(n,e,t){e instanceof Cd?(n.h=e,function BE(n,e){e&&!n.j&&(Ou(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(VE(this,r),UE(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=bd(e,LE)),n.h=new Cd(e,n.g))}function vn(n,e,t){n.h.set(e,t)}function Aa(n){return vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Dd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,PE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function PE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Vs.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bd(e,w_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bd(e,w_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(bd(t,"/"==t.charAt(0)?FE:kE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bd(t,JD)),n.join("")};var w_=/[#\/\?@]/g,kE=/[#\?:]/g,FE=/[#\?]/g,LE=/[#\?@]/g,JD=/#/g;function Cd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ou(n){n.g||(n.g=new Ls,n.h=0,n.i&&function Id(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function VE(n,e){Ou(n),e=Td(n,e),kr(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,kr((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&wd(n)))}function I_(n,e){return Ou(n),e=Td(n,e),kr(n.g.h,e)}function UE(n,e,t){VE(n,e),0<t.length&&(n.i=null,n.g.set(Td(n,e),fE(t)),n.h+=t.length)}function Td(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function D_(n){this.l=n||eb,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ea&&Ct.g.Ea()&&Ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=Cd.prototype).add=function(n,e){Ou(this),this.i=null,n=Td(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Ou(this),this.g.forEach(function(t,r){LD(t,function(o){n.call(e,o,r,this)},this)},this)},et.T=function(){Ou(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},et.R=function(n){Ou(this);var e=[];if("string"==typeof n)I_(this,n)&&(e=Ky(e,this.g.get(Td(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Ky(e,n[t])}return e},et.set=function(n,e){return Ou(this),this.i=null,I_(this,n=Td(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=o;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var eb=10;function jE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function tb(n){return n.h?1:n.g?n.g.size:0}function b_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function mf(n,e){n.g?n.g.add(e):n.h=e}function Jg(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $E(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return fE(n.i)}function HE(){}function NT(){this.g=new HE}function OT(n,e,t){const r=t||"";try{Pr(n,function(o,l){let d=o;xu(o)&&(d=u_(o)),e.push(r+l+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function yf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function Xg(n){this.l=n.$b||null,this.j=n.ib||!1}function em(n,e){Ar.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Pu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}D_.prototype.cancel=function(){if(this.i=$E(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},HE.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},HE.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},Xr(Xg,SE),Xg.prototype.g=function(){return new em(this.l,this.j)},Xg.prototype.i=function(n){return function(){return n}}({}),Xr(em,Ar);var Pu=0;function GE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ad(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_f(n)}function _f(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=em.prototype).open=function(n,e){if(this.readyState!=Pu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_f(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ad(this)),this.readyState=Pu},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_f(this)),this.g&&(this.readyState=3,_f(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;GE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ad(this):_f(this),3==this.readyState&&GE(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,Ad(this))},et.Ta=function(n){this.g&&(this.response=n,Ad(this))},et.ha=function(){this.g&&Ad(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(em.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var qE=Ct.JSON.parse;function qn(n){Ar.call(this),this.headers=new Ls,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zE,this.K=this.L=!1}Xr(qn,Ar);var zE="",WE=/^https?$/i,rb=["POST","PUT"];function sb(n){return"content-type"==n.toLowerCase()}function KE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ZE(n),tm(n)}function ZE(n){n.D||(n.D=!0,Or(n,"complete"),Or(n,"error"))}function C_(n){if(n.h&&void 0!==Ag&&(!n.C[1]||4!=Vo(n)||2!=n.ba()))if(n.v&&4==Vo(n))ks(n.Fa,0,n);else if(Or(n,"readystatechange"),4==Vo(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Qg)[1]||null;if(!o&&Ct.self&&Ct.self.location){var l=Ct.self.location.protocol;o=l.substr(0,l.length-1)}r=!WE.test(o?o.toLowerCase():"")}t=r}if(t)Or(n,"complete"),Or(n,"success");else{n.m=6;try{var d=2<Vo(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",ZE(n)}}finally{tm(n)}}}function tm(n,e){if(n.g){T_(n);const t=n.g,r=n.C[0]?hd:null;n.g=null,n.C=null,e||Or(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function T_(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function Vo(n){return n.g?n.g.readyState:0}function nm(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function vf(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function PT(n){let e="";return Qy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):vn(n,e,t))}function Ef(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ob(n){this.za=0,this.l=[],this.h=new qg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ef("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ef("baseRetryDelayMs",5e3,n),this.$a=Ef("retryDelaySeedMs",1e4,n),this.Ya=Ef("forwardChannelMaxRetries",2,n),this.ra=Ef("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new D_(n&&n.concurrentRequestLimit),this.Ca=new NT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Jl(n){if(rm(n),3==n.G){var e=n.V++,t=$i(n.F);vn(t,"SID",n.J),vn(t,"RID",e),vn(t,"TYPE","terminate"),Xl(n,t),(e=new df(n,n.h,e,void 0)).K=2,e.v=Aa($i(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=QE(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ff(e)}um(n)}function wf(n){n.g&&(Cf(n),n.g.cancel(),n.g=null)}function rm(n){wf(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),om(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function If(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&im(n)}function im(n){jE(n.i)||n.m||(n.m=!0,$g(n.Ha,n),n.C=0)}function Df(n,e){var t;t=e?e.m:n.V++;const r=$i(n.F);vn(r,"SID",n.J),vn(r,"RID",t),vn(r,"AID",n.U),Xl(n,r),n.o&&n.s&&vf(r,n.o,n.s),t=new df(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ab(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),mf(n.i,t),E_(t,r,e)}function Xl(n,e){n.j&&Pr({},function(t,r){vn(e,r,t)})}function ab(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Jr(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const d=["count="+t];-1==l?0<t?(l=o[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const x=o[w].g;if(C-=l,0>C)l=Math.max(0,o[w].h-100),m=!1;else try{OT(x,d,"req"+C+"_")}catch(N){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function YE(n){n.g||n.u||(n.Y=1,$g(n.Ga,n),n.A=0)}function bf(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=zg(Jr(n.Ga,n),S_(n,n.A)),n.A++,0))}function Cf(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function A_(n){n.g=new df(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=$i(n.oa);vn(e,"RID","rpc"),vn(e,"SID",n.J),vn(e,"CI",n.N?"0":"1"),vn(e,"AID",n.U),Xl(n,e),vn(e,"TYPE","xmlhttp"),n.o&&n.s&&vf(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Aa($i(e)),t.s=null,t.U=!0,xE(t,n)}function om(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function am(n,e){var t=null;if(n.g==e){om(n),Cf(n),n.g=null;var r=2}else{if(!b_(n.i,e))return;t=e.D,Jg(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Or(r=p_(),new g_(r,t,e,o)),im(n)}else YE(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function sm(n,e){return!(tb(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=zg(Jr(n.Ha,n,e),S_(n,n.C)),n.C++,0)))}(n,e)||2==r&&bf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:ku(n,5);break;case 4:ku(n,10);break;case 3:ku(n,6);break;default:ku(n,2)}}function S_(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ku(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Jr(n.jb,n);t||(t=new Vs("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||ba(t,"https"),Aa(t)),function nb(n,e){const t=new qg;if(Ct.Image){const r=new Image;r.onload=rf(yf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=rf(yf,t,r,"TestLoadImage: error",!1,e),r.onabort=rf(yf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=rf(yf,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else pi(2);n.G=0,n.j&&n.j.va(e),um(n),rm(n)}function um(n){n.G=0,n.I=-1,n.j&&((0!=$E(n.i).length||0!=n.l.length)&&(n.i.i.length=0,fE(n.l),n.l.length=0),n.j.ua())}function M_(n,e,t){let r=function NE(n){return n instanceof Vs?$i(n):new Vs(n,void 0)}(t);if(""!=r.i)e&&Ca(r,e+"."+r.i),Ta(r,r.m);else{const o=Ct.location;r=function OE(n,e,t,r){var o=new Vs(null,void 0);return n&&ba(o,n),e&&Ca(o,e),t&&Ta(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Qy(n.aa,function(o,l){vn(r,l,o)}),t=n.sa,(e=n.D)&&t&&vn(r,e,t),vn(r,"VER",n.ma),Xl(n,r),r}function QE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qn(t&&n.Ba&&!n.qa?new Xg({ib:!0}):n.qa)).L=n.H,e}function x_(){}function Tf(){if(Ri&&!(10<=Number(jD)))throw Error("Environmental error: no available transport.")}function Ni(n,e){Ar.call(this),this.g=new ob(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!xg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Sd(this)}function R_(n){__.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function JE(){ME.call(this),this.status=1}function Sd(n){this.g=n}(et=qn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wg.g(),this.C=function m_(n){return n.h||(n.h=n.i())}(this.u?this.u:Wg),this.g.onreadystatechange=Jr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void KE(this,l)}n=t||"";const o=new Ls(this.headers);r&&Pr(r,function(l,d){o.set(d,l)}),r=function AT(n){e:{var e=sb;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Ct.FormData&&n instanceof Ct.FormData,!(0<=hE(rb,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{T_(this),0<this.B&&((this.K=function ib(n){return Ri&&function BD(){return function yE(n){var e=UD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Rg(String(Pg)).split("."),t=Rg("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",l=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=Zy(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||Zy(0==o[2].length,0==l[2].length)||Zy(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.pa,this)):this.A=ks(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){KE(this,l)}},et.pa=function(){void 0!==Ag&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Or(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Or(this,"complete"),Or(this,"abort"),tm(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tm(this,!0)),qn.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?C_(this):this.cb())},et.cb=function(){C_(this)},et.ba=function(){try{return 2<Vo(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),qE(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=ob.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new df(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Jy(l),mE(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ab(this,o,e),vn(t=$i(this.F),"RID",n),vn(t,"CVER",22),this.D&&vn(t,"X-HTTP-Session-Id",this.D),Xl(this,t),this.o&&l&&vf(t,this.o,l),mf(this.i,o),this.Ra&&vn(t,"TYPE","init"),this.ja?(vn(t,"$req",e),vn(t,"SID","null"),o.$=!0,E_(o,t,null)):E_(o,t,e),this.G=2}}else 3==this.G&&(n?Df(this,n):0==this.l.length||jE(this.i)||Df(this))},et.Ga=function(){if(this.u=null,A_(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=zg(Jr(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,pi(10),wf(this),A_(this))},et.ab=function(){null!=this.v&&(this.v=null,wf(this),bf(this),pi(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),pi(2)):(this.h.info("Failed to ping google.com"),pi(1))},(et=x_.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},Tf.prototype.g=function(n,e){return new Ni(n,e)},Xr(Ni,Ar),Ni.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),$g(Jr(n.hb,n,e))),pi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=M_(n,null,n.W),im(n)},Ni.prototype.close=function(){Jl(this.g)},Ni.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,If(this.g,e)}else this.v?((e={}).__data__=u_(n),If(this.g,e)):If(this.g,n)},Ni.prototype.M=function(){this.g.j=null,delete this.j,Jl(this.g),delete this.g,Ni.Z.M.call(this)},Xr(R_,__),Xr(JE,ME),Xr(Sd,x_),Sd.prototype.xa=function(){Or(this.g,"a")},Sd.prototype.wa=function(n){Or(this.g,new R_(n))},Sd.prototype.va=function(n){Or(this.g,new JE(n))},Sd.prototype.ua=function(){Or(this.g,"b")},Tf.prototype.createWebChannel=Tf.prototype.g,Ni.prototype.send=Ni.prototype.u,Ni.prototype.open=Ni.prototype.m,Ni.prototype.close=Ni.prototype.close,ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,YD.COMPLETE="complete",y_.EventType=yd,yd.OPEN="a",yd.CLOSE="b",yd.ERROR="c",yd.MESSAGE="d",Ar.prototype.listen=Ar.prototype.N,qn.prototype.listenOnce=qn.prototype.O,qn.prototype.getLastError=qn.prototype.La,qn.prototype.getLastErrorCode=qn.prototype.Da,qn.prototype.getStatus=qn.prototype.ba,qn.prototype.getResponseJson=qn.prototype.Qa,qn.prototype.getResponseText=qn.prototype.ga,qn.prototype.send=qn.prototype.ea;var ub=Ia.createWebChannelTransport=function(){return new Tf},XE=Ia.getStatEventTarget=function(){return p_()},Af=Ia.ErrorCode=ji,ew=Ia.EventType=YD,tw=Ia.Event=Zl,N_=Ia.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},nw=Ia.FetchXmlHttpFactory=Xg,Sf=Ia.WebChannel=y_,rw=Ia.XhrIo=qn;const O_="@firebase/firestore";class Fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fr.UNAUTHENTICATED=new Fr(null),Fr.GOOGLE_CREDENTIALS=new Fr("google-credentials-uid"),Fr.FIRST_PARTY=new Fr("first-party-uid"),Fr.MOCK_USER=new Fr("mock-user");let Mf="9.6.11";const Fu=new Qr.Yd("@firebase/firestore");function P_(){return Fu.logLevel}function Oe(n,...e){if(Fu.logLevel<=Qr.in.DEBUG){const t=e.map(k_);Fu.debug(`Firestore (${Mf}): ${n}`,...t)}}function Wt(n,...e){if(Fu.logLevel<=Qr.in.ERROR){const t=e.map(k_);Fu.error(`Firestore (${Mf}): ${n}`,...t)}}function Md(n,...e){if(Fu.logLevel<=Qr.in.WARN){const t=e.map(k_);Fu.warn(`Firestore (${Mf}): ${n}`,...t)}}function k_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${Mf}) INTERNAL ASSERTION FAILED: `+n;throw Wt(e),new Error(e)}function Dt(n,e){n||nt()}function qe(n,e){return n}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class sw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ow{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fr.UNAUTHENTICATED))}shutdown(){}}class cb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aw{constructor(e){this.t=e,this.currentUser=Fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Lr,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,q.Z)(function*(){yield C.promise,yield l(r.currentUser)}))},w=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new sw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Fr(e)}}class kT{constructor(e,t,r){this.type="FirstParty",this.user=Fr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class uw{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new kT(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uo{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.p;return this.p=l.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?o(l):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.p=t.token,new lm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ls{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Bo(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ls.A=-1;class Us{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Bo(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function mt(n,e){return n<e?-1:n>e?1:0}function ec(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function F_(n){return n+"\0"}class or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new or(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new or(0,0))}static max(){return new Et(new or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function lw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function tc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Sa{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Sa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sa?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),d=t.get(o);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends Sa{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const cw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vr extends Sa{construct(e,t,r){return new Vr(e,t,r)}static isValidIdentifier(e){return cw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Te(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Te(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Te(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(l(),o++)}if(l(),d)throw new Te(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vr(t)}static emptyPath(){return new Vr([])}}class nc{constructor(e){this.fields=e,e.sort(Vr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Xn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Xn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const db=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=db.exec(n);if(Dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(n.seconds),nanos:zn(n.nanos)}}function zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function xa(n){return"string"==typeof n?Xn.fromBase64String(n):Xn.fromUint8Array(n)}function xf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function L_(n){const e=n.mapValue.fields.__previous_value__;return xf(e)?L_(e):e}function xd(n){const e=Ma(n.mapValue.fields.__local_write_time__.timestampValue);return new or(e.seconds,e.nanos)}class hw{constructor(e,t,r,o,l,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class jo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jo&&e.projectId===this.projectId&&e.database===this.database}}function Lu(n){return null==n}function Rd(n){return 0===n&&1/n==-1/0}function V_(n){return"number"==typeof n&&Number.isInteger(n)&&!Rd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(nn.fromString(e))}static fromName(e){return new je(nn.fromString(e).popFirst(5))}static empty(){return new je(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new nn(e.slice()))}}const fw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pw={nullValue:"NULL_VALUE"};function rc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xf(n)?4:_w(n)?9:10:nt()}function $o(n,e){if(n===e)return!0;const t=rc(n);if(t!==rc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xd(n).isEqual(xd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Ma(r.timestampValue),d=Ma(o.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,xa(n.bytesValue).isEqual(xa(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return zn(r.geoPointValue.latitude)===zn(o.geoPointValue.latitude)&&zn(r.geoPointValue.longitude)===zn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return zn(r.integerValue)===zn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=zn(r.doubleValue),d=zn(o.doubleValue);return l===d?Rd(l)===Rd(d):isNaN(l)&&isNaN(d)}return!1}(n,e);case 9:return ec(n.arrayValue.values||[],e.arrayValue.values||[],$o);case 10:return function(r,o){const l=r.mapValue.fields||{},d=o.mapValue.fields||{};if(lw(l)!==lw(d))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===d[m]||!$o(l[m],d[m])))return!1;return!0}(n,e);default:return nt()}var o}function Rf(n,e){return void 0!==(n.values||[]).find(t=>$o(t,e))}function Vu(n,e){if(n===e)return 0;const t=rc(n),r=rc(e);if(t!==r)return mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,e.booleanValue);case 2:return function(o,l){const d=zn(o.integerValue||o.doubleValue),m=zn(l.integerValue||l.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return gw(n.timestampValue,e.timestampValue);case 4:return gw(xd(n),xd(e));case 5:return mt(n.stringValue,e.stringValue);case 6:return function(o,l){const d=xa(o),m=xa(l);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const d=o.split("/"),m=l.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=mt(d[w],m[w]);if(0!==C)return C}return mt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const d=mt(zn(o.latitude),zn(l.latitude));return 0!==d?d:mt(zn(o.longitude),zn(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const d=o.values||[],m=l.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=Vu(d[w],m[w]);if(C)return C}return mt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const d=o.fields||{},m=Object.keys(d),w=l.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let x=0;x<m.length&&x<C.length;++x){const N=mt(m[x],C[x]);if(0!==N)return N;const H=Vu(d[m[x]],w[C[x]]);if(0!==H)return H}return mt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw nt()}}function gw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return mt(n,e);const t=Ma(n),r=Ma(e),o=mt(t.seconds,r.seconds);return 0!==o?o:mt(t.nanos,r.nanos)}function Nd(n){return U_(n)}function U_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ma(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?xa(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const d of r.values||[])l?l=!1:o+=",",o+=U_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const m of o)d?d=!1:l+=",",l+=`${m}:${U_(r.fields[m])}`;return l+"}"}(n.mapValue):nt();var e}function ic(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function B_(n){return!!n&&"integerValue"in n}function Nf(n){return!!n&&"arrayValue"in n}function mw(n){return!!n&&"nullValue"in n}function yw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dm(n){return!!n&&"mapValue"in n}function Of(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return tc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Of(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Of(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _w(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function hb(n){return"nullValue"in n?pw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ic(jo.empty(),je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function vw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ic(jo.empty(),je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?fw:nt()}function j_(n,e){return void 0===n?e:void 0===e||Vu(n,e)>0?n:e}function $_(n,e){return void 0===n?e:void 0===e||Vu(n,e)<0?n:e}class ei{constructor(e){this.value=e}static empty(){return new ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Of(t)}setAll(e){let t=Vr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Of(d):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());dm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];dm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){tc(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new ei(Of(this.value))}}function H_(n){const e=[];return tc(n.fields,(t,r)=>{const o=new Vr([t]);if(dm(r)){const l=H_(r.mapValue).fields;if(0===l.length)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new nc(e)}class Sn{constructor(e,t,r,o,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Sn(e,0,Et.min(),Et.min(),ei.empty(),0)}static newFoundDocument(e,t,r){return new Sn(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new Sn(e,2,t,Et.min(),ei.empty(),0)}static newUnknownDocument(e,t){return new Sn(e,3,t,Et.min(),ei.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function hm(n){return n.fields.find(e=>2===e.kind)}function Uu(n){return n.fields.filter(e=>2!==e.kind)}Pf.UNKNOWN_ID=-1;class kf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Od{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Od(0,Ra.min())}}function Bu(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Et.fromTimestamp(1e9===r?new or(t+1,0):new or(t,r));return new Ra(o,je.empty(),e)}function fb(n){return new Ra(n.readTime,n.key,-1)}class Ra{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ra(Et.min(),je.empty(),-1)}static max(){return new Ra(Et.max(),je.empty(),-1)}}function Pd(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:mt(n.largestBatchId,e.largestBatchId))}class LT{constructor(e,t=null,r=[],o=[],l=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=d,this.endAt=m,this.P=null}}function fm(n,e=null,t=[],r=[],o=null,l=null,d=null){return new LT(n,e,t,r,o,l,d)}function kd(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Nd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Lu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nd(r)).join(",")),e.P=t}return e.P}function Fd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!bw(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!$o(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!z_(n.startAt,e.startAt)&&z_(n.endAt,e.endAt)}function G_(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function dt(n,e){return n.filters.filter(t=>t instanceof ti&&t.field.isEqual(e))}function ww(n,e,t){let r,o=!0;for(const l of dt(n,e)){let d,m=!0;switch(l.op){case"<":case"<=":d=hb(l.value);break;case"==":case"in":case">=":d=l.value;break;case">":d=l.value,m=!1;break;case"!=":case"not-in":d=pw}j_(r,d)===d&&(r=d,o=m)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const d=t.position[l];j_(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function Iw(n,e,t){let r,o=!0;for(const l of dt(n,e)){let d,m=!0;switch(l.op){case">=":case">":d=vw(l.value),m=!1;break;case"==":case"in":case"<=":d=l.value;break;case"<":d=l.value,m=!1;break;case"!=":case"not-in":d=fw}$_(r,d)===d&&(r=d,o=m)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const d=t.position[l];$_(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class ti extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new pm(e,t,r):"array-contains"===t?new er(e,r):"in"===t?new VT(e,r):"not-in"===t?new Dw(e,r):"array-contains-any"===t?new gb(e,r):new ti(e,t,r)}static V(e,t,r){return"in"===t?new pb(e,r):new gm(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Vu(t,this.value)):null!==t&&rc(this.value)===rc(t)&&this.v(Vu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class pm extends ti{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class pb extends ti{constructor(e,t){super(e,"in",t),this.keys=Ff(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gm extends ti{constructor(e,t){super(e,"not-in",t),this.keys=Ff(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ff(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class er extends ti{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nf(t)&&Rf(t.arrayValue,this.value)}}class VT extends ti{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rf(this.value.arrayValue,t)}}class Dw extends ti{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Rf(this.value.arrayValue,t)}}class gb extends ti{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rf(this.value.arrayValue,r))}}class ju{constructor(e,t){this.position=e,this.inclusive=t}}class sc{constructor(e,t="asc"){this.field=e,this.dir=t}}function bw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function q_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(r=l.field.isKeyField()?je.comparator(je.fromName(d.referenceValue),t.key):Vu(d,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function z_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$o(n.position[t],e.position[t]))return!1;return!0}class Na{constructor(e,t=null,r=[],o=[],l=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function Cw(n,e,t,r,o,l,d,m){return new Na(n,e,t,r,o,l,d,m)}function Ld(n){return new Na(n)}function $u(n){return!Lu(n.limit)&&"F"===n.limitType}function mm(n){return!Lu(n.limit)&&"L"===n.limitType}function W_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function K_(n){for(const e of n.filters)if(e.S())return e.field;return null}function Vd(n){return null!==n.collectionGroup}function oc(n){const e=qe(n);if(null===e.D){e.D=[];const t=K_(e),r=W_(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new sc(t)),e.D.push(new sc(Vr.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new sc(Vr.keyField(),l))}}}return e.D}function cs(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=fm(e.path,e.collectionGroup,oc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of oc(e))t.push(new sc(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new ju(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new ju(e.startAt.position,!e.startAt.inclusive):null;e.C=fm(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Z_(n,e,t){return new Na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lf(n,e){return Fd(cs(n),cs(e))&&n.limitType===e.limitType}function Ud(n){return`${kd(cs(n))}|lt:${n.limitType}`}function ac(n){return`Query(target=${function Ew(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Nd(r.value)}`;var r}).join(", ")}]`),Lu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Nd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Nd(t)).join(",")),`Target(${e})`}(cs(n))}; limitType=${n.limitType})`}function Y_(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,l,d){const m=q_(o,l,d);return o.inclusive?m<=0:m<0}(t.startAt,oc(t),r)||t.endAt&&!function(o,l,d){const m=q_(o,l,d);return o.inclusive?m>=0:m>0}(t.endAt,oc(t),r)));var t,r}function Tw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Aw(n){return(e,t)=>{let r=!1;for(const o of oc(n)){const l=Sw(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function Sw(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(o,l,d){const m=l.data.field(o),w=d.data.field(o);return null!==m&&null!==w?Vu(m,w):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function Q_(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function J_(n){return{integerValue:""+n}}function Mw(n,e){return V_(e)?J_(e):Q_(n,e)}class Vf{constructor(){this._=void 0}}function mb(n,e,t){return n instanceof Uf?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Bd?vb(n,e):n instanceof Hu?Bf(n,e):function(r,o){const l=_b(r,o),d=xw(l)+xw(r.k);return B_(l)&&B_(r.k)?J_(d):Q_(r.M,d)}(n,e)}function yb(n,e,t){return n instanceof Bd?vb(n,e):n instanceof Hu?Bf(n,e):t}function _b(n,e){return n instanceof jd?B_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Uf extends Vf{}class Bd extends Vf{constructor(e){super(),this.elements=e}}function vb(n,e){const t=X_(e);for(const r of n.elements)t.some(o=>$o(o,r))||t.push(r);return{arrayValue:{values:t}}}class Hu extends Vf{constructor(e){super(),this.elements=e}}function Bf(n,e){let t=X_(e);for(const r of n.elements)t=t.filter(o=>!$o(o,r));return{arrayValue:{values:t}}}class jd extends Vf{constructor(e,t){super(),this.M=e,this.k=t}}function xw(n){return zn(n.integerValue||n.doubleValue)}function X_(n){return Nf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Oa{constructor(e,t){this.field=e,this.transform=t}}class wb{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ym(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class _m{}function Rw(n,e,t){n instanceof $d?function(r,o,l){const d=r.value.clone(),m=Ow(r.fieldTransforms,o,l.transformResults);d.setAll(m),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):n instanceof lc?function(r,o,l){if(!ym(r.precondition,o))return void o.convertToUnknownDocument(l.version);const d=Ow(r.fieldTransforms,o,l.transformResults),m=o.data;m.setAll(tv(r)),m.setAll(d),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ev(n,e,t){var o;n instanceof $d?function(r,o,l){if(!ym(r.precondition,o))return;const d=r.value.clone(),m=nv(r.fieldTransforms,l,o);d.setAll(m),o.convertToFoundDocument(Nw(o),d).setHasLocalMutations()}(n,e,t):n instanceof lc?function(r,o,l){if(!ym(r.precondition,o))return;const d=nv(r.fieldTransforms,l,o),m=o.data;m.setAll(tv(r)),m.setAll(d),o.convertToFoundDocument(Nw(o),m).setHasLocalMutations()}(n,e,t):ym(n.precondition,o=e)&&o.convertToNoDocument(Et.min())}function Ib(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=_b(r.transform,o||null);null!=l&&(null==t&&(t=ei.empty()),t.set(r.field,l))}return t||null}function uc(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ec(t,r,(o,l)=>function Eb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Bd&&r instanceof Bd||t instanceof Hu&&r instanceof Hu?ec(t.elements,r.elements,$o):t instanceof jd&&r instanceof jd?$o(t.k,r.k):t instanceof Uf&&r instanceof Uf);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Nw(n){return n.isFoundDocument()?n.version:Et.min()}class $d extends _m{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class lc extends _m{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function tv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Ow(n,e,t){const r=new Map;Dt(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,m=e.data.field(l.field);r.set(l.field,yb(d,m,t[o]))}return r}function nv(n,e,t){const r=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);r.set(o.field,mb(l,d,e))}return r}class jf extends _m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class $f extends _m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Db{constructor(e){this.count=e}}var ar,en;function Pw(n){switch(n){default:return nt();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function kw(n){if(void 0===n)return Wt("GRPC error has no .code"),se.UNKNOWN;switch(n){case ar.OK:return se.OK;case ar.CANCELLED:return se.CANCELLED;case ar.UNKNOWN:return se.UNKNOWN;case ar.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case ar.INTERNAL:return se.INTERNAL;case ar.UNAVAILABLE:return se.UNAVAILABLE;case ar.UNAUTHENTICATED:return se.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case ar.NOT_FOUND:return se.NOT_FOUND;case ar.ALREADY_EXISTS:return se.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return se.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case ar.ABORTED:return se.ABORTED;case ar.OUT_OF_RANGE:return se.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return se.UNIMPLEMENTED;case ar.DATA_LOSS:return se.DATA_LOSS;default:return nt()}}(en=ar||(ar={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class Gu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){tc(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return cm(this.inner)}size(){return this.innerSize}}class Wn{constructor(e,t){this.comparator=e,this.root=t||Ur.EMPTY}insert(e,t){return new Wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ur.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vm(this.root,e,this.comparator,!1)}getReverseIterator(){return new vm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vm(this.root,e,this.comparator,!0)}}class vm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ur{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:Ur.RED,this.left=null!=o?o:Ur.EMPTY,this.right=null!=l?l:Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Ur(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Ur.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}Ur.EMPTY=null,Ur.RED=!0,Ur.BLACK=!1,Ur.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Ur(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fw(this.data.getIterator())}getIteratorFrom(e){return new Fw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class Fw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hd(n){return n.hasNext()?n.getNext():void 0}const bb=new Wn(je.comparator);function Bs(){return bb}const Cb=new Wn(je.comparator);function rv(){return Cb}function Hf(){return new Gu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Lw=new Wn(je.comparator),Vw=new Rn(je.comparator);function pn(...n){let e=Vw;for(const t of n)e=e.add(t);return e}const Tb=new Rn(mt);function Gf(){return Tb}class qf{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,zf.createSynthesizedTargetChangeForCurrentChange(e,t)),new qf(Et.min(),r,Gf(),Bs(),pn())}}class zf{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new zf(Xn.EMPTY_BYTE_STRING,t,pn(),pn(),pn())}}class Em{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class wm{constructor(e,t){this.targetId=e,this.$=t}}class Im{constructor(e,t,r=Xn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class iv{constructor(){this.B=0,this.L=Bw(),this.U=Xn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=pn(),t=pn(),r=pn();return this.L.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:nt()}}),new zf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Bw()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class sv{constructor(e){this.nt=e,this.st=new Map,this.it=Bs(),this.rt=Uw(),this.ot=new Rn(mt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const l=o.target;if(G_(l))if(0===r){const d=new je(l.path);this.ct(t,d,Sn.newNoDocument(d,Et.min()))}else Dt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,d)=>{const m=this.wt(d);if(m){if(l.current&&G_(m.target)){const w=new je(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,Sn.newNoDocument(w,e))}l.j&&(t.set(d,l.H()),l.J())}});let r=pn();this.rt.forEach((l,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(l))}),this.it.forEach((l,d)=>d.setReadTime(e));const o=new qf(e,t,this.ot,this.it,r);return this.it=Bs(),this.rt=Uw(),this.ot=new Rn(mt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new iv,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Rn(mt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new iv),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Uw(){return new Wn(je.comparator)}function Bw(){return new Wn(je.comparator)}const ov={asc:"ASCENDING",desc:"DESCENDING"},Ab={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class jw{constructor(e,t){this.databaseId=e,this.N=t}}function Wf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function av(n,e){return n.N?e.toBase64():e.toUint8Array()}function Sb(n,e){return Wf(n,e.toTimestamp())}function Sr(n){return Dt(!!n),Et.fromTimestamp(function(e){const t=Ma(e);return new or(t.seconds,t.nanos)}(n))}function $w(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Hw(n){const e=nn.fromString(n);return Dt(Ww(e)),e}function qu(n,e){return $w(n.databaseId,e.path)}function Ho(n,e){const t=Hw(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(Mb(t))}function zu(n,e){return $w(n.databaseId,e)}function Gd(n){const e=Hw(n);return 4===e.length?nn.emptyPath():Mb(e)}function Kf(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Mb(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function uv(n,e,t){return{name:qu(n,e),fields:t.value.mapValue.fields}}function Gw(n,e,t){const r=Ho(n,e.name),o=Sr(e.updateTime),l=new ei({mapValue:{fields:e.fields}}),d=Sn.newFoundDocument(r,o,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Zf(n,e){let t;if(e instanceof $d)t={update:uv(n,e.key,e.value)};else if(e instanceof jf)t={delete:qu(n,e.key)};else if(e instanceof lc)t={update:uv(n,e.key,e.data),updateMask:kb(e.fieldMask)};else{if(!(e instanceof $f))return nt();t={verify:qu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const d=l.transform;if(d instanceof Uf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Bd)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Hu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof jd)return{fieldPath:l.field.canonicalString(),increment:d.k};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Sb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nt()),t;var o}function Dm(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?mr.updateTime(Sr(o.updateTime)):void 0!==o.exists?mr.exists(o.exists):mr.none():mr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,d){let m=null;"setToServerValue"in d?(Dt("REQUEST_TIME"===d.setToServerValue),m=new Uf):"appendMissingElements"in d?m=new Bd(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Hu(d.removeAllFromArray.values||[]):"increment"in d?m=new jd(l,d.increment):nt();const w=Vr.fromServerFormat(d.fieldPath);return new Oa(w,m)}(n,o)):[];var o;if(e.update){const o=Ho(n,e.update.name),l=new ei({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new nc((e.updateMask.fieldPaths||[]).map(C=>Vr.fromServerFormat(C)));return new lc(o,l,d,t,r)}return new $d(o,l,t,r)}if(e.delete){const o=Ho(n,e.delete);return new jf(o,t)}if(e.verify){const o=Ho(n,e.verify);return new $f(o,t)}return nt()}function bm(n,e){return{documents:[zu(n,e.path)]}}function Yf(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=zu(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=zu(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(x=>function(N){if("=="===N.op){if(yw(N.value))return{unaryFilter:{field:zd(N.field),op:"IS_NAN"}};if(mw(N.value))return{unaryFilter:{field:zd(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(yw(N.value))return{unaryFilter:{field:zd(N.field),op:"IS_NOT_NAN"}};if(mw(N.value))return{unaryFilter:{field:zd(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zd(N.field),op:Ob(N.op),value:N.value}}}(x));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(w){if(0!==w.length)return w.map(C=>{return{field:zd((x=C).field),direction:zw(x.dir)};var x})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=(C=e.limit,n.N||Lu(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function qd(n){let e=Gd(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Dt(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=lv(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new sc(Wu((N=x).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(x){let N;return N="object"==typeof x?x.value:x,Lu(N)?null:N}(t.limit));let w=null;var x;t.startAt&&(w=new ju((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new ju(x.values||[],!x.before)}(t.endAt)),Cw(e,o,d,l,m,"F",w,C)}function lv(n){return n?void 0!==n.unaryFilter?[UT(n)]:void 0!==n.fieldFilter?[Pb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>lv(e)).reduce((e,t)=>e.concat(t)):nt():[]}function zw(n){return ov[n]}function Ob(n){return Ab[n]}function zd(n){return{fieldPath:n.canonicalString()}}function Wu(n){return Vr.fromServerFormat(n.fieldPath)}function Pb(n){return ti.create(Wu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function UT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Wu(n.unaryFilter.field);return ti.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Wu(n.unaryFilter.field);return ti.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Wu(n.unaryFilter.field);return ti.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wu(n.unaryFilter.field);return ti.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function kb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ww(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function yr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cc(e)),e=Kw(n.get(t),e);return cc(e)}function Kw(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function cc(n){return n+"\x01\x01"}function Pa(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const d=n.indexOf("\x01",l);switch((d<0||d>t)&&nt(),n.charAt(d+1)){case"\x01":const m=n.substring(l,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(l,d),o+="\0";break;case"\x11":o+=n.substring(l,d+1);break;default:nt()}l=d+2}return new nn(r)}const cv=["userId","batchId"];function Cm(n,e){return[n,yr(e)]}function Fb(n,e,t){return[n,yr(e),t]}const Zw={},BT=["prefixPath","collectionGroup","readTime","documentId"],Yw=["prefixPath","collectionGroup","documentId"],dv=["collectionGroup","readTime","prefixPath","documentId"],Lb=["canonicalId","targetId"],Vb=["targetId","path"],Ub=["path","targetId"],Bb=["collectionId","parent"],jb=["indexId","uid"],$b=["uid","sequenceNumber"],Hb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Gb=["indexId","uid","orderedDocumentKey"],qb=["userId","collectionPath","documentId"],zb=["userId","collectionPath","largestBatchId"],Qf=["userId","collectionGroup","largestBatchId"],hv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Qw=[...hv,"documentOverlays"],fv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jw=[...fv,"indexConfiguration","indexState","indexEntries"],pv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Xw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let o=0,l=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++l,d&&l===o&&t()},w=>r(w))}),d=!0,l===o&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(o=>o?fe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class Tm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Lr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Jf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=js(r.target.error);this.At.reject(new Jf(e,o))}}static open(e,t,r,o){try{return new Tm(t,e.transaction(o,r))}catch(l){throw new Jf(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Xf(t)}}class lo{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===lo.Vt((0,xt.z$)())&&Wt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),hc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,xt.hl)())return!1;if(lo.St())return!0;const e=(0,xt.z$)(),t=lo.Vt(e),r=0<t&&t<10,o=lo.Dt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,q.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{o(new Jf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Te(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Te(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Jf(e,m))},l.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,l.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,q.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.Nt(e);const w=Tm.open(l.db,e,d?"readonly":"readwrite",r),C=o(w).next(x=>(w.Pt(),x)).catch(x=>(w.abort(x),fe.reject(x))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),l.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Wb{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return hc(this.Ft.delete())}}class Jf extends Te{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dc(n){return"IndexedDbTransactionError"===n.name}class Xf{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hc(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),hc(this.store.add(e))}get(e){return hc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),hc(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),hc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),l=[];return this.Kt(o,(d,m)=>{l.push(m)}).next(()=>l)}{const o=this.store.getAll(r.range);return new fe((l,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{l(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((o,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(l,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new fe((r,o)=>{t.onerror=l=>{const d=js(l.target.error);o(d)},t.onsuccess=l=>{const d=l.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new fe((o,l)=>{e.onerror=d=>{l(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new Wb(m),C=t(m.primaryKey,m.value,w);if(C instanceof fe){const x=C.catch(N=>(w.done(),fe.reject(N)));r.push(x)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hc(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=js(r.target.error);t(o)}})}let Am=!1;function js(n){const e=lo.Vt((0,xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Am||(Am=!0,setTimeout(()=>{throw r},0)),r}}return n}class eI extends Xw{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function _r(n,e){const t=qe(n);return lo.xt(t.Ht,e)}class fc{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Rw(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ev(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ev(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pn())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,(t,r)=>uc(t,r))&&ec(this.baseMutations,e.baseMutations,(t,r)=>uc(t,r))}}class gv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Dt(e.mutations.length===r.length);let o=Lw;const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,r[d].version);return new gv(e,t,r,o)}}class mv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ku{constructor(e,t,r,o,l=Et.min(),d=Et.min(),m=Xn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Ku(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ep{constructor(e){this.Jt=e}}function tI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Mm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:qu(o=n.Jt,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Wf(o,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Zu(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:Zu(e.version)}}var o,l;return r}function Mm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Zu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yu(n){const e=new or(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Qu(n,e){const t=(e.baseMutations||[]).map(l=>Dm(n.Jt,l));for(let l=0;l<e.mutations.length-1;++l){const d=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(d.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Dm(n.Jt,l)),o=or.fromMillis(e.localWriteTimeMs);return new fc(e.batchId,o,t,r)}function Wd(n){const e=Yu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Yu(n.lastLimboFreeSnapshotVersion):Et.min();let r;var o;return void 0!==n.query.documents?(Dt(1===(o=n.query).documents.length),r=cs(Ld(Gd(o.documents[0])))):r=cs(qd(n.query)),new Ku(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Xn.fromBase64String(n.resumeToken))}function nI(n,e){const t=Zu(e.snapshotVersion),r=Zu(e.lastLimboFreeSnapshotVersion);let o;o=G_(e.target)?bm(n.Jt,e.target):Yf(n.Jt,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:kd(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function yv(n){const e=qd({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Z_(e,e.limit,"L"):e}function rI(n,e){return new mv(e.largestBatchId,Dm(n.Jt,e.overlayMutation))}function xm(n,e){const t=e.path.lastSegment();return[n,yr(e.path.popLast()),t]}class _v{getBundleMetadata(e,t){return vv(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Yu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return vv(e).put({bundleId:(r=t).id,createTime:Zu(Sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Rm(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:yv(o.bundledQuery),readTime:Yu(o.readTime)};var o})}saveNamedQuery(e,t){return Rm(e).put({name:(r=t).name,readTime:Zu(Sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function vv(n){return _r(n,"bundles")}function Rm(n){return _r(n,"namedQueries")}class tp{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new tp(e,t.uid||"")}getOverlay(e,t){return np(e).get(xm(this.userId,t)).next(r=>r?rI(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((l,d)=>{const m=new mv(t,d);o.push(this.Xt(e,m))}),fe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(yr(d.getCollectionPath())));const l=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(np(e).Qt("collectionPathOverlayIndex",m))}),fe.waitFor(l)}getOverlaysForCollection(e,t,r){const o=Hf(),l=yr(t),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return np(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=rI(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const l=Hf();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return np(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,x)=>{const N=rI(this.M,C);l.size()<o||N.largestBatchId===d?(l.set(N.getKey(),N),d=N.largestBatchId):x.done()}).next(()=>l)}Xt(e,t){return np(e).put(function(r,o,l){const[d,m,w]=xm(o,l.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Zf(r.Jt,l.mutation)}}(this.M,this.userId,t))}}function np(n){return _r(n,"documentOverlays")}class pc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(zn(e.integerValue));else if("doubleValue"in e){const r=zn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Rd(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(xa(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?_w(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):nt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Kb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function iI(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const l=Kb(255&t[o]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}pc.fe=new pc;class sI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=iI(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=iI(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Ev{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class oI{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class rp{constructor(){this.De=new sI,this.Ce=new Ev(this.De),this.xe=new oI(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ka{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ka(this.indexId,this.documentKey,this.arrayValue,r)}}function Ju(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=aI(n.arrayValue,e.arrayValue),0!==t?t:(t=aI(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function aI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class uI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=hm(e);if(void 0!==t&&!this.Be(t))return!1;const r=Uu(e);let o=0,l=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[l++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(l>=this.Me.length||!this.Ue(this.Me[l++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class lI{constructor(){this.qe=new wv}addToCollectionParentIndex(e,t){return this.qe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getFieldIndex(e,t){return fe.resolve(null)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class wv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Rn(nn.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Rn(nn.comparator)).toArray()}}const gc=new Uint8Array(0);class Zb{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new wv,this.Ge=new Gu(r=>kd(r),(r,o)=>Fd(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const l={collectionId:r,parent:yr(o)};return gi(e).put(l)}return fe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[F_(t),""],!1,!0);return gi(e).qt(o).next(l=>{for(const d of l){if(d.collectionId!==t)break;r.push(Pa(d.parent))}return r})}addFieldIndex(e,t){const r=Nm(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Nm(e),o=Om(e),l=Go(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Go(e);let o=!0;const l=new Map;return fe.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(m=>{o&&(o=!!m),l.set(d,m)})).next(()=>{if(o){let d=pn();const m=[];return fe.forEach(l,(w,C)=>{var x;Oe("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(tn=>`${tn.fieldPath}:${tn.kind}`).join(",")}`} to execute ${kd(t)}`);const N=function(tn,Ft){const Xt=hm(Ft);if(void 0===Xt)return null;for(const En of dt(tn,Xt.fieldPath))switch(En.op){case"array-contains-any":return En.value.arrayValue.values||[];case"array-contains":return[En.value]}return null}(C,w),H=function(tn,Ft){const Xt=new Map;for(const En of Uu(Ft))for(const zi of dt(tn,En.fieldPath))switch(zi.op){case"==":case"in":Xt.set(En.fieldPath.canonicalString(),zi.value);break;case"not-in":case"!=":return Xt.set(En.fieldPath.canonicalString(),zi.value),Array.from(Xt.values())}return null}(C,w),J=function(tn,Ft){const Xt=[];let En=!0;for(const zi of Uu(Ft)){const Fp=0===zi.kind?ww(tn,zi.fieldPath,tn.startAt):Iw(tn,zi.fieldPath,tn.startAt);if(!Fp.value)return null;Xt.push(Fp.value),En&&(En=Fp.inclusive)}return new ju(Xt,En)}(C,w),ce=function(tn,Ft){const Xt=[];let En=!0;for(const zi of Uu(Ft)){const Fp=0===zi.kind?Iw(tn,zi.fieldPath,tn.endAt):ww(tn,zi.fieldPath,tn.endAt);if(!Fp.value)return null;Xt.push(Fp.value),En&&(En=Fp.inclusive)}return new ju(Xt,En)}(C,w),Le=this.je(w,C,J),st=this.je(w,C,ce),Qt=this.We(w,C,H),Jt=this.ze(w.indexId,N,Le,!!J&&J.inclusive,st,!!ce&&ce.inclusive,Qt);return fe.forEach(Jt,tn=>r.Gt(tn,t.limit).next(Ft=>{Ft.forEach(Xt=>{const En=je.fromSegments(Xt.documentKey);d.has(En)||(d=d.add(En),m.push(En))})}))}).next(()=>m)}return fe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,l,d,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),C=w/(null!=t?t.length:1),x=[];for(let N=0;N<w;++N){const H=t?this.He(t[N/C]):gc,J=r?this.Je(e,H,r[N%C],o):this.Ye(e),ce=l?this.Xe(e,H,l[N%C],d):this.Ye(e+1);x.push(...this.createRange(J,ce,m.map(Le=>this.Je(e,H,Le,!0))))}return x}Je(e,t,r,o){const l=new ka(e,je.empty(),t,r);return o?l:l.ke()}Xe(e,t,r,o){const l=new ka(e,je.empty(),t,r);return o?l.ke():l}Ye(e){return new ka(e,je.empty(),gc,gc)}getFieldIndex(e,t){const r=new uI(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(l=>{const d=l.filter(m=>r.$e(m));return d.sort((m,w)=>w.fields.length-m.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new rp;for(const o of Uu(e)){const l=t.data.field(o.fieldPath);if(null==l)return null;const d=r.Ne(o.kind);pc.fe.Zt(l,d)}return r.Se()}He(e){const t=new rp;return pc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new rp;return pc.fe.Zt(ic(this.databaseId,t),r.Ne(function(o){const l=Uu(o);return 0===l.length?0:l[l.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new rp);let l=0;for(const d of Uu(e)){const m=r[l++];for(const w of o)if(this.en(t,d.fieldPath)&&Nf(m))o=this.nn(o,d,m);else{const C=w.Ne(d.kind);pc.fe.Zt(m,C)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],l=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new rp;w.seed(m.Se()),pc.fe.Zt(d,w.Ne(t.kind)),l.push(w)}return l}en(e,t){return!!e.filters.find(r=>r instanceof ti&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Nm(e),o=Om(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(l=>{const d=[];return fe.forEach(l,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,x){const N=x?new Od(x.sequenceNumber,new Ra(Yu(x.readTime),new je(Pa(x.documentKey)),x.largestBatchId)):Od.empty(),H=C.fields.map(([J,ce])=>new kf(Vr.fromServerFormat(J),ce));return new Pf(C.indexId,C.collectionGroup,H,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==l?l:mt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Nm(e),l=Om(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>fe.forEach(m,w=>{return l.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Zu((H=r).readTime),documentKey:yr(H.documentKey.path),largestBatchId:H.largestBatchId});var H})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(o,l)=>{const d=r.get(o.collectionGroup);return(d?fe.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),fe.forEach(m,w=>this.on(e,o,w).next(C=>{const x=this.un(l,w);return C.isEqual(x)?fe.resolve():this.an(e,l,w,C,x)}))))})}cn(e,t,r,o){return Go(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Go(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Go(e);let l=new Rn(Ju);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{l=l.add(new ka(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>l)}un(e,t){let r=new Rn(Ju);const o=this.Ze(t,e);if(null==o)return r;const l=hm(t);if(null!=l){const d=e.data.field(l.fieldPath);if(Nf(d))for(const m of d.arrayValue.values||[])r=r.add(new ka(t.indexId,e.key,this.He(m),o))}else r=r.add(new ka(t.indexId,e.key,gc,o));return r}an(e,t,r,o,l){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,x,N){const H=m.getIterator(),J=w.getIterator();let ce=Hd(H),Le=Hd(J);for(;ce||Le;){let st=!1,Qt=!1;if(ce&&Le){const Jt=C(ce,Le);Jt<0?Qt=!0:Jt>0&&(st=!0)}else null!=ce?Qt=!0:st=!0;st?(x(Le),Le=Hd(J)):Qt?(N(ce),ce=Hd(H)):(ce=Hd(H),Le=Hd(J))}}(o,l,Ju,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),fe.waitFor(d)}rn(e){let t=1;return Om(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,l)=>{l.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Ju(d,m)).filter((d,m,w)=>!m||0!==Ju(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=Ju(d,e),w=Ju(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const l=[];for(let d=0;d<o.length;d+=2)l.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,gc,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,gc,[]]));return l}}function gi(n){return _r(n,"collectionParents")}function Go(n){return _r(n,"indexEntries")}function Nm(n){return _r(n,"indexConfiguration")}function Om(n){return _r(n,"indexState")}const Yb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Br{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Br(e,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cI(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),l=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(x,N,H)=>(m++,H.delete()));l.push(w.next(()=>{Dt(1===m)}));const C=[];for(const x of t.mutations){const N=Fb(e,x.key.path,t.batchId);l.push(o.delete(N)),C.push(x.key)}return fe.waitFor(l).next(()=>C)}function Kd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Br.DEFAULT_COLLECTION_PERCENTILE=10,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Br.DEFAULT=new Br(41943040,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Br.DISABLED=new Br(-1,0,0);class Iv{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){Dt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Iv(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xu(e).Wt({index:"userMutationsIndex",range:r},(o,l,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=Zd(e),d=Xu(e);return d.add({}).next(m=>{Dt("number"==typeof m);const w=new fc(m,t,r,o),C=function(H,J,ce){const Le=ce.baseMutations.map(Qt=>Zf(H.Jt,Qt)),st=ce.mutations.map(Qt=>Zf(H.Jt,Qt));return{userId:J,batchId:ce.batchId,localWriteTimeMs:ce.localWriteTime.toMillis(),baseMutations:Le,mutations:st}}(this.M,this.userId,w),x=[];let N=new Rn((H,J)=>mt(H.canonicalString(),J.canonicalString()));for(const H of o){const J=Fb(this.userId,H.key.path,m);N=N.add(H.key.path.popLast()),x.push(d.put(C)),x.push(l.put(J,Zw))}return N.forEach(H=>{x.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),fe.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return Xu(e).get(t).next(r=>r?(Dt(r.userId===this.userId),Qu(this.M,r)):null)}fn(e,t){return this.ln[t]?fe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Xu(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(Dt(m.batchId>=r),l=Qu(this.M,m)),w.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xu(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Qu(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Cm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return Zd(e).Wt({range:o},(d,m,w)=>{const[C,x,N]=d,H=Pa(x);if(C===this.userId&&t.path.isEqual(H))return Xu(e).get(N).next(J=>{if(!J)throw nt();Dt(J.userId===this.userId),l.push(Qu(this.M,J))});w.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(mt);const o=[];return t.forEach(l=>{const d=Cm(this.userId,l.path),m=IDBKeyRange.lowerBound(d),w=Zd(e).Wt({range:m},(C,x,N)=>{const[H,J,ce]=C,Le=Pa(J);H===this.userId&&l.path.isEqual(Le)?r=r.add(ce):N.done()});o.push(w)}),fe.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=Cm(this.userId,r),d=IDBKeyRange.lowerBound(l);let m=new Rn(mt);return Zd(e).Wt({range:d},(w,C,x)=>{const[N,H,J]=w,ce=Pa(H);N===this.userId&&r.isPrefixOf(ce)?ce.length===o&&(m=m.add(J)):x.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(l=>{o.push(Xu(e).get(l).next(d=>{if(null===d)throw nt();Dt(d.userId===this.userId),r.push(Qu(this.M,d))}))}),fe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return cI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),fe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Zd(e).Wt({range:r},(l,d,m)=>{if(l[0]===this.userId){const w=Pa(l[1]);o.push(w)}else m.done()}).next(()=>{Dt(0===o.length)})})}containsKey(e,t){return Dv(e,this.userId,t)}wn(e){return Pm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Dv(n,e,t){const r=Cm(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return Zd(n).Wt({range:l,jt:!0},(m,w,C)=>{const[x,N,H]=m;x===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function Xu(n){return _r(n,"mutations")}function Zd(n){return _r(n,"documentMutations")}function Pm(n){return _r(n,"mutationQueues")}class el{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new el(0)}static yn(){return new el(-1)}}class dI{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new el(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Et.fromTimestamp(new or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fa(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return Fa(e).Wt((d,m)=>{const w=Wd(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,l.push(this.removeTargetData(e,w)))}).next(()=>fe.waitFor(l)).next(()=>o)}forEachTarget(e,t){return Fa(e).Wt((r,o)=>{const l=Wd(o);t(l)})}pn(e){return km(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}In(e,t){return km(e).put("targetGlobalKey",t)}Tn(e,t){return Fa(e).put(nI(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=kd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Fa(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Wd(m);Fd(t,C.target)&&(l=C,w.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=mc(e);return t.forEach(d=>{const m=yr(d.path);o.push(l.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),fe.waitFor(o)}removeMatchingKeys(e,t,r){const o=mc(e);return fe.forEach(t,l=>{const d=yr(l.path);return fe.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=mc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=mc(e);let l=pn();return o.Wt({range:r,jt:!0},(d,m,w)=>{const C=Pa(d[1]),x=new je(C);l=l.add(x)}).next(()=>l)}containsKey(e,t){const r=yr(t.path),o=IDBKeyRange.bound([r],[F_(r)],!1,!0);let l=0;return mc(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,C)=>{0!==d&&(l++,C.done())}).next(()=>l>0)}Et(e,t){return Fa(e).get(t).next(r=>r?Wd(r):null)}}function Fa(n){return _r(n,"targets")}function km(n){return _r(n,"targetGlobal")}function mc(n){return _r(n,"targetDocuments")}function tl(n){return bv.apply(this,arguments)}function bv(){return bv=(0,q.Z)(function*(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==pv)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),bv.apply(this,arguments)}function Cv([n,e],[t,r]){const o=mt(n,t);return 0===o?mt(e,r):o}class Fm{constructor(e){this.An=e,this.buffer=new Rn(Cv),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Cv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hI{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,q.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){dc(o)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield tl(o)}yield t.Sn(e)}))}}class Qb{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(ls.A);const r=new Fm(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Yb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yb):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,l,d,m,w,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(l=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),P_()<=Qr.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${l} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-x}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:N})))}}class Tv{constructor(e,t){this.db=e,this.garbageCollector=new Qb(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return Yd(e,r)}removeReference(e,t,r){return Yd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Yd(e,t)}On(e,t){return function(r,o){let l=!1;return Pm(r).zt(d=>Dv(r,d,o).next(m=>(m&&(l=!0),fe.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(C=>{if(!C)return l++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Et.min()),mc(e).delete([0,yr(d.path)])))});o.push(w)}}).next(()=>fe.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Yd(e,t)}Mn(e,t){const r=mc(e);let o,l=ls.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(l!==ls.A&&t(new je(Pa(o)),l),l=C,o=w):l=ls.A}).next(()=>{l!==ls.A&&t(new je(Pa(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yd(n,e){return mc(n).put((r=n.currentSequenceNumber,{targetId:0,path:yr(e.path),sequenceNumber:r}));var r}class Jb{constructor(){this.changes=new Gu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xb{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return nl(e).put(r)}removeEntry(e,t,r){return nl(e).delete(function(o,l){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Mm(l),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Sn.newInvalidDocument(t);return nl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ip(t))},(o,l)=>{r=this.$n(t,l)}).next(()=>r)}Bn(e,t){let r={size:0,document:Sn.newInvalidDocument(t)};return nl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ip(t))},(o,l)=>{r={document:this.$n(t,l),size:Kd(l)}}).next(()=>r)}getEntries(e,t){let r=Bs();return this.Ln(e,t,(o,l)=>{const d=this.$n(o,l);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=Bs(),o=new Wn(je.comparator);return this.Ln(e,t,(l,d)=>{const m=this.$n(l,d);r=r.insert(l,m),o=o.insert(l,Kd(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return fe.resolve();let o=new Rn(Mv);t.forEach(w=>o=o.add(w));const l=IDBKeyRange.bound(ip(o.first()),ip(o.last())),d=o.getIterator();let m=d.getNext();return nl(e).Wt({index:"documentKeyIndex",range:l},(w,C,x)=>{const N=je.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Mv(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?x.Ut(ip(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Mm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nl(e).qt(IDBKeyRange.bound(o,l,!0)).next(d=>{let m=Bs();for(const w of d){const C=this.$n(je.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let l=Bs();const d=Sv(t,r),m=Sv(t,Ra.max());return nl(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,x)=>{const N=this.$n(je.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);l=l.insert(N.key,N),l.size===o&&x.done()}).next(()=>l)}newChangeBuffer(e){return new eC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Av(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}Fn(e,t){return Av(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function Sm(n,e){let t;if(e.document)t=Gw(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),o=Yu(e.noDocument.readTime);t=Sn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=je.fromSegments(e.unknownDocument.path),o=Yu(e.unknownDocument.version);t=Sn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new or(r[0],r[1]);return Et.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return Sn.newInvalidDocument(e)}}class eC extends Jb{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Gu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Rn((l,d)=>mt(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const m=this.Gn.get(l);if(t.push(this.Kn.removeEntry(e,l,m.readTime)),d.isValidDocument()){const w=tI(this.Kn.M,d);o=o.add(l.path.popLast()),r+=Kd(w)-m.size,t.push(this.Kn.addEntry(e,l,w))}else if(r-=m.size,this.trackRemovals){const w=tI(this.Kn.M,d.convertToNoDocument(Et.min()));t.push(this.Kn.addEntry(e,l,w))}}),o.forEach(l=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Kn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((l,d)=>{this.Gn.set(l,{size:d,readTime:r.get(l).readTime})}),r))}}function Av(n){return _r(n,"remoteDocumentGlobal")}function nl(n){return _r(n,"remoteDocumentsV14")}function ip(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Sv(n,e){const t=e.documentKey.path.toArray();return[n,Mm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Mv(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(o=mt(t[l],r[l]),o)return o;return o=mt(t.length,r.length),o||(o=mt(t[t.length-2],r[r.length-2]),o||mt(t[t.length-1],r[r.length-1]))}class tC{constructor(e){this.M=e}kt(e,t,r,o){const l=new Tm("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cv,{unique:!0}),m.createObjectStore("documentMutations"),fI(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=fe.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),fI(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(l))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cv,{unique:!0});const x=w.store("mutations"),N=C.map(H=>x.put(H));return fe.waitFor(N)})}(e,l))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(l))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(l)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(l))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,l))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(l))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:qb});w.createIndex("collectionPathOverlayIndex",zb,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",Qf,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:BT});w.createIndex("documentKeyIndex",Yw),w.createIndex("collectionGroupIndex",dv)}(e)).next(()=>this.Jn(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:jb}).createIndex("sequenceNumberIndex",$b,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Hb}).createIndex("documentKeyIndex",Gb,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Kd(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>fe.forEach(o,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>fe.forEach(m,w=>{Dt(w.userId===l.userId);const C=Qu(this.M,w);return cI(e,l.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const l=[];return r.Wt((d,m)=>{const w=new nn(d),C=[0,yr(w)];l.push(t.get(C).next(x=>x?fe.resolve():t.put({targetId:0,path:yr(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>fe.waitFor(l))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Bb});const r=t.store("collectionParents"),o=new wv,l=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:yr(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new nn(d);return l(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],C)=>{const x=Pa(m);return l(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const l=Wd(o),d=nI(this.M,l);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((l,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new je(nn.fromString(C.document.name).popFirst(5)):C.noDocument?je.fromSegments(C.noDocument.path):C.unknownDocument?je.fromSegments(C.unknownDocument.path):nt()).path.toArray();var C;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(x))}).next(()=>fe.waitFor(o))}}function fI(n){n.createObjectStore("targetDocuments",{keyPath:Vb}).createIndex("documentTargetsIndex",Ub,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Lb,{unique:!0}),n.createObjectStore("targetGlobal")}const Lm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class xv{constructor(e,t,r,o,l,d,m,w,C,x,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=l,this.window=d,this.document=m,this.Xn=C,this.Zn=x,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=H=>Promise.resolve(),!xv.vt())throw new Te(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tv(this,o),this.hs=t+"main",this.M=new ep(w),this.ls=new lo(this.hs,this.ts,new tC(this.M)),this.fs=new dI(this.referenceDelegate,this.M),this.ds=new Xb(this.M),this._s=new _v,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&Wt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(se.FAILED_PRECONDITION,Lm);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ls(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,q.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,q.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,q.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(dc(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Qd(e).get("owner").next(t=>fe.resolve(this.bs(t)))}Vs(e){return sp(e).delete(this.clientId)}vs(){var e=this;return(0,q.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=_r(r,"clientMetadata");return o.qt().next(l=>{const d=e.Ds(l,18e5),m=l.filter(w=>-1===d.indexOf(w));return fe.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?fe.resolve(!0):Qd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Te(se.FAILED_PRECONDITION,Lm);return!1}}return!(!this.networkEnabled||!this.inForeground)||sp(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,q.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new eI(t,ls.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>sp(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Iv.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Zb(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return tp.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",l=14===(d=this.ts)?Jw:13===d?fv:12===d?Qw:11===d?hv:void nt();var d;let m;return this.ls.runTransaction(e,o,l,w=>(m=new eI(w,this.es?this.es.next():ls.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw Wt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Te(se.FAILED_PRECONDITION,pv);return r(m)}).next(C=>this.Ps(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return Qd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(se.FAILED_PRECONDITION,Lm)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qd(e).put("owner",t)}static vt(){return lo.vt()}Rs(e){const t=Qd(e);return t.get("owner").next(r=>this.bs(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Wt(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Wt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Wt("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qd(n){return _r(n,"owner")}function sp(n){return _r(n,"clientMetadata")}function Vm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class pI{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):Vd(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new je(t)).next(r=>{let o=rv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let l=rv();return this.indexManager.getCollectionParents(e,o).next(d=>fe.forEach(d,m=>{const w=(C=t,x=m.child(o),new Na(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.zs(e,w,r).next(C=>{C.forEach((x,N)=>{l=l.insert(x,N)})})}).next(()=>l))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(l=>(o=l,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const d of l)for(const m of d.mutations){const w=m.key;let C=o.get(w);null==C&&(C=Sn.newInvalidDocument(w),o=o.insert(w,C)),ev(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((l,d)=>{Y_(t,d)||(o=o.remove(l))}),o))}}class Rv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=pn(),o=pn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Rv(e,t.fromCache,r,o)}}class gI{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(Et.min())?this.ti(e,t):this.Zs.Ks(e,o).next(l=>{const d=this.ei(t,l);return($u(t)||mm(t))&&this.ni(t.limitType,d,o,r)?this.ti(e,t):(P_()<=Qr.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ac(t)),this.Zs.Qs(e,t,Bu(r,-1)).next(m=>(d.forEach(w=>{m=m.insert(w.key,w)}),m)))});var l}ei(e,t){let r=new Rn(Aw(e));return t.forEach((o,l)=>{Y_(e,l)&&(r=r.add(l))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ti(e,t){return P_()<=Qr.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",ac(t)),this.Zs.Qs(e,t,Ra.min())}}class jT{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new Wn(mt),this.ri=new Gu(l=>kd(l),Fd),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new pI(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function Nv(n,e,t,r){return new jT(n,e,t,r)}function nC(n,e){return mI.apply(this,arguments)}function mI(){return mI=(0,q.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(l=>(o=l,t.ai(e),t.Bs.getAllMutationBatches(r))).next(l=>{const d=[],m=[];let w=pn();for(const C of o){d.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}for(const C of l){m.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}return t.ci.Ks(r,w).next(C=>({hi:C,removedBatchIds:d,addedBatchIds:m}))})})}),mI.apply(this,arguments)}function $T(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.ui.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const x=w.batch,N=x.keys();let H=fe.resolve();return N.forEach(J=>{H=H.next(()=>C.getEntry(m,J)).next(ce=>{const Le=w.docVersions.get(J);Dt(null!==Le),ce.version.compareTo(Le)<0&&(x.applyToRemoteDocument(ce,w),ce.isValidDocument()&&(ce.setReadTime(w.commitVersion),C.addEntry(ce)))})}),H.next(()=>d.Bs.removeMutationBatch(m,x))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function rC(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function HT(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const m=[];e.targetChanges.forEach((C,x)=>{const N=o.get(x);if(!N)return;m.push(t.fs.removeMatchingKeys(l,C.removedDocuments,x).next(()=>t.fs.addMatchingKeys(l,C.addedDocuments,x)));let H=N.withSequenceNumber(l.currentSequenceNumber);var J,ce,Le;e.targetMismatches.has(x)?H=H.withResumeToken(Xn.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):C.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(C.resumeToken,r)),o=o.insert(x,H),ce=H,Le=C,(0===(J=N).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(l,H))});let w=Bs();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,C))}),m.push(iC(l,d,e.documentUpdates).next(C=>{w=C})),!r.isEqual(Et.min())){const C=t.fs.getLastRemoteSnapshotVersion(l).next(x=>t.fs.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(C)}return fe.waitFor(m).next(()=>d.apply(l)).next(()=>t.ci.Gs(l,w)).next(()=>w)}).then(l=>(t.ii=o,l))}function iC(n,e,t){let r=pn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Bs();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(Et.min())?(e.removeEntry(d,m.readTime),l=l.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),l=l.insert(d,m)):Oe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),l})}function GT(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function op(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(l=>l?(o=l,fe.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Ku(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function La(n,e,t){return yI.apply(this,arguments)}function yI(){return yI=(0,q.Z)(function*(n,e,t){const r=qe(n),o=r.ii.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!dc(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)}),yI.apply(this,arguments)}function ap(n,e,t){const r=qe(n);let o=Et.min(),l=pn();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const x=qe(m),N=x.ri.get(C);return void 0!==N?fe.resolve(x.ii.get(N)):x.fs.getTargetData(w,C)}(r,d,cs(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{l=w})}).next(()=>r.si.Qs(d,e,t?o:Et.min(),t?l:pn())).next(m=>(Pv(r,Tw(e),m),{documents:m,li:l})))}function Um(n,e){const t=qe(n),r=qe(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,e).next(d=>d?d.target:null))}function Ov(n,e){const t=qe(n),r=t.oi.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,Bu(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Pv(t,e,o),o))}function Pv(n,e,t){let r=Et.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.oi.set(e,r)}function up(){return up=(0,q.Z)(function*(n,e,t,r){const o=qe(n);let l=pn(),d=Bs();for(const C of t){const x=e.fi(C.metadata.name);C.document&&(l=l.add(x));const N=e.di(C);N.setReadTime(e._i(C.metadata.readTime)),d=d.insert(x,N)}const m=o.ui.newChangeBuffer({trackRemovals:!0}),w=yield op(o,(C=r,cs(Ld(nn.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>iC(C,m,d).next(x=>(m.apply(C),x)).next(x=>o.fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.fs.addMatchingKeys(C,l,w.targetId)).next(()=>o.ci.Gs(C,x)).next(()=>x)))}),up.apply(this,arguments)}function _I(n,e){return kv.apply(this,arguments)}function kv(){return kv=(0,q.Z)(function*(n,e,t=pn()){const r=yield op(n,cs(yv(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const d=Sr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(l,e);const m=r.withResumeToken(Xn.EMPTY_BYTE_STRING,d);return o.ii=o.ii.insert(m.targetId,m),o.fs.updateTargetData(l,m).next(()=>o.fs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.fs.addMatchingKeys(l,t,r.targetId)).next(()=>o._s.saveNamedQuery(l,e))})}),kv.apply(this,arguments)}class vI{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return fe.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Sr(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:yv(r.bundledQuery),readTime:Sr(r.readTime)}),fe.resolve();var r}}class zT{constructor(){this.overlays=new Wn(je.comparator),this.gi=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.Xt(e,t,l)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.gi.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const o=Hf(),l=t.length+1,d=new je(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===l&&w.largestBatchId>r&&o.set(w.getKey(),w)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new Wn((C,x)=>C-x);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=l.get(C.largestBatchId);null===x&&(x=Hf(),l=l.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const m=Hf(),w=l.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,x)=>m.set(C,x)),!(m.size()>=o)););return fe.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new mv(t,r));let l=this.gi.get(t);void 0===l&&(l=pn(),this.gi.set(t,l)),this.gi.set(t,l.add(r.key))}}class Fv{constructor(){this.yi=new Rn(jr.pi),this.Ii=new Rn(jr.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new jr(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new jr(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new je(new nn([])),r=new jr(t,e),o=new jr(t,e+1),l=[];return this.Ii.forEachInRange([r,o],d=>{this.Ai(d),l.push(d.key)}),l}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new je(new nn([])),r=new jr(t,e),o=new jr(t,e+1);let l=pn();return this.Ii.forEachInRange([r,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new jr(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class jr{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return je.comparator(e.key,t.key)||mt(e.vi,t.vi)}static Ti(e,t){return mt(e.vi,t.vi)||je.comparator(e.key,t.key)}}class Lv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Rn(jr.pi)}checkEmpty(e){return fe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const l=this.Si;this.Si++;const d=new fc(l,t,r,o);this.Bs.push(d);for(const m of o)this.Di=this.Di.add(new jr(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return fe.resolve(d)}lookupMutationBatch(e,t){return fe.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),l=o<0?0:o;return fe.resolve(this.Bs.length>l?this.Bs[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return fe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jr(t,0),o=new jr(t,Number.POSITIVE_INFINITY),l=[];return this.Di.forEachInRange([r,o],d=>{const m=this.Ci(d.vi);l.push(m)}),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(mt);return t.forEach(o=>{const l=new jr(o,0),d=new jr(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([l,d],m=>{r=r.add(m.vi)})}),fe.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;je.isDocumentKey(l)||(l=l.child(""));const d=new jr(new je(l),0);let m=new Rn(mt);return this.Di.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.vi)),!0)},d),fe.resolve(this.Ni(m))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Dt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return fe.forEach(t.mutations,o=>{const l=new jr(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new jr(t,0),o=this.Di.firstAfterOrEqual(r);return fe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return fe.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class sC{constructor(e){this.Mi=e,this.docs=new Wn(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,d=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():Sn.newInvalidDocument(t))}getEntries(e,t){let r=Bs();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Sn.newInvalidDocument(o))}),fe.resolve(r)}getAllFromCollection(e,t,r){let o=Bs();const l=new je(t.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Pd(fb(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){nt()}Oi(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new WT(this)}getSize(e){return fe.resolve(this.size)}}class WT extends Jb{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class KT{constructor(e){this.persistence=e,this.Fi=new Gu(t=>kd(t),Fd),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Fv,this.targetCount=0,this.Li=el.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),fe.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new el(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Tn(t),fe.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Fi.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fi.delete(d),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),fe.waitFor(l).next(()=>o)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.Bi.containsKey(t))}}class ZT{constructor(e,t){this.Ui={},this.overlays={},this.es=new ls(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new KT(this),this.indexManager=new lI,this.ds=new sC(r=>this.referenceDelegate.qi(r)),this.M=new ep(t),this._s=new vI(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new Lv(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new oC(this.es.next());return this.referenceDelegate.Ki(),r(o).next(l=>this.referenceDelegate.Gi(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Qi(e,t){return fe.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class oC extends Xw{constructor(e){super(),this.currentSequenceNumber=e}}class Vv{constructor(e){this.persistence=e,this.ji=new Fv,this.Wi=null}static zi(e){return new Vv(e)}get Hi(){if(this.Wi)return this.Wi;throw nt()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.Hi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Hi,r=>{const o=je.fromPath(r);return this.Ji(e,o).next(l=>{l||t.removeEntry(o,Et.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return fe.or([()=>fe.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function EI(n,e){return`firestore_clients_${n}_${e}`}function aC(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Uv(n,e){return`firestore_targets_${n}_${e}`}class Jd{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let l,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(l=new Te(o.error.code,o.error.message))),d?new Jd(e,t,o.state,l):(Wt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Te(r.error.code,r.error.message))),l?new lp(e,r.state,o):(Wt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hi{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=Gf();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=V_(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return o?new Hi(e,l):(Wt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Bv{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Bv(t.clientId,t.onlineState):(Wt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class cp{constructor(){this.activeTargetIds=Gf()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jv{constructor(e,t,r,o,l){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Wn(mt),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ur=EI(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new cp),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,q.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const l=e.getItem(EI(e.persistenceKey,o));if(l){const d=Hi.Yi(o,l);d&&(e.ir=e.ir.insert(d.clientId,d))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Uv(this.persistenceKey,e));if(r){const o=lp.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Uv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Wt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,q.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(l){let d=ls.A;if(null!=l)try{const m=JSON.parse(l);Dt("number"==typeof m),d=m}catch(m){Wt("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==ls.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(l=>t.syncEngine.kr(l)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new Jd(this.currentUser,e,t,r),l=aC(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Xi())}Ir(e){const t=aC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=Uv(this.persistenceKey,e),l=new lp(e,t,r);this.setItem(o,l.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return Hi.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return Jd.Yi(new Fr(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return lp.Yi(o,t)}mr(e){return Bv.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,q.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),l=this.yr(r),d=[],m=[];return l.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{l.has(w)||m.push(w)}),this.syncEngine.Fr(d,m).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Gf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class wI{constructor(){this.$r=new cp,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new cp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $v{Lr(e){}shutdown(){}}class Hv{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const II={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class uC{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class DI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,l){const d=this.uo(e,t);Oe("RestConnection","Sending: ",d,r);const m={};return this.ao(m,o,l),this.co(e,d,m,r).then(w=>(Oe("RestConnection","Received: ",w),w),w=>{throw Md("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}ho(e,t,r,o,l){return this.oo(e,t,r,o,l)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}uo(e,t){return`${this.io}/v1/${t}:${II[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((l,d)=>{const m=new rw;m.listenOnce(ew.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Af.NO_ERROR:const C=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(C)),l(C);break;case Af.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),d(new Te(se.DEADLINE_EXCEEDED,"Request time out"));break;case Af.HTTP_ERROR:const x=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const H=function(J){const ce=J.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(ce)>=0?ce:se.UNKNOWN}(N.status);d(new Te(H,N.message))}else d(new Te(se.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Te(se.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ub(),d=XE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new nw({})),this.ao(m.initMessageHeaders,t,r),(0,xt.uI)()||(0,xt.b$)()||(0,xt.d)()||(0,xt.w1)()||(0,xt.Mn)()||(0,xt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Oe("Connection","Creating WebChannel: "+w,m);const C=l.createWebChannel(w,m);let x=!1,N=!1;const H=new uC({Wr:ce=>{N?Oe("Connection","Not sending because WebChannel is closed:",ce):(x||(Oe("Connection","Opening WebChannel transport."),C.open(),x=!0),Oe("Connection","WebChannel sending:",ce),C.send(ce))},zr:()=>C.close()}),J=(ce,Le,st)=>{ce.listen(Le,Qt=>{try{st(Qt)}catch(Jt){setTimeout(()=>{throw Jt},0)}})};return J(C,Sf.EventType.OPEN,()=>{N||Oe("Connection","WebChannel transport opened.")}),J(C,Sf.EventType.CLOSE,()=>{N||(N=!0,Oe("Connection","WebChannel transport closed"),H.no())}),J(C,Sf.EventType.ERROR,ce=>{N||(N=!0,Md("Connection","WebChannel transport errored:",ce),H.no(new Te(se.UNAVAILABLE,"The operation could not be completed")))}),J(C,Sf.EventType.MESSAGE,ce=>{var Le;if(!N){const st=ce.data[0];Dt(!!st);const Qt=st,Jt=Qt.error||(null===(Le=Qt[0])||void 0===Le?void 0:Le.error);if(Jt){Oe("Connection","WebChannel received error:",Jt);const tn=Jt.status;let Ft=function(En){const zi=ar[En];if(void 0!==zi)return kw(zi)}(tn),Xt=Jt.message;void 0===Ft&&(Ft=se.INTERNAL,Xt="Unknown error status: "+tn+" with message "+Jt.message),N=!0,H.no(new Te(Ft,Xt)),C.close()}else Oe("Connection","WebChannel received:",st),H.so(st)}}),J(d,tw.STAT_EVENT,ce=>{ce.stat===N_.PROXY?Oe("Connection","Detected buffering proxy"):ce.stat===N_.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.eo()},0),H}}function bI(){return"undefined"!=typeof window?window:null}function Bm(){return"undefined"!=typeof document?document:null}function dp(n){return new jw(n,!0)}class hp{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=l,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class rl{constructor(e,t,r,o,l,d,m,w){this.Yn=e,this.Ro=r,this.Po=o,this.bo=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new hp(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,q.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,q.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,q.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(Wt(t.toString()),Wt("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===se.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new Te(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,q.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CI extends rl{constructor(e,t,r,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=l}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function Rb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:nt(),o=e.targetChange.targetIds||[],l=function(w,C){return w.N?(Dt(void 0===C||"string"==typeof C),Xn.fromBase64String(C||"")):(Dt(void 0===C||C instanceof Uint8Array),Xn.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?se.UNKNOWN:kw(w.code);return new Te(C,w.message||"")}(d);t=new Im(r,o,l,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ho(n,r.document.name),l=Sr(r.document.updateTime),d=new ei({mapValue:{fields:r.document.fields}}),m=Sn.newFoundDocument(o,l,d);t=new Em(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Ho(n,r.document),l=r.readTime?Sr(r.readTime):Et.min(),d=Sn.newNoDocument(o,l);t=new Em([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Ho(n,r.document);t=new Em([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return nt();{const r=e.filter,l=new Db(r.count||0);t=new wm(r.targetId,l)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Et.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Et.min():l.readTime?Sr(l.readTime):Et.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Kf(this.M),t.addTarget=function(o,l){let d;const m=l.target;return d=G_(m)?{documents:bm(o,m)}:{query:Yf(o,m)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=av(o,l.resumeToken):l.snapshotVersion.compareTo(Et.min())>0&&(d.readTime=Wf(o,l.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function Nb(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Kf(this.M),t.removeTarget=e,this.Fo(t)}}class TI extends rl{constructor(e,t,r,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=l,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function qw(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,o){let l=Sr(r.updateTime?r.updateTime:o);return l.isEqual(Et.min())&&(l=Sr(o)),new wb(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.Yo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Kf(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Zf(this.M,r))};this.Fo(t)}}class lC extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new Te(se.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.oo(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(se.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.ho(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(se.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class YT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Wt(t),this.iu=!1):Oe("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class cC{constructor(e,t,r,o,l){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=l,this._u.Lr(m=>{r.enqueueAndForget((0,q.Z)(function*(){var w;Va(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,q.Z)(function*(C){const x=qe(C);x.fu.add(4),yield yc(x),x.wu.set("Unknown"),x.fu.delete(4),yield fp(x)}),function(C){return w.apply(this,arguments)})(d))}))}),this.wu=new YT(r,o)}}function fp(n){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,q.Z)(function*(n){if(Va(n))for(const e of n.du)yield e(!0)}),Gv.apply(this,arguments)}function yc(n){return qv.apply(this,arguments)}function qv(){return qv=(0,q.Z)(function*(n){for(const e of n.du)yield e(!1)}),qv.apply(this,arguments)}function jm(n,e){const t=qe(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),Kv(t)?Wv(t):Xd(t).xo()&&pp(t,e))}function $m(n,e){const t=qe(n),r=Xd(t);t.lu.delete(e),r.xo()&&zv(t,e),0===t.lu.size&&(r.xo()?r.Mo():Va(t)&&t.wu.set("Unknown"))}function pp(n,e){n.mu.Z(e.targetId),Xd(n).jo(e)}function zv(n,e){n.mu.Z(e),Xd(n).Wo(e)}function Wv(n){n.mu=new sv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Xd(n).start(),n.wu.ru()}function Kv(n){return Va(n)&&!Xd(n).Co()&&n.lu.size>0}function Va(n){return 0===qe(n).fu.size}function Hm(n){n.mu=void 0}function Zv(n){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,q.Z)(function*(n){n.lu.forEach((e,t)=>{pp(n,e)})}),Gm.apply(this,arguments)}function dC(n,e){return qm.apply(this,arguments)}function qm(){return qm=(0,q.Z)(function*(n,e){Hm(n),Kv(n)?(n.wu.au(e),Wv(n)):n.wu.set("Unknown")}),qm.apply(this,arguments)}function AI(n,e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,q.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof Im&&2===e.state&&e.cause)try{yield(r=(0,q.Z)(function*(o,l){const d=l.cause;for(const m of l.targetIds)o.lu.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.lu.delete(m),o.mu.removeTarget(m))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Qv(n,r)}else if(e instanceof Em?n.mu.ut(e):e instanceof wm?n.mu._t(e):n.mu.ht(e),!t.isEqual(Et.min()))try{const r=yield rC(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const d=o.mu.yt(l);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.lu.get(w);C&&o.lu.set(w,C.withResumeToken(m.resumeToken,l))}}),d.targetMismatches.forEach(m=>{const w=o.lu.get(m);if(!w)return;o.lu.set(m,w.withResumeToken(Xn.EMPTY_BYTE_STRING,w.snapshotVersion)),zv(o,m);const C=new Ku(w.target,m,1,w.sequenceNumber);pp(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield Qv(n,r)}var r}),Yv.apply(this,arguments)}function Qv(n,e,t){return SI.apply(this,arguments)}function SI(){return SI=(0,q.Z)(function*(n,e,t){if(!dc(e))throw e;n.fu.add(1),yield yc(n),n.wu.set("Offline"),t||(t=()=>rC(n.localStore)),n.asyncQueue.enqueueRetryable((0,q.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield fp(n)}))}),SI.apply(this,arguments)}function hC(n,e){return e().catch(t=>Qv(n,t,e))}function _c(n){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,q.Z)(function*(n){const e=qe(n),t=qo(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;fC(e);)try{const o=yield GT(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,pC(e,o)}catch(o){yield Qv(e,o)}gC(e)&&mC(e)}),Jv.apply(this,arguments)}function fC(n){return Va(n)&&n.hu.length<10}function pC(n,e){n.hu.push(e);const t=qo(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function gC(n){return Va(n)&&!qo(n).Co()&&n.hu.length>0}function mC(n){qo(n).start()}function QT(n){return MI.apply(this,arguments)}function MI(){return MI=(0,q.Z)(function*(n){qo(n).Zo()}),MI.apply(this,arguments)}function JT(n){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,q.Z)(function*(n){const e=qo(n);for(const t of n.hu)e.Jo(t.mutations)}),Xv.apply(this,arguments)}function zm(n,e,t){return e0.apply(this,arguments)}function e0(){return e0=(0,q.Z)(function*(n,e,t){const r=n.hu.shift(),o=gv.from(r,e,t);yield hC(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield _c(n)}),e0.apply(this,arguments)}function yC(n,e){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,q.Z)(function*(n,e){var t;e&&qo(n).Ho&&(yield(t=(0,q.Z)(function*(r,o){if(Pw(l=o.code)&&l!==se.ABORTED){const d=r.hu.shift();qo(r).ko(),yield hC(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield _c(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),gC(n)&&mC(n)}),Wm.apply(this,arguments)}function il(n,e){return Km.apply(this,arguments)}function Km(){return Km=(0,q.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Va(t);t.fu.add(3),yield yc(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield fp(t)}),Km.apply(this,arguments)}function gp(n,e){return mp.apply(this,arguments)}function mp(){return mp=(0,q.Z)(function*(n,e){const t=qe(n);e?(t.fu.delete(2),yield fp(t)):e||(t.fu.add(2),yield yc(t),t.wu.set("Unknown"))}),mp.apply(this,arguments)}function Xd(n){return n.gu||(n.gu=function(e,t,r){const o=qe(e);return o.eu(),new CI(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:Zv.bind(null,n),Yr:dC.bind(null,n),Qo:AI.bind(null,n)}),n.du.push(function(){var e=(0,q.Z)(function*(t){t?(n.gu.ko(),Kv(n)?Wv(n):n.wu.set("Unknown")):(yield n.gu.stop(),Hm(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function qo(n){return n.yu||(n.yu=function(e,t,r){const o=qe(e);return o.eu(),new TI(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:QT.bind(null,n),Yr:yC.bind(null,n),Xo:JT.bind(null,n),Yo:zm.bind(null,n)}),n.du.push(function(){var e=(0,q.Z)(function*(t){t?(n.yu.ko(),yield _c(n)):(yield n.yu.stop(),n.hu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class yp{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,l){const d=Date.now()+r,m=new yp(e,t,d,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ua(n,e){if(Wt("AsyncQueue",`${e}: ${n}`),dc(n))return new Te(se.UNAVAILABLE,`${e}: ${n}`);throw n}class _p{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=rv(),this.sortedSet=new Wn(this.comparator)}static emptySet(e){return new _p(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _p)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new _p;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _C{constructor(){this.pu=new Wn(je.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):nt():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class vp{constructor(e,t,r,o,l,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new vp(e,t,_p.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class XT{constructor(){this.Tu=void 0,this.listeners=[]}}class xI{constructor(){this.queries=new Gu(e=>Ud(e),Lf),this.onlineState="Unknown",this.Eu=new Set}}function t0(n,e){return n0.apply(this,arguments)}function n0(){return n0=(0,q.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new XT),o)try{l.Tu=yield t.onListen(r)}catch(d){const m=Ua(d,`Initialization of query '${ac(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.Au(t.onlineState),l.Tu&&e.Ru(l.Tu)&&Zm(t)}),n0.apply(this,arguments)}function r0(n,e){return s0.apply(this,arguments)}function s0(){return s0=(0,q.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const d=l.listeners.indexOf(e);d>=0&&(l.listeners.splice(d,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),s0.apply(this,arguments)}function RI(n,e){const t=qe(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Ru(o)&&(r=!0);d.Tu=o}}r&&Zm(t)}function NI(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function Zm(n){n.Eu.forEach(e=>{e.next()})}class o0{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new vp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=vp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class vC{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class a0{constructor(e){this.M=e}fi(e){return Ho(this.M,e)}di(e){return e.metadata.exists?Gw(this.M,e.document,!1):Sn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Sr(e)}}class u0{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=EC(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=nn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new a0(this.M);for(const o of e)if(o.metadata.queries){const l=r.fi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||pn()).add(l);t.set(d,m)}}return t}complete(){var e=this;return(0,q.Z)(function*(){const t=yield function qT(n,e,t,r){return up.apply(this,arguments)}(e.localStore,new a0(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield _I(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function EC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class l0{constructor(e){this.key=e}}class Ym{constructor(e){this.key=e}}class OI{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=pn(),this.mutatedKeys=pn(),this.Uu=Aw(e),this.qu=new _p(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new _C,o=t?t.qu:this.qu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w=$u(this.query)&&o.size===this.query.limit?o.last():null,C=mm(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,N)=>{const H=o.get(x),J=Y_(this.query,N)?N:null,ce=!!H&&this.mutatedKeys.has(H.key),Le=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let st=!1;H&&J?H.data.isEqual(J.data)?ce!==Le&&(r.track({type:3,doc:J}),st=!0):this.ju(H,J)||(r.track({type:2,doc:J}),st=!0,(w&&this.Uu(J,w)>0||C&&this.Uu(J,C)<0)&&(m=!0)):!H&&J?(r.track({type:0,doc:J}),st=!0):H&&!J&&(r.track({type:1,doc:H}),st=!0,(w||C)&&(m=!0)),st&&(J?(d=d.add(J),l=Le?l.add(x):l.delete(x)):(d=d.delete(x),l=l.delete(x)))}),$u(this.query)||mm(this.query))for(;d.size>this.query.limit;){const x=$u(this.query)?d.last():d.first();d=d.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{qu:d,Qu:r,ni:m,mutatedKeys:l}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const l=e.Qu.Iu();l.sort((C,x)=>function(N,H){const J=ce=>{switch(ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return J(N)-J(H)}(C.type,x.type)||this.Uu(C.doc,x.doc)),this.Wu(r);const d=t?this.zu():[],m=0===this.Lu.size&&this.current?1:0,w=m!==this.Bu;return this.Bu=m,0!==l.length||w?{snapshot:new vp(this.query,e.qu,o,l,e.mutatedKeys,0===m,w,!1),Hu:d}:{Hu:d}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new _C,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=pn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new Ym(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new l0(r))}),t}Yu(e){this.$u=e.li,this.Lu=pn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return vp.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class wC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class eA{constructor(e){this.key=e,this.Zu=!1}}class tA{constructor(e,t,r,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new Gu(m=>Ud(m),Lf),this.na=new Map,this.sa=new Set,this.ia=new Wn(je.comparator),this.ra=new Map,this.oa=new Fv,this.ua={},this.aa=new Map,this.ca=el.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function IC(n,e){return c0.apply(this,arguments)}function c0(){return c0=(0,q.Z)(function*(n,e){const t=TC(n);let r,o;const l=t.ea.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.Xu();else{const d=yield op(t.localStore,cs(e));t.isPrimaryClient&&jm(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield PI(t,e,r,"current"===m)}return o}),c0.apply(this,arguments)}function PI(n,e,t,r){return kI.apply(this,arguments)}function kI(){return kI=(0,q.Z)(function*(n,e,t,r){n.la=(x,N,H)=>{return(J=(0,q.Z)(function*(ce,Le,st,Qt){let Jt=Le.view.Gu(st);Jt.ni&&(Jt=yield ap(ce.localStore,Le.query,!1).then(({documents:Xt})=>Le.view.Gu(Xt,Jt)));const tn=Qt&&Qt.targetChanges.get(Le.targetId),Ft=Le.view.applyChanges(Jt,ce.isPrimaryClient,tn);return P(ce,Le.targetId,Ft.Hu),Ft.snapshot}),function(ce,Le,st,Qt){return J.apply(this,arguments)})(n,x,N,H);var J};const o=yield ap(n.localStore,e,!0),l=new OI(e,o.li),d=l.Gu(o.documents),m=zf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=l.applyChanges(d,n.isPrimaryClient,m);P(n,t,w.Hu);const C=new wC(e,t,l);return n.ea.set(e,C),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),w.snapshot}),kI.apply(this,arguments)}function nA(n,e){return FI.apply(this,arguments)}function FI(){return FI=(0,q.Z)(function*(n,e){const t=qe(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(l=>!Lf(l,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield La(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),$m(t.remoteStore,r.targetId),T(t,r.targetId)}).catch(tl))):(T(t,r.targetId),yield La(t.localStore,r.targetId,!0))}),FI.apply(this,arguments)}function d0(){return d0=(0,q.Z)(function*(n,e,t){const r=AC(n);try{const o=yield function(l,d){const m=qe(l),w=or.now(),C=d.reduce((N,H)=>N.add(H.key),pn());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.ci.Ks(N,C).next(H=>{x=H;const J=[];for(const ce of d){const Le=Ib(ce,x.get(ce.key));null!=Le&&J.push(new lc(ce.key,Le,H_(Le.value.mapValue),mr.exists(!0)))}return m.Bs.addMutationBatch(N,w,J,d)})).then(N=>(N.applyToLocalDocumentSet(x),{batchId:N.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,d,m){let w=l.ua[l.currentUser.toKey()];w||(w=new Wn(mt)),w=w.insert(d,m),l.ua[l.currentUser.toKey()]=w}(r,o.batchId,t),yield de(r,o.changes),yield _c(r.remoteStore)}catch(o){const l=Ua(o,"Failed to persist write");t.reject(l)}}),d0.apply(this,arguments)}function DC(n,e){return LI.apply(this,arguments)}function LI(){return LI=(0,q.Z)(function*(n,e){const t=qe(n);try{const r=yield HT(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.ra.get(l);d&&(Dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Zu=!0:o.modifiedDocuments.size>0?Dt(d.Zu):o.removedDocuments.size>0&&(Dt(d.Zu),d.Zu=!1))}),yield de(t,r,e)}catch(r){yield tl(r)}}),LI.apply(this,arguments)}function bC(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((l,d)=>{const m=d.view.Au(e);m.snapshot&&o.push(m.snapshot)}),function(l,d){const m=qe(l);m.onlineState=d;let w=!1;m.queries.forEach((C,x)=>{for(const N of x.listeners)N.Au(d)&&(w=!0)}),w&&Zm(m)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iA(n,e,t){return i.apply(this,arguments)}function i(){return i=(0,q.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),l=o&&o.key;if(l){let d=new Wn(je.comparator);d=d.insert(l,Sn.newNoDocument(l,Et.min()));const m=pn().add(l),w=new qf(Et.min(),new Map,new Rn(mt),d,m);yield DC(r,w),r.ia=r.ia.remove(l),r.ra.delete(e),W(r)}else yield La(r.localStore,e,!1).then(()=>T(r,e,t)).catch(tl)}),i.apply(this,arguments)}function s(n,e){return a.apply(this,arguments)}function a(){return a=(0,q.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield $T(t.localStore,e);I(t,r,null),E(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield de(t,o)}catch(o){yield tl(o)}}),a.apply(this,arguments)}function u(n,e,t){return c.apply(this,arguments)}function c(){return c=(0,q.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(l,d){const m=qe(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.Bs.lookupMutationBatch(w,d).next(x=>(Dt(null!==x),C=x.keys(),m.Bs.removeMutationBatch(w,x))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.ci.Ks(w,C))})}(r.localStore,e);I(r,e,t),E(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield de(r,o)}catch(o){yield tl(o)}}),c.apply(this,arguments)}function _(){return _=(0,q.Z)(function*(n,e){const t=qe(n);Va(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=qe(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=Ua(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),_.apply(this,arguments)}function E(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function I(n,e,t){const r=qe(n);let o=r.ua[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function T(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||S(n,r)})}function S(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&($m(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),W(n))}function P(n,e,t){for(const r of t)r instanceof l0?(n.oa.addReference(r.key,e),V(n,r)):r instanceof Ym?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||S(n,r.key)):nt()}function V(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.sa.add(r),W(n))}function W(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new je(nn.fromString(e)),r=n.ca.next();n.ra.set(r,new eA(t)),n.ia=n.ia.insert(t,r),jm(n.remoteStore,new Ku(cs(Ld(t.path)),r,2,ls.A))}}function de(n,e,t){return Ne.apply(this,arguments)}function Ne(){return Ne=(0,q.Z)(function*(n,e,t){const r=qe(n),o=[],l=[],d=[];var m;r.ea.isEmpty()||(r.ea.forEach((m,w)=>{d.push(r.la(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const x=Rv.Ys(w.targetId,C);l.push(x)}}))}),yield Promise.all(d),r.ta.Qo(o),yield(m=(0,q.Z)(function*(w,C){const x=qe(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>fe.forEach(C,H=>fe.forEach(H.Hs,J=>x.persistence.referenceDelegate.addReference(N,H.targetId,J)).next(()=>fe.forEach(H.Js,J=>x.persistence.referenceDelegate.removeReference(N,H.targetId,J)))))}catch(N){if(!dc(N))throw N;Oe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const H=N.targetId;if(!N.fromCache){const J=x.ii.get(H),Le=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);x.ii=x.ii.insert(H,Le)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,l))}),Ne.apply(this,arguments)}function $e(n,e){return Je.apply(this,arguments)}function Je(){return Je=(0,q.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield nC(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(d=>{d.forEach(m=>{m.reject(new Te(se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield de(t,r.hi)}var o}),Je.apply(this,arguments)}function be(n,e){const t=qe(n),r=t.ra.get(e);if(r&&r.Zu)return pn().add(r.key);{let o=pn();const l=t.na.get(e);if(!l)return o;for(const d of l){const m=t.ea.get(d);o=o.unionWith(m.view.Ku)}return o}}function ht(n,e){return Gt.apply(this,arguments)}function Gt(){return Gt=(0,q.Z)(function*(n,e){const t=qe(n),r=yield ap(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&P(t,e.targetId,o.Hu),o}),Gt.apply(this,arguments)}function gn(n,e){return Oi.apply(this,arguments)}function Oi(){return Oi=(0,q.Z)(function*(n,e){const t=qe(n);return Ov(t.localStore,e).then(r=>de(t,r))}),Oi.apply(this,arguments)}function vc(n,e,t,r){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,q.Z)(function*(n,e,t,r){const o=qe(n),l=yield function(d,m){const w=qe(d),C=qe(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.fn(x,m).next(N=>N?w.ci.Ks(x,N):fe.resolve(null)))}(o.localStore,e);var m;null!==l?("pending"===t?yield _c(o.remoteStore):"acknowledged"===t||"rejected"===t?(I(o,e,r||null),E(o,e),m=e,qe(qe(o.localStore).Bs)._n(m)):nt(),yield de(o,l)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ep.apply(this,arguments)}function wp(){return wp=(0,q.Z)(function*(n,e){const t=qe(n);if(TC(t),AC(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield Qm(t,r.toArray());t.ha=!0,yield gp(t.remoteStore,!0);for(const l of o)jm(t.remoteStore,l)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((l,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(T(t,d),La(t.localStore,d,!0))),$m(t.remoteStore,d)}),yield o,yield Qm(t,r),function(l){const d=qe(l);d.ra.forEach((m,w)=>{$m(d.remoteStore,w)}),d.oa.bi(),d.ra=new Map,d.ia=new Wn(je.comparator)}(t),t.ha=!1,yield gp(t.remoteStore,!1)}}),wp.apply(this,arguments)}function Qm(n,e,t){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,q.Z)(function*(n,e,t){const r=qe(n),o=[],l=[];for(const d of e){let m;const w=r.na.get(d);if(w&&0!==w.length){m=yield op(r.localStore,cs(w[0]));for(const C of w){const x=r.ea.get(C),N=yield ht(r,x);N.snapshot&&l.push(N.snapshot)}}else{const C=yield Um(r.localStore,d);m=yield op(r.localStore,C),yield PI(r,Jm(C),d,!1)}o.push(m)}return r.ta.Qo(l),o}),Ip.apply(this,arguments)}function Jm(n){return Cw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function f0(n){const e=qe(n);return qe(qe(e.localStore).persistence).Fs()}function p0(n,e,t,r){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,q.Z)(function*(n,e,t,r){const o=qe(n);if(o.ha)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const l=o.na.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const d=yield Ov(o.localStore,Tw(l[0])),m=qf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield de(o,d,m);break}case"rejected":yield La(o.localStore,e,!0),T(o,e,r);break;default:nt()}}),Dp.apply(this,arguments)}function DM(n,e,t){return CC.apply(this,arguments)}function CC(){return CC=(0,q.Z)(function*(n,e,t){const r=TC(n);if(r.ha){for(const o of e){if(r.na.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const l=yield Um(r.localStore,o),d=yield op(r.localStore,l);yield PI(r,Jm(l),d.targetId,!1),jm(r.remoteStore,d)}for(const o of t)r.na.has(o)&&(yield La(r.localStore,o,!1).then(()=>{$m(r.remoteStore,o),T(r,o)}).catch(tl))}}),CC.apply(this,arguments)}function TC(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=be.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iA.bind(null,e),e.ta.Qo=RI.bind(null,e.eventManager),e.ta.fa=NI.bind(null,e.eventManager),e}function AC(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u.bind(null,e),e}class sA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,q.Z)(function*(){t.M=dp(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return Nv(this.persistence,new gI,e.initialUser,this.M)}wa(e){return new ZT(Vv.zi,this.M)}_a(e){return new wI}terminate(){var e=this;return(0,q.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class oA extends sA{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,q.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield AC(r.ya.syncEngine),yield _c(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return Nv(this.persistence,new gI,e.initialUser,this.M)}ma(e){return new hI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Vm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Br.withCacheSize(this.cacheSizeBytes):Br.DEFAULT;return new xv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,bI(),Bm(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new wI}}class CM extends oA{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,q.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof jv&&(r.sharedClientState.syncEngine={Mr:vc.bind(null,o),Or:p0.bind(null,o),Fr:DM.bind(null,o),Fs:f0.bind(null,o),kr:gn.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var l=(0,q.Z)(function*(d){yield function h0(n,e){return wp.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}_a(e){const t=bI();if(!jv.vt(t))throw new Te(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Vm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class SC{initialize(e,t){var r=this;return(0,q.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>bC(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=$e.bind(null,r.syncEngine),yield gp(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xI}createDatastore(e){const t=dp(e.databaseInfo.databaseId),r=new DI(e.databaseInfo);return new lC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=m=>bC(this.syncEngine,m,0),d=Hv.vt()?new Hv:new $v,new cC(t,r,o,l,d);var t,r,o,l,d}createSyncEngine(e,t){return function(r,o,l,d,m,w,C){const x=new tA(r,o,l,d,m,w);return C&&(x.ha=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,q.Z)(function*(t){const r=qe(t);Oe("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield yc(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function aA(n,e=10240){let t=0;return{read:()=>(0,q.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,q.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class VI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class TM{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,q.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,q.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,q.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const l=yield e.ba(o);return new vC(JSON.parse(l),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,q.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,q.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,q.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class AM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,q.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Te(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,q.Z)(function*(l,d){const m=qe(l),w=Kf(m.M)+"/documents",C={documents:d.map(J=>qu(m.M,J))},x=yield m.ho("BatchGetDocuments",w,C),N=new Map;x.forEach(J=>{const ce=function xb(n,e){return"found"in e?function(t,r){Dt(!!r.found);const o=Ho(t,r.found.name),l=Sr(r.found.updateTime),d=new ei({mapValue:{fields:r.found.fields}});return Sn.newFoundDocument(o,l,d)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const o=Ho(t,r.missing),l=Sr(r.readTime);return Sn.newNoDocument(o,l)}(n,e):nt()}(m.M,J);N.set(ce.key.toString(),ce)});const H=[];return d.forEach(J=>{const ce=N.get(J.toString());Dt(!!ce),H.push(ce)}),H}),function(l,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new jf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,q.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=je.fromPath(o);e.mutations.push(new $f(l,e.precondition(l)))}),yield(r=(0,q.Z)(function*(o,l){const d=qe(o),m=Kf(d.M)+"/documents",w={writes:l.map(C=>Zf(d.M,C))};yield d.oo("Commit",m,w)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?mr.updateTime(t):mr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Te(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mr.updateTime(t)}return mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class SM{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new hp(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,q.Z)(function*(){const t=new AM(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.xa(l)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!Lu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Pw(t)}return!1}}class MM{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Fr.UNAUTHENTICATED,this.clientId=Us.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,q.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,q.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,q.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Ua(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function uA(n,e){return MC.apply(this,arguments)}function MC(){return MC=(0,q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,q.Z)(function*(l){r.isEqual(l)||(yield nC(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),MC.apply(this,arguments)}function lA(n,e){return xC.apply(this,arguments)}function xC(){return xC=(0,q.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield RC(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>il(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,l)=>il(e.remoteStore,l)),n.onlineComponents=e}),xC.apply(this,arguments)}function RC(n){return NC.apply(this,arguments)}function NC(){return NC=(0,q.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield uA(n,new sA)),n.offlineComponents}),NC.apply(this,arguments)}function UI(n){return OC.apply(this,arguments)}function OC(){return OC=(0,q.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield lA(n,new SC)),n.onlineComponents}),OC.apply(this,arguments)}function cA(n){return RC(n).then(e=>e.persistence)}function PC(n){return RC(n).then(e=>e.localStore)}function dA(n){return UI(n).then(e=>e.remoteStore)}function kC(n){return UI(n).then(e=>e.syncEngine)}function Xm(n){return FC.apply(this,arguments)}function FC(){return FC=(0,q.Z)(function*(n){const e=yield UI(n),t=e.eventManager;return t.onListen=IC.bind(null,e.syncEngine),t.onUnlisten=nA.bind(null,e.syncEngine),t}),FC.apply(this,arguments)}function hA(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function(o,l,d,m,w){const C=new VI({next:N=>{l.enqueueAndForget(()=>r0(o,x));const H=N.docs.has(d);!H&&N.fromCache?w.reject(new Te(se.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&m&&"server"===m.source?w.reject(new Te(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new o0(Ld(d.path),C,{includeMetadataChanges:!0,Cu:!0});return t0(o,x)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}function fA(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function(o,l,d,m,w){const C=new VI({next:N=>{l.enqueueAndForget(()=>r0(o,x)),N.fromCache&&"server"===m.source?w.reject(new Te(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new o0(d,C,{includeMetadataChanges:!0,Cu:!0});return t0(o,x)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}const pA=new Map;function LC(n,e,t){if(!t)throw new Te(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gA(n,e,t,r){if(!0===e&&!0===r)throw new Te(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mA(n){if(!je.isDocumentKey(n))throw new Te(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yA(n){if(je.isDocumentKey(n))throw new Te(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=BI(n);throw new Te(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _A(n,e){if(e<=0)throw new Te(se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class vA{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,gA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class g0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vA({}),this._settingsFrozen=!1,e instanceof jo?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Te(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(o.options.projectId)}(e))}get app(){if(!this._app)throw new Te(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ow;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new uw(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Te(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pA.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),pA.delete(e),t.terminate())}(this),Promise.resolve()}}class Kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}}class Gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class sl extends Gi{constructor(e,t,r){super(e,t,Ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new je(e))}withConverter(e){return new sl(this.firestore,e,this._path)}}function EA(n,e,...t){if(n=(0,xt.m9)(n),LC("collection","path",e),n instanceof g0){const r=nn.fromString(e,...t);return yA(r),new sl(n,null,r)}{if(!(n instanceof Kn||n instanceof sl))throw new Te(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return yA(r),new sl(n.firestore,null,r)}}function jI(n,e,...t){if(n=(0,xt.m9)(n),1===arguments.length&&(e=Us.R()),LC("doc","path",e),n instanceof g0){const r=nn.fromString(e,...t);return mA(r),new Kn(n,null,new je(r))}{if(!(n instanceof Kn||n instanceof sl))throw new Te(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return mA(r),new Kn(n.firestore,n instanceof sl?n.converter:null,new je(r))}}function wA(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),(n instanceof Kn||n instanceof sl)&&(e instanceof Kn||e instanceof sl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function IA(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),n instanceof Gi&&e instanceof Gi&&n.firestore===e.firestore&&Lf(n._query,e._query)&&n.converter===e.converter}class BM{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new hp(this,"async_queue_retry"),this.qa=()=>{const t=Bm();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Bm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Bm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Lr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,q.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!dc(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Wt("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=yp.createAndSchedule(this,e,t,r,l=>this.ja(l));return this.Fa.push(o),o}Ka(){this.$a&&nt()}verifyOperationInProgress(){}Wa(){var e=this;return(0,q.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function VC(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class jM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tr extends g0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new BM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||DA(this),this._firestoreClient.terminate()}}function $r(n){return n._firestoreClient||DA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function DA(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new hw(n._databaseId,l,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new MM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function bA(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,q.Z)(function*(){try{yield uA(n,t),yield lA(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===se.FAILED_PRECONDITION||l.code===se.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function CA(n){if(n._initialized||n._terminated)throw new Te(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ec{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ol(Xn.fromBase64String(e))}catch(t){throw new Te(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ol(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bp{constructor(e){this._methodName=e}}class $I{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}}const QM=/^__.*__$/;class JM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new lc(e,this.data,this.fieldMask,t,this.fieldTransforms):new $d(e,this.data,t,this.fieldTransforms)}}class TA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new lc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class HI{constructor(e,t,r,o,l,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===l&&this.Ya(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new HI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return zI(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(AA(this.Xa)&&QM.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class XM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||dp(e)}ac(e,t,r,o=!1){return new HI({Xa:e,methodName:t,uc:r,path:Vr.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Cp(n){const e=n._freezeSettings(),t=dp(n._databaseId);return new XM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GI(n,e,t,r,o,l={}){const d=n.ac(l.merge||l.mergeFields?2:0,e,t,o);$C("Data must be an object, but it was:",d,r);const m=xA(r,d);let w,C;if(l.merge)w=new nc(d.fieldMask),C=d.fieldTransforms;else if(l.mergeFields){const x=[];for(const N of l.mergeFields){const H=HC(e,N,t);if(!d.contains(H))throw new Te(se.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);NA(x,H)||x.push(H)}w=new nc(x),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new JM(new ei(m),w,C)}class m0 extends bp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof m0}}function SA(n,e,t){return new HI({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class UC extends bp{_toFieldTransform(e){return new Oa(e.path,new Uf)}isEqual(e){return e instanceof UC}}class ex extends bp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=SA(this,e,!0),r=this.cc.map(l=>Tp(l,t)),o=new Bd(r);return new Oa(e.path,o)}isEqual(e){return this===e}}class tx extends bp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=SA(this,e,!0),r=this.cc.map(l=>Tp(l,t)),o=new Hu(r);return new Oa(e.path,o)}isEqual(e){return this===e}}class nx extends bp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new jd(e.M,Mw(e.M,this.hc));return new Oa(e.path,t)}isEqual(e){return this===e}}function BC(n,e,t,r){const o=n.ac(1,e,t);$C("Data must be an object, but it was:",o,r);const l=[],d=ei.empty();tc(r,(w,C)=>{const x=qI(e,w,t);C=(0,xt.m9)(C);const N=o.sc(x);if(C instanceof m0)l.push(x);else{const H=Tp(C,N);null!=H&&(l.push(x),d.set(x,H))}});const m=new nc(l);return new TA(d,m,o.fieldTransforms)}function jC(n,e,t,r,o,l){const d=n.ac(1,e,t),m=[HC(e,r,t)],w=[o];if(l.length%2!=0)throw new Te(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<l.length;H+=2)m.push(HC(e,l[H])),w.push(l[H+1]);const C=[],x=ei.empty();for(let H=m.length-1;H>=0;--H)if(!NA(C,m[H])){const J=m[H];let ce=w[H];ce=(0,xt.m9)(ce);const Le=d.sc(J);if(ce instanceof m0)C.push(J);else{const st=Tp(ce,Le);null!=st&&(C.push(J),x.set(J,st))}}const N=new nc(C);return new TA(x,N,d.fieldTransforms)}function MA(n,e,t,r=!1){return Tp(t,n.ac(r?4:3,e))}function Tp(n,e){if(RA(n=(0,xt.m9)(n)))return $C("Unsupported field value:",e,n),xA(n,e);if(n instanceof bp)return function(t,r){if(!AA(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const d of t){let m=Tp(d,r.ic(l));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Mw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=or.fromDate(t);return{timestampValue:Wf(r.M,o)}}if(t instanceof or){const o=new or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wf(r.M,o)}}if(t instanceof $I)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ol)return{bytesValue:av(r.M,t._byteString)};if(t instanceof Kn){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.rc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$w(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${BI(t)}`)}(n,e)}function xA(n,e){const t={};return cm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tc(n,(r,o)=>{const l=Tp(o,e.tc(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function RA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof or||n instanceof $I||n instanceof ol||n instanceof Kn||n instanceof bp)}function $C(n,e,t){if(!RA(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=BI(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function HC(n,e,t){if((e=(0,xt.m9)(e))instanceof Ec)return e._internalPath;if("string"==typeof e)return qI(n,e);throw zI("Field path arguments must be of type string or ",n,!1,void 0,t)}const rx=new RegExp("[~\\*/\\[\\]]");function qI(n,e,t){if(e.search(rx)>=0)throw zI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ec(...e.split("."))._internalPath}catch(r){throw zI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zI(n,e,t,r,o){const l=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(l||d)&&(w+=" (found",l&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Te(se.INVALID_ARGUMENT,m+n+w)}function NA(n,e){return n.some(t=>t.isEqual(e))}class y0{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ix(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(WI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ix extends y0{data(){return super.data()}}function WI(n,e){return"string"==typeof e?qI(n,e):e instanceof Ec?e._internalPath:e._delegate._internalPath}class Ap{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wc extends y0{constructor(e,t,r,o,l,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(WI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class _0 extends wc{data(e={}){return super.data(e)}}class eh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ap(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _0(this._firestore,this._userDataWriter,r.key,r,new Ap(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new _0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ap(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new _0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ap(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),C=l.indexOf(d.doc.key)),{type:sx(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function sx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function OA(n,e){return n instanceof wc&&e instanceof wc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof eh&&e instanceof eh&&n._firestore===e._firestore&&IA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function PA(n){if(mm(n)&&0===n.explicitOrderBy.length)throw new Te(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class v0{}function th(n,...e){for(const t of e)n=t._apply(n);return n}class ox extends v0{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=Cp(e.firestore),r=function(o,l,d,m,w,C,x){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Te(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){BA(x,C);const J=[];for(const ce of x)J.push(UA(m,o,ce));N={arrayValue:{values:J}}}else N=UA(m,o,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||BA(x,C),N=MA(d,"where",x,"in"===C||"not-in"===C);const H=ti.create(w,C,N);return function(J,ce){if(ce.S()){const st=K_(J);if(null!==st&&!st.isEqual(ce.field))throw new Te(se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${st.toString()}' and '${ce.field.toString()}'`);const Qt=W_(J);null!==Qt&&jA(0,ce.field,Qt)}const Le=function(st,Qt){for(const Jt of st.filters)if(Qt.indexOf(Jt.op)>=0)return Jt.op;return null}(J,function(st){switch(st){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ce.op));if(null!==Le)throw new Te(se.INVALID_ARGUMENT,Le===ce.op?`Invalid query. You cannot use more than one '${ce.op.toString()}' filter.`:`Invalid query. You cannot use '${ce.op.toString()}' filters with '${Le.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Gi(e.firestore,e.converter,function(o,l){const d=o.filters.concat([l]);return new Na(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class ux extends v0{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Te(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Te(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new sc(o,l);return function(m,w){if(null===W_(m)){const C=K_(m);null!==C&&jA(0,C,w.field)}}(r,d),d}(e._query,this.lc,this._c);return new Gi(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new Na(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class kA extends v0{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new Gi(e.firestore,e.converter,Z_(e._query,this.wc,this.mc))}}class FA extends v0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=VA(e,this.type,this.gc,this.yc);return new Gi(e.firestore,e.converter,(o=t,new Na((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class LA extends v0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=VA(e,this.type,this.gc,this.yc);return new Gi(e.firestore,e.converter,(o=t,new Na((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function VA(n,e,t,r){if(t[0]=(0,xt.m9)(t[0]),t[0]instanceof y0)return function(o,l,d,m,w){if(!m)throw new Te(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const x of oc(o))if(x.field.isKeyField())C.push(ic(l,m.key));else{const N=m.data.field(x.field);if(xf(N))throw new Te(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=x.field.canonicalString();throw new Te(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}C.push(N)}return new ju(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Cp(n.firestore);return function(l,d,m,w,C,x){const N=l.explicitOrderBy;if(C.length>N.length)throw new Te(se.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let J=0;J<C.length;J++){const ce=C[J];if(N[J].field.isKeyField()){if("string"!=typeof ce)throw new Te(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ce}`);if(!Vd(l)&&-1!==ce.indexOf("/"))throw new Te(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ce}' contains a slash.`);const Le=l.path.child(nn.fromString(ce));if(!je.isDocumentKey(Le))throw new Te(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Le}' is not because it contains an odd number of segments.`);const st=new je(Le);H.push(ic(d,st))}else{const Le=MA(m,w,ce);H.push(Le)}}return new ju(H,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function UA(n,e,t){if("string"==typeof(t=(0,xt.m9)(t))){if(""===t)throw new Te(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vd(e)&&-1!==t.indexOf("/"))throw new Te(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!je.isDocumentKey(r))throw new Te(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ic(n,new je(r))}if(t instanceof Kn)return ic(n,t._key);throw new Te(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${BI(t)}.`)}function BA(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Te(se.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function jA(n,e,t){if(!t.isEqual(e))throw new Te(se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class GC{convertValue(e,t="none"){switch(rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return tc(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new $I(zn(e.latitude),zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=L_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xd(e));default:return null}}convertTimestamp(e){const t=Ma(e);return new or(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);Dt(Ww(r));const o=new jo(r.get(1),r.get(3)),l=new je(r.popFirst(5));return o.isEqual(t)||Wt(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function KI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class mx extends GC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}class $A{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cp(e)}set(e,t,r){this._verifyNotCommitted();const o=nh(e,this._firestore),l=KI(o.converter,t,r),d=GI(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,mr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=nh(e,this._firestore);let d;return d="string"==typeof(t=(0,xt.m9)(t))||t instanceof Ec?jC(this._dataReader,"WriteBatch.update",l._key,t,r,o):BC(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nh(e,this._firestore);return this._mutations=this._mutations.concat(new jf(t._key,mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nh(n,e){if((n=(0,xt.m9)(n)).firestore!==e)throw new Te(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Sp extends GC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}function HA(n,e,t){n=on(n,Kn);const r=on(n.firestore,tr),o=KI(n.converter,e,t);return ey(r,[GI(Cp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,mr.none())])}function GA(n,e,t,...r){n=on(n,Kn);const o=on(n.firestore,tr),l=Cp(o);let d;return d="string"==typeof(e=(0,xt.m9)(e))||e instanceof Ec?jC(l,"updateDoc",n._key,e,t,r):BC(l,"updateDoc",n._key,e),ey(o,[d.toMutation(n._key,mr.exists(!0))])}function qA(n,...e){var t,r,o;n=(0,xt.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||VC(e[d])||(l=e[d],d++);const m={includeMetadataChanges:l.includeMetadataChanges};if(VC(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,x;if(n instanceof Kn)C=on(n.firestore,tr),x=Ld(n._key.path),w={next:N=>{e[d]&&e[d](qC(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=on(n,Gi);C=on(N.firestore,tr),x=N._query;const H=new Sp(C);w={next:J=>{e[d]&&e[d](new eh(C,H,N,J))},error:e[d+1],complete:e[d+2]},PA(n._query)}return function(N,H,J,ce){const Le=new VI(ce),st=new o0(H,Le,J);return N.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return t0(yield Xm(N),st)})),()=>{Le.Ia(),N.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return r0(yield Xm(N),st)}))}}($r(C),x,m,w)}function ey(n,e){return function(t,r){const o=new Lr;return t.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function rA(n,e,t){return d0.apply(this,arguments)}(yield kC(t),r,o)})),o.promise}($r(n),e)}function qC(n,e,t){const r=t.docs.get(e._key),o=new Sp(n);return new wc(n,o,e._key,r,new Ap(t.hasPendingWrites,t.fromCache),e.converter)}class Tx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cp(e)}get(e){const t=nh(e,this._firestore),r=new mx(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return nt();const l=o[0];if(l.isFoundDocument())return new y0(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new y0(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const o=nh(e,this._firestore),l=KI(o.converter,t,r),d=GI(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const l=nh(e,this._firestore);let d;return d="string"==typeof(t=(0,xt.m9)(t))||t instanceof Ec?jC(this._dataReader,"Transaction.update",l._key,t,r,o):BC(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,d),this}delete(e){const t=nh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nh(e,this._firestore),r=new Sp(this._firestore);return super.get(e).then(o=>new wc(this._firestore,r,t._key,o._document,new Ap(!1,!1),t.converter))}}function zC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function WA(){if("undefined"==typeof Uint8Array)throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function KA(){if(!function dw(){return"undefined"!=typeof atob}())throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Mf=Ht.SDK_VERSION,(0,Ht._registerComponent)(new Yr.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new tr(o,new aw(t.getProvider("auth-internal")),new Uo(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Ht.registerVersion)(O_,"3.4.8",n),(0,Ht.registerVersion)(O_,"3.4.8","esm2017")}();class E0{constructor(e){this._delegate=e}static fromBase64String(e){return KA(),new E0(ol.fromBase64String(e))}static fromUint8Array(e){return WA(),new E0(ol.fromUint8Array(e))}toBase64(){return KA(),this._delegate.toBase64()}toUint8Array(){return WA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function WC(n){return function kx(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Fx{enableIndexedDbPersistence(e,t){return function HM(n,e){CA(n=on(n,tr));const t=$r(n),r=n._freezeSettings(),o=new SC;return bA(t,o,new oA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function GM(n){CA(n=on(n,tr));const e=$r(n),t=n._freezeSettings(),r=new SC;return bA(e,r,new CM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qM(n){if(n._initialized&&!n._terminated)throw new Te(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,q.Z)(function*(){try{yield(t=(0,q.Z)(function*(r){if(!lo.vt())return Promise.resolve();const o=r+"main";yield lo.delete(o)}),function(r){return t.apply(this,arguments)})(Vm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ZA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof jo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Md("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function VM(n,e,t,r={}){var o;const l=(n=on(n,g0))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Md("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Fr.MOCK_USER;else{d=(0,xt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Te(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Fr(w)}n._authCredentials=new cb(new sw(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function WM(n){return function xM(n){return n.asyncQueue.enqueue((0,q.Z)(function*(){const e=yield cA(n),t=yield dA(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o.fu.delete(0),fp(o)}(t)}))}($r(n=on(n,tr)))}(this._delegate)}disableNetwork(){return function KM(n){return function RM(n){return n.asyncQueue.enqueue((0,q.Z)(function*(){const e=yield cA(n),t=yield dA(n);return e.setNetworkEnabled(!1),(r=(0,q.Z)(function*(o){const l=qe(o);l.fu.add(0),yield yc(l),l.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}($r(n=on(n,tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function zM(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return function f(n,e){return _.apply(this,arguments)}(yield kC(e),t)})),t.promise}($r(n=on(n,tr)))}(this._delegate)}onSnapshotsInSync(e){return function Cx(n,e){return function PM(n,e){const t=new VI(e);return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return r=yield Xm(n),o=t,qe(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return r=yield Xm(n),o=t,void qe(r).Eu.delete(o);var r,o}))}}($r(n=on(n,tr)),VC(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ty(this,EA(this._delegate,e))}catch(t){throw ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new zo(this,jI(this._delegate,e))}catch(t){throw ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hs(this,function UM(n,e){if(n=on(n,g0),LC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gi(n,null,(t=e,new Na(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ax(n,e){return function kM(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){const r=yield(o=n,UI(o).then(l=>l.datastore));var o;new SM(n.asyncQueue,r,e,t).run()})),t.promise}($r(n=on(n,tr)),t=>e(new Tx(n,t)))}(this._delegate,t=>e(new YA(this,t)))}batch(){return $r(this._delegate),new QA(new $A(this._delegate,e=>ey(this._delegate,e)))}loadBundle(e){return function ZM(n,e){const t=$r(n=on(n,tr)),r=new jM;return function FM(n,e,t,r){const o=function(l,d){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,w=function(w,C){if(w instanceof Uint8Array)return aA(w,C);if(w instanceof ArrayBuffer)return aA(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new TM(w,d);var w}(t,dp(e));n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){!function bM(n,e,t){const r=qe(n);var o;(o=(0,q.Z)(function*(l,d,m){try{const w=yield d.getMetadata();if(yield function(H,J){const ce=qe(H),Le=Sr(J.createTime);return ce.persistence.runTransaction("hasNewerBundle","readonly",st=>ce._s.getBundleMetadata(st,J.id)).then(st=>!!st&&st.createTime.compareTo(Le)>=0)}(l.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(EC(w));const C=new u0(w,l.localStore,d.M);let x=yield d.da();for(;x;){const H=yield C.ku(x);H&&m._updateProgress(H),x=yield d.da()}const N=yield C.complete();return yield de(l,N.Fu,void 0),yield function(H,J){const ce=qe(H);return ce.persistence.runTransaction("Save bundle","readwrite",Le=>ce._s.saveBundleMetadata(Le,J))}(l.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Ou)}catch(w){return Md("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(l,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield kC(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function YM(n,e){return function LM(n,e){return n.asyncQueue.enqueue((0,q.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",l=>o._s.getNamedQuery(l,r))}(yield PC(n),e)}))}($r(n=on(n,tr)),e).then(t=>t?new Gi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new hs(this,t):null)}}class ZI extends GC{constructor(e){super(),this.firestore=e}convertBytes(e){return new E0(new ol(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return zo.forKey(t,this.firestore,null)}}class YA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ZI(e)}get(e){const t=xp(e);return this._delegate.get(t).then(r=>new w0(this._firestore,new wc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=xp(e);return r?(zC("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=xp(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=xp(e);return this._delegate.delete(t),this}}class QA{constructor(e){this._delegate=e}set(e,t,r){const o=xp(e);return r?(zC("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=xp(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=xp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new I0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new Mp(e,new ZI(e),t),o.set(t,l)),l}}Mp.INSTANCES=new WeakMap;class zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ZI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zo(t,new Kn(t._delegate,r,new je(e)))}static forKey(e,t,r){return new zo(t,new Kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ty(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ty(this.firestore,EA(this._delegate,e))}catch(t){throw ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof Kn&&wA(this._delegate,e)}set(e,t){t=zC("DocumentReference.set",t);try{return t?HA(this._delegate,e,t):HA(this._delegate,e)}catch(r){throw ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?GA(this._delegate,e):GA(this._delegate,e,t,...r)}catch(o){throw ds(o,"updateDoc()","DocumentReference.update()")}}delete(){return function Dx(n){return ey(on(n.firestore,tr),[new jf(n._key,mr.none())])}(this._delegate)}onSnapshot(...e){const t=JA(e),r=XA(e,o=>new w0(this.firestore,new wc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return qA(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function _x(n){n=on(n,Kn);const e=on(n.firestore,tr),t=$r(e),r=new Sp(e);return function NM(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return(r=(0,q.Z)(function*(o,l,d){try{const m=yield function(w,C){const x=qe(w);return x.persistence.runTransaction("read document","readonly",N=>x.ci.Ls(N,C))}(o,l);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Te(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Ua(m,`Failed to get document '${l} from cache`);d.reject(w)}}),function(o,l,d){return r.apply(this,arguments)})(yield PC(n),e,t);var r})),t.promise}(t,n._key).then(o=>new wc(e,r,n._key,o,new Ap(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function vx(n){n=on(n,Kn);const e=on(n.firestore,tr);return hA($r(e),n._key,{source:"server"}).then(t=>qC(e,n,t))}(this._delegate):function yx(n){n=on(n,Kn);const e=on(n.firestore,tr);return hA($r(e),n._key).then(t=>qC(e,n,t))}(this._delegate),t.then(r=>new w0(this.firestore,new wc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new zo(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function ds(n,e,t){return n.message=n.message.replace(e,t),n}function JA(n){for(const e of n)if("object"==typeof e&&!WC(e))return e;return{}}function XA(n,e){var t,r;let o;return o=WC(n[0])?n[0]:WC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class w0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return OA(this._delegate,e._delegate)}}class I0 extends w0{data(e){const t=this._delegate.data(e);return function lb(n,e){n||nt()}(void 0!==t),t}}class hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ZI(e)}where(e,t,r){try{return new hs(this.firestore,th(this._delegate,function ax(n,e,t){const r=e,o=WI("where",n);return new ox(o,r,t)}(e,t,r)))}catch(o){throw ds(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new hs(this.firestore,th(this._delegate,function lx(n,e="asc"){const t=e,r=WI("orderBy",n);return new ux(r,t)}(e,t)))}catch(r){throw ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hs(this.firestore,th(this._delegate,function cx(n){return _A("limit",n),new kA("limit",n,"F")}(e)))}catch(t){throw ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new hs(this.firestore,th(this._delegate,function dx(n){return _A("limitToLast",n),new kA("limitToLast",n,"L")}(e)))}catch(t){throw ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hs(this.firestore,th(this._delegate,function hx(...n){return new FA("startAt",n,!0)}(...e)))}catch(t){throw ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hs(this.firestore,th(this._delegate,function fx(...n){return new FA("startAfter",n,!1)}(...e)))}catch(t){throw ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hs(this.firestore,th(this._delegate,function px(...n){return new LA("endBefore",n,!1)}(...e)))}catch(t){throw ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hs(this.firestore,th(this._delegate,function gx(...n){return new LA("endAt",n,!0)}(...e)))}catch(t){throw ds(t,"endAt()","Query.endAt()")}}isEqual(e){return IA(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function wx(n){n=on(n,Gi);const e=on(n.firestore,tr),t=$r(e),r=new Sp(e);return function OM(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,q.Z)(function*(){return(r=(0,q.Z)(function*(o,l,d){try{const m=yield ap(o,l,!0),w=new OI(l,m.li),C=w.Gu(m.documents),x=w.applyChanges(C,!1);d.resolve(x.snapshot)}catch(m){const w=Ua(m,`Failed to execute query '${l} against cache`);d.reject(w)}}),function(o,l,d){return r.apply(this,arguments)})(yield PC(n),e,t);var r})),t.promise}(t,n._query).then(o=>new eh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function Ix(n){n=on(n,Gi);const e=on(n.firestore,tr),t=$r(e),r=new Sp(e);return fA(t,n._query,{source:"server"}).then(o=>new eh(e,r,n,o))}(this._delegate):function Ex(n){n=on(n,Gi);const e=on(n.firestore,tr),t=$r(e),r=new Sp(e);return PA(n._query),fA(t,n._query).then(o=>new eh(e,r,n,o))}(this._delegate),t.then(r=>new KC(this.firestore,new eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=JA(e),r=XA(e,o=>new KC(this.firestore,new eh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return qA(this._delegate,t,r)}withConverter(e){return new hs(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}class Vx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new I0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class KC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new I0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Vx(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new I0(this._firestore,r))})}isEqual(e){return OA(this._delegate,e._delegate)}}class ty extends hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zo(this.firestore,e):null}doc(e){try{return new zo(this.firestore,void 0===e?jI(this._delegate):jI(this._delegate,e))}catch(t){throw ds(t,"doc()","CollectionReference.doc()")}}add(e){return function bx(n,e){const t=on(n.firestore,tr),r=jI(n),o=KI(n.converter,e);return ey(t,[GI(Cp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,mr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new zo(this.firestore,t))}isEqual(e){return wA(this._delegate,e._delegate)}withConverter(e){return new ty(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function xp(n){return on(n,Kn)}class ZC{constructor(...e){this._delegate=new Ec(...e)}static documentId(){return new ZC(Vr.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof Ec&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Mx(){return new UC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Rp(e)}static delete(){const e=function Sx(){return new m0("deleteField")}();return e._methodName="FieldValue.delete",new Rp(e)}static arrayUnion(...e){const t=function xx(...n){return new ex("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Rp(t)}static arrayRemove(...e){const t=function Rx(...n){return new tx("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Rp(t)}static increment(e){const t=function Nx(n){return new nx("increment",n)}(e);return t._methodName="FieldValue.increment",new Rp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ux={Firestore:ZA,GeoPoint:$I,Timestamp:or,Blob:E0,Transaction:YA,WriteBatch:QA,DocumentReference:zo,DocumentSnapshot:w0,Query:hs,QueryDocumentSnapshot:I0,QuerySnapshot:KC,CollectionReference:ty,FieldPath:ZC,FieldValue:Rp,setLogLevel:function Lx(n){!function iw(n){Fu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function eS(n,e){return function $x(n,e=lE.z){return new Tn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function YC(n,e){return eS(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function YI(n,e){return YC(n,e).pipe(ef(void 0),zy(),(0,It.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(x=>x.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),l}))}function tS(n,e,t){return YI(n,t).pipe(wa((r,o)=>function Gx(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function qx(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return QC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return QC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return QC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),function cd(n,e=_a.y){return n=null!=n?n:Wy,(0,Cr.e)((t,r)=>{let o,l=!0;t.subscribe((0,jn.x)(r,d=>{const m=e(d);(l||!n(o,m))&&(l=!1,o=m,r.next(d))}))})}(),(0,It.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function QC(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function nS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function jx(n){(function Bx(n,e){n.INTERNAL.registerComponent(new Yr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},Ux)))})(n,(e,t)=>new ZA(e,t,new Fx)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(nf.Z);class rS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=YI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(ef(void 0),zy(),os(([r,o])=>o.length>0||!r),(0,It.U)(([r,o])=>o),ir.iC)}auditTrail(e){return this.stateChanges(e).pipe(wa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nS(e);return tS(this.query,t,this.afs.schedulers.outsideAngular).pipe(ir.iC)}valueChanges(e={}){return YC(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ir.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(ir.iC)}add(e){return this.ref.add(e)}doc(e){return new iS(this.ref.doc(e),this.afs)}}class iS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=aS(r,t);return new rS(o,l,this.afs)}snapshotChanges(){return function Hx(n,e){return eS(n,e).pipe(ef(void 0),zy(),(0,It.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ir.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xn.D)(this.ref.get(e)).pipe(ir.iC)}}class zx{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?YI(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),os(t=>t.length>0),ir.iC):YI(this.query,this.afs.schedulers.outsideAngular).pipe(ir.iC)}auditTrail(e){return this.stateChanges(e).pipe(wa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nS(e);return tS(this.query,t,this.afs.schedulers.outsideAngular).pipe(ir.iC)}valueChanges(e={}){return YC(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),ir.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(ir.iC)}}const sS=new g.OlP("angularfire2.enableFirestorePersistence"),oS=new g.OlP("angularfire2.firestore.persistenceSettings"),Wx=new g.OlP("angularfire2.firestore.settings"),Kx=new g.OlP("angularfire2.firestore.use-emulator");function aS(n,e=(t=>t)){return{query:e(n),ref:n}}let Zx=(()=>{class n{constructor(t,r,o,l,d,m,w,C,x,N,H,J,ce,Le,st,Qt,Jt){this.schedulers=w;const tn=(0,is.on)(t,m,r),Ft=x;N&&bg(tn,m,H,ce,Le,st,J,Qt),[this.firestore,this.persistenceEnabled$]=(0,is.cc)(`${tn.name}.firestore`,"AngularFirestore",tn.name,()=>{const Xt=m.runOutsideAngular(()=>tn.firestore());if(l&&Xt.settings(l),Ft&&Xt.useEmulator(...Ft),o&&!hr(d)){const En=()=>{try{return(0,xn.D)(Xt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(zi){return"undefined"!=typeof console&&console.warn(zi),vt(!1)}};return[Xt,m.runOutsideAngular(En)]}return[Xt,vt(!1)]},[l,Ft,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:d}=aS(o,r),m=this.schedulers.ngZone.run(()=>l);return new rS(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),l=this.firestore.collectionGroup(t);return new zx(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new iS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(is.Dh),g.LFG(is.xv,8),g.LFG(sS,8),g.LFG(Wx,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(ir.HU),g.LFG(oS,8),g.LFG(Kx,8),g.LFG(Cg,8),g.LFG(Ea,8),g.LFG(Ig,8),g.LFG(uE,8),g.LFG($y,8),g.LFG(Dg,8),g.LFG(Hy,8),g.LFG(wg,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Yx=(()=>{class n{constructor(){OD.Z.registerVersion("angularfire",ir.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:sS,useValue:!0},{provide:oS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Zx]}),n})();class Ba extends Ns.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Qx=k(9672);function uS(n,e,t){n?(0,Qx.f)(t,n,e):e()}function QI(n,e){const t=(0,zh.m)(n)?n:()=>n,r=o=>o.error(t());return new Tn.y(e?o=>e.schedule(r,0,o):r)}function lS(n){return new Tn.y(e=>{(0,_n.Xf)(n()).subscribe(e)})}var cS=k(727);function dS(){return(0,Cr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,jn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,l=t;t=null,o&&(!l||o===l)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class eR extends Tn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Cr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new cS.w0;const t=this.getSubject();e.add(this.source.subscribe((0,jn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=cS.w0.EMPTY)}return e}refCount(){return dS()(this)}}function rh(n){return(0,Cr.e)((e,t)=>{let l,r=null,o=!1;r=e.subscribe((0,jn.x)(t,void 0,void 0,d=>{l=(0,_n.Xf)(n(d,rh(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,l.subscribe(t))})}var qi=k(5577);function D0(n,e){return(0,zh.m)(e)?(0,qi.z)(n,e,1):(0,qi.z)(n,1)}function JC(n){return n<=0?()=>ko.E:(0,Cr.e)((e,t)=>{let r=[];e.subscribe((0,jn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}var co=k(8505);class Ic{constructor(e,t){this.id=e,this.url=t}}class XC extends Ic{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class b0 extends Ic{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hS extends Ic{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rR extends Ic{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iR extends Ic{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sR extends Ic{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oR extends Ic{constructor(e,t,r,o,l){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class aR extends Ic{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uR extends Ic{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fS{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class pS{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class lR{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cR{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dR{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hR{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gS{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Yt="primary";class fR{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ny(n){return new fR(n)}const mS="ngNavigationCancelingError";function eT(n){const e=Error("NavigationCancelingError: "+n);return e[mS]=!0,e}function gR(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let l=0;l<r.length;l++){const d=r[l],m=n[l];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function al(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!yS(n[o],e[o]))return!1;return!0}function yS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,l)=>r[l]===o)}return n===e}function _S(n){return Array.prototype.concat.apply([],n)}function vS(n){return n.length>0?n[n.length-1]:null}function Pi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ul(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,xn.D)(Promise.resolve(n)):vt(n)}const _R={exact:function IS(n,e,t){if(!Op(n.segments,e.segments)||!JI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!IS(n.children[r],e.children[r],t))return!1;return!0},subset:DS},ES={exact:function vR(n,e){return al(n,e)},subset:function ER(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yS(n[t],e[t]))},ignored:()=>!0};function wS(n,e,t){return _R[t.paths](n.root,e.root,t.matrixParams)&&ES[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function DS(n,e,t){return bS(n,e,e.segments,t)}function bS(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Op(o,t)||e.hasChildren()||!JI(o,t,r))}if(n.segments.length===t.length){if(!Op(n.segments,t)||!JI(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!DS(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(Op(n.segments,o)&&JI(n.segments,o,r)&&n.children[Yt])&&bS(n.children[Yt],e,l,r)}}function JI(n,e,t){return e.every((r,o)=>ES[t](n[o].parameters,r.parameters))}class Np{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ny(this.queryParams)),this._queryParamMap}toString(){return DR.serialize(this)}}class rn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Pi(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return XI(this)}}class C0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ny(this.parameters)),this._parameterMap}toString(){return MS(this)}}function Op(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class CS{}class TS{parse(e){const t=new NR(e);return new Np(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${T0(e.root,!0)}`,r=function TR(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${eD(t)}=${eD(o)}`).join("&"):`${eD(t)}=${eD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function bR(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const DR=new TS;function XI(n){return n.segments.map(e=>MS(e)).join("/")}function T0(n,e){if(!n.hasChildren())return XI(n);if(e){const t=n.children[Yt]?T0(n.children[Yt],!1):"",r=[];return Pi(n.children,(o,l)=>{l!==Yt&&r.push(`${l}:${T0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function IR(n,e){let t=[];return Pi(n.children,(r,o)=>{o===Yt&&(t=t.concat(e(r,o)))}),Pi(n.children,(r,o)=>{o!==Yt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Yt?[T0(n.children[Yt],!1)]:[`${o}:${T0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yt]?`${XI(n)}/${t[0]}`:`${XI(n)}/(${t.join("//")})`}}function AS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eD(n){return AS(n).replace(/%3B/gi,";")}function tT(n){return AS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tD(n){return decodeURIComponent(n)}function SS(n){return tD(n.replace(/\+/g,"%20"))}function MS(n){return`${tT(n.path)}${function CR(n){return Object.keys(n).map(e=>`;${tT(e)}=${tT(n[e])}`).join("")}(n.parameters)}`}const AR=/^[^\/()?;=#]+/;function nD(n){const e=n.match(AR);return e?e[0]:""}const SR=/^[^=?&#]+/,xR=/^[^&#]+/;class NR{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Yt]=new rn(e,t)),r}parseSegment(){const e=nD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new C0(tD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=nD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=nD(this.remaining);o&&(r=o,this.capture(r))}e[tD(t)]=tD(r)}parseQueryParam(e){const t=function MR(n){const e=n.match(SR);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function RR(n){const e=n.match(xR);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=SS(t),l=SS(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=nD(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=Yt);const d=this.parseChildren();t[l]=1===Object.keys(d).length?d[Yt]:new rn([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class xS{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=nT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=rT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return rT(e,this._root).map(t=>t.value)}}function nT(n,e){if(n===e.value)return e;for(const t of e.children){const r=nT(n,t);if(r)return r}return null}function rT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=rT(n,t);if(r.length)return r.unshift(e),r}return[]}class Dc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ry(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class RS extends xS{constructor(e,t){super(e),this.snapshot=t,iT(this,e)}toString(){return this.snapshot.toString()}}function NS(n,e){const t=function OR(n,e){const d=new rD([],{},{},"",{},Yt,e,null,n.root,-1,{});return new PS("",new Dc(d,[]))}(n,e),r=new Ba([new C0("",{})]),o=new Ba({}),l=new Ba({}),d=new Ba({}),m=new Ba(""),w=new iy(r,o,d,m,l,Yt,e,t.root);return w.snapshot=t.root,new RS(new Dc(w,[]),t)}class iy{constructor(e,t,r,o,l,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>ny(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>ny(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OS(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],l=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(l.component)break;r--}}return function PR(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class rD{constructor(e,t,r,o,l,d,m,w,C,x,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=x,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ny(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ny(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class PS extends xS{constructor(e,t){super(t),this.url=e,iT(this,t)}toString(){return kS(this._root)}}function iT(n,e){e.value._routerState=n,e.children.forEach(t=>iT(n,t))}function kS(n){const e=n.children.length>0?` { ${n.children.map(kS).join(", ")} } `:"";return`${n.value}${e}`}function sT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,al(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),al(e.params,t.params)||n.params.next(t.params),function mR(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!al(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),al(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function oT(n,e){const t=al(n.params,e.params)&&function wR(n,e){return Op(n,e)&&n.every((t,r)=>al(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||oT(n.parent,e.parent))}function A0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function FR(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return A0(n,r,o);return A0(n,r)})}(n,e,t);return new Dc(r,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const d=l.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>A0(n,m)),d}}const r=function LR(n){return new iy(new Ba(n.url),new Ba(n.params),new Ba(n.queryParams),new Ba(n.fragment),new Ba(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>A0(n,l));return new Dc(r,o)}}function iD(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function S0(n){return"object"==typeof n&&null!=n&&n.outlets}function aT(n,e,t,r,o){let l={};if(r&&Pi(r,(m,w)=>{l[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new Np(t,l,o);const d=FS(n,e,t);return new Np(d,l,o)}function FS(n,e,t){const r={};return Pi(n.children,(o,l)=>{r[l]=o===e?t:FS(o,e,t)}),new rn(n.segments,r)}class LS{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&iD(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(S0);if(o&&o!==vS(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class uT{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function VS(n,e,t){if(n||(n=new rn([],{})),0===n.segments.length&&n.hasChildren())return sD(n,e,t);const r=function HR(n,e,t){let r=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return l;const d=n.segments[o],m=t[r];if(S0(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!BS(w,C,d))return l;r+=2}else{if(!BS(w,{},d))return l;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new rn(n.segments.slice(0,r.pathIndex),{});return l.children[Yt]=new rn(n.segments.slice(r.pathIndex),n.children),sD(l,0,o)}return r.match&&0===o.length?new rn(n.segments,{}):r.match&&!n.hasChildren()?lT(n,e,t):r.match?sD(n,0,o):lT(n,e,t)}function sD(n,e,t){if(0===t.length)return new rn(n.segments,{});{const r=function $R(n){return S0(n[0])?n[0].outlets:{[Yt]:n}}(t),o={};return Pi(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[d]=VS(n.children[d],e,l))}),Pi(n.children,(l,d)=>{void 0===r[d]&&(o[d]=l)}),new rn(n.segments,o)}}function lT(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(S0(l)){const w=GR(l.outlets);return new rn(r,w)}if(0===o&&iD(t[0])){r.push(new C0(n.segments[e].path,US(t[0]))),o++;continue}const d=S0(l)?l.outlets[Yt]:`${l}`,m=o<t.length-1?t[o+1]:null;d&&m&&iD(m)?(r.push(new C0(d,US(m))),o+=2):(r.push(new C0(d,{})),o++)}return new rn(r,{})}function GR(n){const e={};return Pi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=lT(new rn([],{}),0,t))}),e}function US(n){const e={};return Pi(n,(t,r)=>e[r]=`${t}`),e}function BS(n,e,t){return n==t.path&&al(e,t.parameters)}class zR{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),sT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ry(t);e.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,o[d],r),delete o[d]}),Pi(o,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=ry(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=ry(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ry(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],r),this.forwardEvent(new hR(l.value.snapshot))}),e.children.length&&this.forwardEvent(new cR(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(sT(o),o===l)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),sT(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function WR(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class cT{constructor(e,t){this.routes=e,this.module=t}}function ih(n){return"function"==typeof n}function Pp(n){return n instanceof Np}const M0=Symbol("INITIAL_VALUE");function x0(){return Gn(n=>function Jx(...n){const e=(0,Ii.yG)(n),t=(0,Ii.jO)(n),{args:r,keys:o}=ts(n);if(0===r.length)return(0,xn.D)([],e);const l=new Tn.y(function Xx(n,e,t=_a.y){return r=>{uS(e,()=>{const{length:o}=n,l=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)uS(e,()=>{const C=(0,xn.D)(n[w],e);let x=!1;C.subscribe((0,jn.x)(r,N=>{l[w]=N,x||(x=!0,m--),m||r.next(t(l.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>hu(o,d):_a.y));return t?l.pipe(dh(t)):l}(n.map(e=>e.pipe(sd(1),ef(M0)))).pipe(wa((e,t)=>{let r=!1;return t.reduce((o,l,d)=>o!==M0?o:(l===M0&&(r=!0),r||!1!==l&&d!==t.length-1&&!Pp(l)?o:l),e)},M0),os(e=>e!==M0),(0,It.U)(e=>Pp(e)?e:!0===e),sd(1)))}class XR{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new R0,this.attachRef=null}}class R0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new XR,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let dT=(()=>{class n{constructor(t,r,o,l,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=l||Yt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new eN(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(R0),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class eN{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===iy?this.route:e===R0?this.childContexts:this.parent.get(e,t)}}let jS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[dT],encapsulation:2}),n})();function $S(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];tN(r,nN(e,r))}}function tN(n,e){n.children&&$S(n.children,e)}function nN(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function hT(n){const e=n.children&&n.children.map(hT),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Yt&&(t.component=jS),t}function Wo(n){return n.outlet||Yt}function HS(n,e){const t=n.filter(r=>Wo(r)===e);return t.push(...n.filter(r=>Wo(r)!==e)),t}const GS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oD(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},GS):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const l=(e.matcher||gR)(t,n,e);if(!l)return Object.assign({},GS);const d={};Pi(l.posParams,(w,C)=>{d[C]=w.path});const m=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,remainingSegments:t.slice(l.consumed.length),parameters:m,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function aD(n,e,t,r,o="corrected"){if(t.length>0&&function sN(n,e,t){return t.some(r=>uD(n,e,r)&&Wo(r)!==Yt)}(n,t,r)){const d=new rn(e,function iN(n,e,t,r){const o={};o[Yt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Wo(l)!==Yt){const d=new rn([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Wo(l)]=d}return o}(n,e,r,new rn(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function oN(n,e,t){return t.some(r=>uD(n,e,r))}(n,t,r)){const d=new rn(n.segments,function rN(n,e,t,r,o,l){const d={};for(const m of r)if(uD(n,t,m)&&!o[Wo(m)]){const w=new rn([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===l?n.segments.length:e.length,d[Wo(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const l=new rn(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function uD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function qS(n,e,t,r){return!!(Wo(n)===r||r!==Yt&&uD(e,t,n))&&("**"===n.path||oD(e,n,t).matched)}function zS(n,e,t){return 0===e.length&&!n.children[t]}class lD{constructor(e){this.segmentGroup=e||null}}class WS{constructor(e){this.urlTree=e}}function N0(n){return QI(new lD(n))}function KS(n){return QI(new WS(n))}function aN(n){return QI(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class cN{constructor(e,t,r,o,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=aD(this.urlTree.root,[],[],this.config).segmentGroup,t=new rn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Yt).pipe((0,It.U)(l=>this.createUrlTree(fT(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(rh(l=>{if(l instanceof WS)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof lD?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Yt).pipe((0,It.U)(o=>this.createUrlTree(fT(o),e.queryParams,e.fragment))).pipe(rh(o=>{throw o instanceof lD?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new rn([],{[Yt]:e}):e;return new Np(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,It.U)(l=>new rn([],l))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const l of Object.keys(r.children))"primary"===l?o.unshift(l):o.push(l);return(0,xn.D)(o).pipe(D0(l=>{const d=r.children[l],m=HS(t,l);return this.expandSegmentGroup(e,m,d,l).pipe((0,It.U)(w=>({segment:w,outlet:l})))}),wa((l,d)=>(l[d.outlet]=d.segment,l),{}),function tR(n,e){const t=arguments.length>=2;return r=>r.pipe(n?os((o,l)=>n(o,l,r)):_a.y,JC(1),t?Gh(e):qh(()=>new Ai))}())}expandSegment(e,t,r,o,l,d){return(0,xn.D)(r).pipe(D0(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,l,d).pipe(rh(C=>{if(C instanceof lD)return vt(null);throw C}))),uo(m=>!!m),rh((m,w)=>{if(m instanceof Ai||"EmptyError"===m.name)return zS(t,o,l)?vt(new rn([],{})):N0(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,l,d,m){return qS(o,t,l,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d):N0(t):N0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?KS(l):this.lineralizeSegments(r,l).pipe((0,qi.z)(d=>{const m=new rn(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:x}=oD(t,o,l);if(!m)return N0(t);const N=this.applyRedirectCommands(w,o.redirectTo,x);return o.redirectTo.startsWith("/")?KS(N):this.lineralizeSegments(o,N).pipe((0,qi.z)(H=>this.expandSegment(e,t,r,H.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?vt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,It.U)(N=>(r._loadedConfig=N,new rn(o,{})))):vt(new rn(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=oD(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,qi.z)(x=>{const N=x.module,H=x.routes,{segmentGroup:J,slicedSegments:ce}=aD(t,m,w,H),Le=new rn(J.segments,J.children);if(0===ce.length&&Le.hasChildren())return this.expandChildren(N,H,Le).pipe((0,It.U)(tn=>new rn(m,tn)));if(0===H.length&&0===ce.length)return vt(new rn(m,{}));const st=Wo(r)===l;return this.expandSegment(N,Le,H,ce,st?Yt:l,!0).pipe((0,It.U)(Jt=>new rn(m.concat(Jt.segments),Jt.children)))})):N0(t)}getChildConfig(e,t,r){return t.children?vt(new cT(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?vt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,qi.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,It.U)(l=>(t._loadedConfig=l,l))):function uN(n){return QI(eT(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):vt(new cT([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return vt(!0);const l=o.map(d=>{const m=e.get(d);let w;if(function ZR(n){return n&&ih(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!ih(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return ul(w)});return vt(l).pipe(x0(),(0,co.b)(d=>{if(!Pp(d))return;const m=eT(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,It.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return vt(r);if(o.numberOfChildren>1||!o.children[Yt])return aN(e.redirectTo);o=o.children[Yt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const l=this.createSegmentGroup(e,t.root,r,o);return new Np(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Pi(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[l]=t[m]}else r[l]=o}),r}createSegmentGroup(e,t,r,o){const l=this.createSegments(e,t.segments,r,o);let d={};return Pi(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new rn(l,d)}createSegments(e,t,r,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function fT(n){const e={};for(const r of Object.keys(n.children)){const l=fT(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function dN(n){if(1===n.numberOfChildren&&n.children[Yt]){const e=n.children[Yt];return new rn(n.segments.concat(e.segments),e.children)}return n}(new rn(n.segments,e))}class ZS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cD{constructor(e,t){this.component=e,this.route=t}}function fN(n,e,t){const r=n._root;return O0(r,e?e._root:null,t,[r.value])}function dD(n,e,t){const r=function gN(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function O0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=ry(e);return n.children.forEach(d=>{(function mN(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const w=function yN(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Op(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Op(n.url,e.url)||!al(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oT(n,e)||!al(n.queryParams,e.queryParams);default:return!oT(n,e)}}(d,l,l.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new ZS(r)):(l.data=d.data,l._resolvedData=d._resolvedData),O0(n,e,l.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new cD(m.outlet.component,d))}else d&&P0(e,m,o),o.canActivateChecks.push(new ZS(r)),O0(n,null,l.component?m?m.children:null:t,r,o)})(d,l[d.value.outlet],t,r.concat([d.value]),o),delete l[d.value.outlet]}),Pi(l,(d,m)=>P0(d,t.getContext(m),o)),o}function P0(n,e,t){const r=ry(n),o=n.value;Pi(r,(l,d)=>{P0(l,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new cD(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class TN{}function YS(n){return new Tn.y(e=>e.error(n))}class SN{constructor(e,t,r,o,l,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const e=aD(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Yt);if(null===t)return null;const r=new rD([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Yt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Dc(r,t),l=new PS(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=OS(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const d=t.children[l],m=HS(e,l),w=this.processSegmentGroup(m,d,l);if(null===w)return null;r.push(...w)}const o=QS(r);return function MN(n){n.sort((e,t)=>e.value.outlet===Yt?-1:t.value.outlet===Yt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const l of e){const d=this.processSegmentAgainstRoute(l,t,r,o);if(null!==d)return d}return zS(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!qS(e,t,r,o))return null;let l,d=[],m=[];if("**"===e.path){const J=r.length>0?vS(r).parameters:{};l=new rD(r,J,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eM(e),Wo(e),e.component,e,JS(t),XS(t)+r.length,tM(e))}else{const J=oD(t,e,r);if(!J.matched)return null;d=J.consumedSegments,m=J.remainingSegments,l=new rD(d,J.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eM(e),Wo(e),e.component,e,JS(t),XS(t)+d.length,tM(e))}const w=function xN(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:x}=aD(t,d,m,w.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);if(0===x.length&&C.hasChildren()){const J=this.processChildren(w,C);return null===J?null:[new Dc(l,J)]}if(0===w.length&&0===x.length)return[new Dc(l,[])];const N=Wo(e)===o,H=this.processSegment(w,C,x,N?Yt:o);return null===H?null:[new Dc(l,H)]}}function RN(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function QS(n){const e=[],t=new Set;for(const r of n){if(!RN(r)){e.push(r);continue}const o=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=QS(r.children);e.push(new Dc(r.value,o))}return e.filter(r=>!t.has(r))}function JS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function XS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function eM(n){return n.data||{}}function tM(n){return n.resolve||{}}function nM(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function pT(n){return Gn(e=>{const t=n(e);return t?(0,xn.D)(t).pipe((0,It.U)(()=>e)):vt(e)})}class UN extends class VN{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const gT=new g.OlP("ROUTES");class rM{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,It.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=l.create(e);return new cT(_S(d.injector.get(gT,void 0,g.XFs.Self|g.XFs.Optional)).map(hT),d)}),rh(l=>{throw t._loader$=void 0,l}));return t._loader$=new eR(o,()=>new Ns.x).pipe(dS()),t._loader$}loadModuleFactory(e){return ul(e()).pipe((0,qi.z)(t=>t instanceof g.YKP?vt(t):(0,xn.D)(this.compiler.compileModuleAsync(t))))}}class jN{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function $N(n){throw n}function HN(n,e,t){return e.parse("/")}function iM(n,e){return vt(null)}const GN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ho=(()=>{class n{constructor(t,r,o,l,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=l,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ns.x,this.errorHandler=$N,this.malformedUriErrorHandler=HN,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:iM,afterPreactivation:iM},this.urlHandlingStrategy=new jN,this.routeReuseStrategy=new UN,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const N=d.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function yR(){return new Np(new rn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new rM(d,m,H=>this.triggerEvent(new fS(H)),H=>this.triggerEvent(new pS(H))),this.routerState=NS(this.currentUrlTree,this.rootComponentType),this.transitions=new Ba({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(os(o=>0!==o.id),(0,It.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Gn(o=>{let l=!1,d=!1;return vt(o).pipe((0,co.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Gn(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return sM(m.source)&&(this.browserUrlTree=m.extractedUrl),vt(m).pipe(Gn(N=>{const H=this.transitions.getValue();return r.next(new XC(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),H!==this.transitions.getValue()?ko.E:Promise.resolve(N)}),function hN(n,e,t,r){return Gn(o=>function lN(n,e,t,r,o){return new cN(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,It.U)(l=>Object.assign(Object.assign({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,co.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function NN(n,e,t,r,o){return(0,qi.z)(l=>function AN(n,e,t,r,o="emptyOnly",l="legacy"){try{const d=new SN(n,e,t,r,o,l).recognize();return null===d?YS(new TN):vt(d)}catch(d){return YS(d)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,o).pipe((0,It.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,co.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const J=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(J,N)}this.browserUrlTree=N.urlAfterRedirects}const H=new iR(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(H)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:J,source:ce,restoredState:Le,extras:st}=m,Qt=new XC(H,this.serializeUrl(J),ce,Le);r.next(Qt);const Jt=NS(J,this.rootComponentType).snapshot;return vt(Object.assign(Object.assign({},m),{targetSnapshot:Jt,urlAfterRedirects:J,extras:Object.assign(Object.assign({},st),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),ko.E}),pT(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:J}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!J})}),(0,co.b)(m=>{const w=new sR(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,It.U)(m=>Object.assign(Object.assign({},m),{guards:fN(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function _N(n,e){return(0,qi.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:d}}=t;return 0===d.length&&0===l.length?vt(Object.assign(Object.assign({},t),{guardsResult:!0})):function vN(n,e,t,r){return(0,xn.D)(n).pipe((0,qi.z)(o=>function CN(n,e,t,r,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?vt(l.map(m=>{const w=dD(m,e,o);let C;if(function JR(n){return n&&ih(n.canDeactivate)}(w))C=ul(w.canDeactivate(n,e,t,r));else{if(!ih(w))throw new Error("Invalid CanDeactivate guard");C=ul(w(n,e,t,r))}return C.pipe(uo())})).pipe(x0()):vt(!0)}(o.component,o.route,t,e,r)),uo(o=>!0!==o,!0))}(d,r,o,n).pipe((0,qi.z)(m=>m&&function KR(n){return"boolean"==typeof n}(m)?function EN(n,e,t,r){return(0,xn.D)(e).pipe(D0(o=>qy(function IN(n,e){return null!==n&&e&&e(new lR(n)),vt(!0)}(o.route.parent,r),function wN(n,e){return null!==n&&e&&e(new dR(n)),vt(!0)}(o.route,r),function bN(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(d=>function pN(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>lS(()=>vt(d.guards.map(w=>{const C=dD(w,d.node,t);let x;if(function QR(n){return n&&ih(n.canActivateChild)}(C))x=ul(C.canActivateChild(r,n));else{if(!ih(C))throw new Error("Invalid CanActivateChild guard");x=ul(C(r,n))}return x.pipe(uo())})).pipe(x0())));return vt(l).pipe(x0())}(n,o.path,t),function DN(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return vt(!0);const o=r.map(l=>lS(()=>{const d=dD(l,e,t);let m;if(function YR(n){return n&&ih(n.canActivate)}(d))m=ul(d.canActivate(e,n));else{if(!ih(d))throw new Error("Invalid CanActivate guard");m=ul(d(e,n))}return m.pipe(uo())}));return vt(o).pipe(x0())}(n,o.route,t))),uo(o=>!0!==o,!0))}(r,l,n,e):vt(m)),(0,It.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,co.b)(m=>{if(Pp(m.guardsResult)){const C=eT(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new oR(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),os(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),pT(m=>{if(m.guards.canActivateChecks.length)return vt(m).pipe((0,co.b)(w=>{const C=new aR(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Gn(w=>{let C=!1;return vt(w).pipe(function ON(n,e){return(0,qi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return vt(t);let l=0;return(0,xn.D)(o).pipe(D0(d=>function PN(n,e,t,r){return function kN(n,e,t,r){const o=nM(n);if(0===o.length)return vt({});const l={};return(0,xn.D)(o).pipe((0,qi.z)(d=>function FN(n,e,t,r){const o=dD(n,e,r);return ul(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,co.b)(m=>{l[d]=m}))),JC(1),(0,qi.z)(()=>nM(l).length===o.length?vt(l):ko.E))}(n._resolve,n,e,r).pipe((0,It.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),OS(n,t).resolve),null)))}(d.route,r,n,e)),(0,co.b)(()=>l++),JC(1),(0,qi.z)(d=>l===o.length?vt(t):ko.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,co.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,co.b)(w=>{const C=new uR(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),pT(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:J}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!J})}),(0,It.U)(m=>{const w=function kR(n,e,t){const r=A0(n,e._root,t?t._root:void 0);return new RS(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,co.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,It.U)(r=>(new zR(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,co.b)({next(){l=!0},complete(){l=!0}}),function nR(n){return(0,Cr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;l||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),rh(m=>{if(d=!0,function pR(n){return n&&n[mS]}(m)){const w=Pp(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new hS(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sM(o.source)};this.scheduleNavigation(x,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new rR(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return ko.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const l={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(l.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){$S(t),this.config=t.map(hT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:l,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,x=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=l||null}return null!==N&&(N=this.removeEmptyProps(N)),function VR(n,e,t,r,o){if(0===t.length)return aT(e.root,e.root,e.root,r,o);const l=function UR(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new LS(!0,0,n);let e=0,t=!1;const r=n.reduce((o,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const m={};return Pi(l.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===d?(l.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,l]},[]);return new LS(t,e,r)}(t);if(l.toRoot())return aT(e.root,e.root,new rn([],{}),r,o);const d=function BR(n,e,t){if(n.isAbsolute)return new uT(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new uT(l,l===e.root,0)}const r=iD(n.commands[0])?0:1;return function jR(n,e,t){let r=n,o=e,l=t;for(;l>o;){if(l-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new uT(r,!1,o-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),m=d.processChildren?sD(d.segmentGroup,d.index,l.commands):VS(d.segmentGroup,d.index,l.commands);return aT(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Pp(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function zN(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},GN):!1===r?Object.assign({},qN):r,Pp(t))return wS(this.currentUrlTree,t,o);const l=this.parseUrl(t);return wS(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const l=t[o];return null!=l&&(r[o]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new b0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,l,d){var m,w;if(this.disposed)return Promise.resolve(!1);let C,x,N;d?(C=d.resolve,x=d.reject,N=d.promise):N=new Promise((ce,Le)=>{C=ce,x=Le});const H=++this.navigationId;let J;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),J=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):J=0,this.setTransition({id:H,targetPageId:J,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:C,reject:x,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ce=>Promise.reject(ce))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,r=!1){var o,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new hS(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function sM(n){return"imperative"!==n}class oM{}class aM{preload(e,t){return vt(null)}}let uM=(()=>{class n{constructor(t,r,o,l){this.router=t,this.injector=o,this.preloadingStrategy=l,this.loader=new rM(o,r,w=>t.triggerEvent(new fS(w)),w=>t.triggerEvent(new pS(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(os(t=>t instanceof b0),D0(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children));return(0,xn.D)(o).pipe((0,Tg.J)(),(0,It.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?vt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,qi.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ho),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(oM))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),_T=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof XC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof b0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gS&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new gS(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const kp=new g.OlP("ROUTER_CONFIGURATION"),lM=new g.OlP("ROUTER_FORROOT_GUARD"),YN=[ye,{provide:CS,useClass:TS},{provide:ho,useFactory:function tO(n,e,t,r,o,l,d={},m,w){const C=new ho(null,n,e,t,r,o,_S(l));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function nO(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(x=>{var N,H;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(H=console.groupEnd)||void 0===H||H.call(console)}),C},deps:[CS,R0,ye,g.zs3,g.Sil,gT,kp,[class BN{},new g.FiY],[class LN{},new g.FiY]]},R0,{provide:iy,useFactory:function rO(n){return n.routerState.root},deps:[ho]},uM,aM,class ZN{preload(e,t){return t().pipe(rh(()=>vt(null)))}},{provide:kp,useValue:{enableTracing:!1}}];function QN(){return new g.PXZ("Router",ho)}let cM=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[YN,dM(t),{provide:lM,useFactory:eO,deps:[[ho,new g.FiY,new g.tp0]]},{provide:kp,useValue:r||{}},{provide:me,useFactory:XN,deps:[he,[new g.tBr(Ye),new g.FiY],kp]},{provide:_T,useFactory:JN,deps:[ho,Ya,kp]},{provide:oM,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:aM},{provide:g.PXZ,multi:!0,useFactory:QN},[vT,{provide:g.ip1,multi:!0,useFactory:iO,deps:[vT]},{provide:hM,useFactory:sO,deps:[vT]},{provide:g.tb,multi:!0,useExisting:hM}]]}}static forChild(t){return{ngModule:n,providers:[dM(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(lM,8),g.LFG(ho,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function JN(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new _T(n,e,t)}function XN(n,e,t={}){return t.useHash?new we(n,e):new We(n,e)}function eO(n){return"guarded"}function dM(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:gT,multi:!0,useValue:n}]}let vT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ns.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),l=this.injector.get(ho),d=this.injector.get(kp);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?vt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(kp),o=this.injector.get(uM),l=this.injector.get(_T),d=this.injector.get(ho),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),l.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function iO(n){return n.appInitializer.bind(n)}function sO(n){return n.bootstrapListener.bind(n)}const hM=new g.OlP("Router Initializer");let aO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){1&t&&(g.TgZ(0,"h1"),g._uU(1,"Angular 13 + Firebase (Login Only) + Vercel"),g.qZA(),g._UZ(2,"router-outlet"))},directives:[dT],encapsulation:2}),n})(),uO=(()=>{class n{constructor(t){this.afAuth=t}login(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}logout(){return this.afAuth.signOut()}user$(){return this.afAuth.authState}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Cg))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lO(n,e){if(1&n&&(g.TgZ(0,"p"),g._uU(1),g.qZA()),2&n){const t=g.oxw();g.xp6(1),g.Oqu(t.message)}}const cO=[{path:"",component:(()=>{class n{constructor(t){this.auth=t,this.email="",this.password="",this.message=""}onLogin(){var t=this;return(0,q.Z)(function*(){t.message="";try{yield t.auth.login(t.email.trim(),t.password),t.message="Logged in successfully \u2705"}catch(r){t.message=(null==r?void 0:r.message)||"Login failed",console.error(r)}})()}onLogout(){var t=this;return(0,q.Z)(function*(){yield t.auth.logout(),t.message="Logged out \u2705"})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(uO))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:3,consts:[[1,"card"],["type","email","placeholder","you@example.com",3,"ngModel","ngModelChange"],["type","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModel","ngModelChange"],[1,"actions"],[3,"click"],[4,"ngIf"],[1,"hint"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"h2"),g._uU(2,"Login"),g.qZA(),g.TgZ(3,"label"),g._uU(4,"Email"),g.qZA(),g.TgZ(5,"input",1),g.NdJ("ngModelChange",function(l){return r.email=l}),g.qZA(),g.TgZ(6,"label"),g._uU(7,"Password"),g.qZA(),g.TgZ(8,"input",2),g.NdJ("ngModelChange",function(l){return r.password=l}),g.qZA(),g.TgZ(9,"div",3)(10,"button",4),g.NdJ("click",function(){return r.onLogin()}),g._uU(11,"Login"),g.qZA(),g.TgZ(12,"button",4),g.NdJ("click",function(){return r.onLogout()}),g._uU(13,"Logout"),g.qZA()(),g.YNc(14,lO,2,1,"p",5),g.TgZ(15,"p",6),g._uU(16,"Create a user in Firebase Authentication \u2192 Users (Email/Password) to test."),g.qZA()()),2&t&&(g.xp6(5),g.Q6J("ngModel",r.email),g.xp6(3),g.Q6J("ngModel",r.password),g.xp6(6),g.Q6J("ngIf",r.message))},directives:[bo,bi,Zc,si],styles:[".card[_ngcontent-%COMP%]{max-width:360px;padding:16px;border:1px solid #e5e7eb;border-radius:12px;box-shadow:0 2px 10px #0000000d}label[_ngcontent-%COMP%]{font-size:.9rem;color:#374151;margin-top:.5rem;display:block}.actions[_ngcontent-%COMP%]{margin-top:.75rem}button[_ngcontent-%COMP%]{padding:.5rem .75rem;border:1px solid #e5e7eb;border-radius:8px;background:#f9fafb;cursor:pointer}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:.5rem}.hint[_ngcontent-%COMP%]{color:#6b7280;font-size:.85rem;margin-top:.75rem}"]}),n})()},{path:"**",redirectTo:""}];let dO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[cM.forRoot(cO,{initialNavigation:"enabledBlocking"})],cM]}),n})();const hO={apiKey:"AIzaSyAdoQAurH1lK2IMOqVdBZvWNin0uRmSLsY",authDomain:"kent-3b295.firebaseapp.com",projectId:"kent-3b295",storageBucket:"kent-3b295.firebasestorage.app",messagingSenderId:"1053046070991",appId:"1:1053046070991:web:40ff295f28bd90072ce1ba",measurementId:"G-CZPZH8HW98"};let fO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[aO]}),n.\u0275inj=g.cJS({providers:[],imports:[[sa,Uh,dO,is.hO.initializeApp(hO),Mu,Yx]]}),n})();yl().bootstrapModule(fO).catch(n=>console.error(n))},5867:(at,Ae,k)=>{k.d(Ae,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(9681);(0,g.registerVersion)("firebase","9.6.11","app")},127:(at,Ae,k)=>{k.d(Ae,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.6.11","app-compat")},820:(at,Ae,k)=>{k.r(Ae);var g=k(5861),Y=k(3942),O=k(2090),oe=k(9681),X=k(7582),ge=k(1877),ie=k(4859);const xe=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ke=function De(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new ge.Yd("@firebase/auth");function We(y,...h){Ye.logLevel<=ge.in.ERROR&&Ye.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function we(y,...h){throw Be(y,...h)}function ye(y,...h){return Be(y,...h)}function Ee(y,h,p){const v=Object.assign(Object.assign({},ke()),{[h]:p});return new O.LL("auth","Firebase",v).create(h,{appName:y.name})}function Ve(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&we(y,"argument-error"),Ee(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return me.create(y,...h)}function re(y,h,...p){if(!y)throw Be(h,...p)}function Ge(y){const h="INTERNAL ASSERTION FAILED: "+y;throw We(h),new Error(h)}function pt(y,h){y||Ge(h)}const Pt=new Map;function rt(y){pt(y instanceof Function,"Expected a class definition");let h=Pt.get(y);return h?(pt(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Pt.set(y,h),h)}function ki(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Wi(){return"http:"===ni()||"https:"===ni()}function ni(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class K{constructor(h,p){this.shortDelay=h,this.longDelay=p,pt(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Nn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wi()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ne(y,h){pt(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class pe{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Me=new K(3e4,6e4);function _e(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Pe(y,h,p,v){return wt.apply(this,arguments)}function wt(){return(wt=(0,g.Z)(function*(y,h,p,v,A={}){return an(y,A,(0,g.Z)(function*(){let R={},G={};v&&("GET"===h?G=v:R={body:JSON.stringify(v)});const te=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),pe.fetch()(On(y,y.config.apiHost,p,te),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function an(y,h,p){return ct.apply(this,arguments)}function ct(){return(ct=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},ee),h);try{const A=new qt(y),R=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw In(y,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const te=R.ok?G.errorMessage:G.error.message,[Fe,ot]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw In(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Fe)throw In(y,"email-already-in-use",G);const Mt=v[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(ot)throw Ee(y,Mt,ot);we(y,Mt)}}catch(A){if(A instanceof O.ZR)throw A;we(y,"network-request-failed")}})).apply(this,arguments)}function Lt(y,h,p,v){return cn.apply(this,arguments)}function cn(){return(cn=(0,g.Z)(function*(y,h,p,v,A={}){const R=yield Pe(y,h,p,v,A);return"mfaPendingCredential"in R&&we(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function On(y,h,p,v){const A=`${h}${p}?${v}`;return y.config.emulator?ne(y.config,A):`${y.config.apiScheme}://${A}`}class qt{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(ye(this.auth,"network-request-failed")),Me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function In(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const A=ye(y,h,v);return A.customData._tokenResponse=p,A}function Dn(){return(Dn=(0,g.Z)(function*(y,h){return Pe(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function mn(y,h){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,g.Z)(function*(y,h){return Pe(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ri(y,h){return $s.apply(this,arguments)}function $s(){return($s=(0,g.Z)(function*(y,h){return Pe(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function wn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Ko(){return(Ko=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(h),A=it(v);re(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,G=null==R?void 0:R.sign_in_provider;return{claims:A,token:v,authTime:wn(zt(A.auth_time)),issuedAtTime:wn(zt(A.iat)),expirationTime:wn(zt(A.exp)),signInProvider:G||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function zt(y){return 1e3*Number(y)}function it(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return We("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(p);return A?JSON.parse(A):(We("Failed to decode base64 JWT payload"),null)}catch(A){return We("Caught error parsing JWT payload as JSON",A),null}}function ur(y,h){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof O.ZR&&Ut(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Ut({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Hs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class vr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=wn(this.lastLoginAt),this.creationTime=wn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function lr(y){return ut.apply(this,arguments)}function ut(){return(ut=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),A=yield ur(y,ri(p,{idToken:v}));re(null==A?void 0:A.users.length,p,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const G=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?Ce(R.providerUserInfo):[],te=Ke(y.providerData,G),Mt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==te?void 0:te.length)),q={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:te,metadata:new vr(R.createdAt,R.lastLoginAt),isAnonymous:Mt};Object.assign(y,q)})).apply(this,arguments)}function kt(){return(kt=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield lr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ke(y,h){return[...y.filter(v=>!h.some(A=>A.providerId===v.providerId)),...h]}function Ce(y){return y.map(h=>{var{providerId:p}=h,v=(0,X._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function lt(){return(lt=(0,g.Z)(function*(y,h){const p=yield an(y,{},(0,g.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,G=On(y,A,"/v1/token",`key=${R}`),te=yield y._getAdditionalHeaders();return te["Content-Type"]="application/x-www-form-urlencoded",pe.fetch()(G,{method:"POST",headers:te,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){re(h.idToken,"internal-error"),re(void 0!==h.idToken,"internal-error"),re(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function yt(y){const h=it(y);return re(h,"internal-error"),re(void 0!==h.exp,"internal-error"),re(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h){var p=this;return(0,g.Z)(function*(v,A=!1){return re(!p.accessToken||p.refreshToken,v,"user-token-expired"),A||!p.accessToken||p.isExpired?p.refreshToken?(yield p.refresh(v,p.refreshToken),p.accessToken):null:p.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:G}=yield function Qe(y,h){return lt.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(A,R,Number(G))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:A,expirationTime:R}=p,G=new Vt;return v&&(re("string"==typeof v,"internal-error",{appName:h}),G.refreshToken=v),A&&(re("string"==typeof A,"internal-error",{appName:h}),G.accessToken=A),R&&(re("number"==typeof R,"internal-error",{appName:h}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Vt,this.toJSON())}_performRefresh(){return Ge("not implemented")}}function Ot(y,h){re("string"==typeof y||void 0===y,"internal-error",{appName:h})}class U{constructor(h){var{uid:p,auth:v,stsTokenManager:A}=h,R=(0,X._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new vr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield ur(p,p.stsTokenManager.getToken(p.auth,h));return re(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function fs(y){return Ko.apply(this,arguments)}(this,h)}reload(){return function Er(y){return kt.apply(this,arguments)}(this)}_assign(h){this!==h&&(re(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new U(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h){var p=this;return(0,g.Z)(function*(v,A=!1){let R=!1;v.idToken&&v.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(v),R=!0),A&&(yield lr(p)),yield p.auth._persistUserIfCurrent(p),R&&p.auth._notifyListenersIfCurrent(p)}).apply(this,arguments)}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield ur(h,function Ze(y,h){return Dn.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,A,R,G,te,Fe,ot,Mt;const q=null!==(v=p.displayName)&&void 0!==v?v:void 0,Ht=null!==(A=p.email)&&void 0!==A?A:void 0,Yr=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,xt=null!==(G=p.photoURL)&&void 0!==G?G:void 0,Qr=null!==(te=p.tenantId)&&void 0!==te?te:void 0,Su=null!==(Fe=p._redirectEventId)&&void 0!==Fe?Fe:void 0,ad=null!==(ot=p.createdAt)&&void 0!==ot?ot:void 0,wy=null!==(Mt=p.lastLoginAt)&&void 0!==Mt?Mt:void 0,{uid:sr,emailVerified:Si,isAnonymous:Hl,providerData:Gl,stsTokenManager:lg}=p;re(sr&&lg,h,"internal-error");const Iy=Vt.fromJSON(this.name,lg);re("string"==typeof sr,h,"internal-error"),Ot(q,h.name),Ot(Ht,h.name),re("boolean"==typeof Si,h,"internal-error"),re("boolean"==typeof Hl,h,"internal-error"),Ot(Yr,h.name),Ot(xt,h.name),Ot(Qr,h.name),Ot(Su,h.name),Ot(ad,h.name),Ot(wy,h.name);const ud=new U({uid:sr,auth:h,email:Ht,emailVerified:Si,displayName:q,isAnonymous:Hl,photoURL:xt,phoneNumber:Yr,tenantId:Qr,stsTokenManager:Iy,createdAt:ad,lastLoginAt:wy});return Gl&&Array.isArray(Gl)&&(ud.providerData=Gl.map(ql=>Object.assign({},ql))),Su&&(ud._redirectEventId=Su),ud}static _fromIdTokenResponse(h,p){return(0,g.Z)(function*(v,A,R=!1){const G=new Vt;G.updateFromServerResponse(A);const te=new U({uid:A.localId,auth:v,stsTokenManager:G,isAnonymous:R});return yield lr(te),te}).apply(this,arguments)}}const $=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var A=this;return(0,g.Z)(function*(){A.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const A=v.storage[p];return void 0===A?null:A})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function ae(y,h,p){return`firebase:${y}:${h}:${p}`}class Z{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:A,name:R}=this.auth;this.fullUserKey=ae(this.userKey,A.apiKey,R),this.fullPersistenceKey=ae("persistence",A.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?U._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p){return(0,g.Z)(function*(v,A,R="authUser"){if(!A.length)return new Z(rt($),v,R);const G=(yield Promise.all(A.map(function(){var q=(0,g.Z)(function*(Ht){if(yield Ht._isAvailable())return Ht});return function(Ht){return q.apply(this,arguments)}}()))).filter(q=>q);let te=G[0]||rt($);const Fe=ae(R,v.config.apiKey,v.name);let ot=null;for(const q of A)try{const Ht=yield q._get(Fe);if(Ht){const Yr=U._fromJSON(v,Ht);q!==te&&(ot=Yr),te=q;break}}catch(Ht){}const Mt=G.filter(q=>q._shouldAllowMigration);return te._shouldAllowMigration&&Mt.length?(te=Mt[0],ot&&(yield te._set(Fe,ot.toJSON())),yield Promise.all(A.map(function(){var q=(0,g.Z)(function*(Ht){if(Ht!==te)try{yield Ht._remove(Fe)}catch(Yr){}});return function(Ht){return q.apply(this,arguments)}}())),new Z(te,v,R)):new Z(te,v,R)}).apply(this,arguments)}}function Ue(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Bt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(gt(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(St(h))return"Blackberry";if(dn(h))return"Webos";if(Zt(h))return"Safari";if((h.includes("chrome/")||wr(h))&&!h.includes("edge/"))return"Chrome";if(Mn(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function gt(y=(0,O.z$)()){return/firefox\//i.test(y)}function Zt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function wr(y=(0,O.z$)()){return/crios\//i.test(y)}function Bt(y=(0,O.z$)()){return/iemobile/i.test(y)}function Mn(y=(0,O.z$)()){return/android/i.test(y)}function St(y=(0,O.z$)()){return/blackberry/i.test(y)}function dn(y=(0,O.z$)()){return/webos/i.test(y)}function rr(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ki(y=(0,O.z$)()){return rr(y)||Mn(y)||dn(y)||St(y)||/windows phone/i.test(y)||Bt(y)}function Yo(y,h=[]){let p;switch(y){case"Browser":p=Ue((0,O.z$)());break;case"Worker":p=`${Ue((0,O.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${v}`}class ii{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nt(this),this.idTokenSubscription=new Nt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=rt(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var A,R;if(!v._deleted&&(v.persistenceManager=yield Z.create(v,h),!v._deleted)){if(null===(A=v._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(G){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;let A=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const R=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,G=null==A?void 0:A._redirectEventId,te=yield p.tryRedirectSignIn(h);(!R||R===G)&&(null==te?void 0:te.user)&&(A=te.user)}return A?A._redirectEventId?(re(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===A._redirectEventId?p.directlySetCurrentUser(A):p.reloadAndSetCurrentUserOrClear(A)):p.reloadAndSetCurrentUserOrClear(A):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(A){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield lr(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function At(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,O.m9)(h):null;return v&&re(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){if(!p._deleted)return h&&re(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,g.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(rt(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(p);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&rt(h)||p._popupRedirectResolver;re(v,p,"argument-error"),p.redirectPersistenceManager=yield Z.create(p,[rt(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,A;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,A){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return re(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,v,A):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Yo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(v["X-Firebase-Client"]=A),v})()}}function Re(y){return(0,O.m9)(y)}class Nt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function cr(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Un(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class sn{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return Ge("not implemented")}_getIdTokenResponse(h){return Ge("not implemented")}_linkToIdToken(h,p){return Ge("not implemented")}_getReauthenticationResolver(h){return Ge("not implemented")}}function Pn(y,h){return gs.apply(this,arguments)}function gs(){return(gs=(0,g.Z)(function*(y,h){return Pe(y,"POST","/v1/accounts:resetPassword",_e(y,h))})).apply(this,arguments)}function Tt(y,h){return fo.apply(this,arguments)}function fo(){return(fo=(0,g.Z)(function*(y,h){return Pe(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qs(y,h){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,g.Z)(function*(y,h){return Pe(y,"POST","/v1/accounts:update",_e(y,h))})).apply(this,arguments)}function dr(){return(dr=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:signInWithPassword",_e(y,h))})).apply(this,arguments)}function Zi(y,h){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,g.Z)(function*(y,h){return Pe(y,"POST","/v1/accounts:sendOobCode",_e(y,h))})).apply(this,arguments)}function si(y,h){return un.apply(this,arguments)}function un(){return(un=(0,g.Z)(function*(y,h){return Zi(y,h)})).apply(this,arguments)}function $a(y,h){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,g.Z)(function*(y,h){return Zi(y,h)})).apply(this,arguments)}function mi(y,h){return oi.apply(this,arguments)}function oi(){return(oi=(0,g.Z)(function*(y,h){return Zi(y,h)})).apply(this,arguments)}function bc(y,h){return ys.apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h){return Zi(y,h)})).apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:signInWithEmailLink",_e(y,h))})).apply(this,arguments)}function Cc(){return(Cc=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:signInWithEmailLink",_e(y,h))})).apply(this,arguments)}class qa extends sn{constructor(h,p,v,A=null){super("password",v),this._email=h,this._password=p,this._tenantId=A}static _fromEmailAndPassword(h,p){return new qa(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new qa(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function ms(y,h){return dr.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ga(y,h){return Hr.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:we(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return Tt(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function sh(y,h){return Cc.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:we(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Bn(y,h){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:signInWithIdp",_e(y,h))})).apply(this,arguments)}class Qi extends sn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Qi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):we("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:A}=p,R=(0,X._T)(p,["providerId","signInMethod"]);if(!v||!A)return null;const G=new Qi(v,A);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(h){return Bn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Bn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Bn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Vp(y,h){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,g.Z)(function*(y,h){return Pe(y,"POST","/v1/accounts:sendVerificationCode",_e(y,h))})).apply(this,arguments)}function _s(){return(_s=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:signInWithPhoneNumber",_e(y,h))})).apply(this,arguments)}function Sc(){return(Sc=(0,g.Z)(function*(y,h){const p=yield Lt(y,"POST","/v1/accounts:signInWithPhoneNumber",_e(y,h));if(p.temporaryProof)throw In(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Bp={USER_NOT_FOUND:"user-not-found"};function Mc(){return(Mc=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:signInWithPhoneNumber",_e(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Bp)})).apply(this,arguments)}class po extends sn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new po({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new po({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function ll(y,h){return _s.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Up(y,h){return Sc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function jp(y,h){return Mc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:A}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:A,temporaryProof:R}=h;return v||p||A||R?new po({verificationId:p,verificationCode:v,phoneNumber:A,temporaryProof:R}):null}}class zs{constructor(h){var p,v,A,R,G,te;const Fe=(0,O.zd)((0,O.pd)(h)),ot=null!==(p=Fe.apiKey)&&void 0!==p?p:null,Mt=null!==(v=Fe.oobCode)&&void 0!==v?v:null,q=function oy(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Fe.mode)&&void 0!==A?A:null);re(ot&&Mt&&q,"argument-error"),this.apiKey=ot,this.operation=q,this.code=Mt,this.continueUrl=null!==(R=Fe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=Fe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(te=Fe.tenantId)&&void 0!==te?te:null}static parseLink(h){const p=function za(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||h||y}(h);try{return new zs(p)}catch(v){return null}}}let cl=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return qa._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const A=zs.parseLink(v);return re(A,"argument-error"),qa._fromEmailAndCode(p,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class vs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Gr extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class go extends Gr{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return re("providerId"in p&&"signInMethod"in p,"argument-error"),Qi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return re(h.idToken||h.accessToken,"argument-error"),Qi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return go.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return go.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:R,nonce:G,providerId:te}=h;if(!v&&!A&&!p&&!R||!te)return null;try{return new go(te)._credential({idToken:p,accessToken:v,nonce:G,pendingToken:R})}catch(Fe){return null}}}let Ws=(()=>{class y extends Gr{constructor(){super("facebook.com")}static credential(p){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Jo=(()=>{class y extends Gr{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:A}=p;if(!v&&!A)return null;try{return y.credential(v,A)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),xc=(()=>{class y extends Gr{constructor(){super("github.com")}static credential(p){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class mo extends sn{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Bn(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Bn(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Bn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:A,pendingToken:R}=p;return v&&A&&R&&v===A?new mo(v,R):null}static _create(h,p){return new mo(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ai extends vs{constructor(h){re(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ai.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ai.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=mo.fromJSON(h);return re(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return mo._create(v,p)}catch(A){return null}}}let Wa=(()=>{class y extends Gr{constructor(){super("twitter.com")}static credential(p,v){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=p;if(!v||!A)return null;try{return y.credential(v,A)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ka(y,h){return qr.apply(this,arguments)}function qr(){return(qr=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:signUp",_e(y,h))})).apply(this,arguments)}class hr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v){return(0,g.Z)(function*(A,R,G,te=!1){const Fe=yield U._fromIdTokenResponse(A,G,te),ot=ah(G);return new hr({user:Fe,providerId:ot,_tokenResponse:G,operationType:R})}).apply(this,arguments)}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const A=ah(v);return new hr({user:h,providerId:A,_tokenResponse:v,operationType:p})})()}}function ah(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Rc(){return(Rc=(0,g.Z)(function*(y){var h;const p=Re(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new hr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Ka(p,{returnSecureToken:!0}),A=yield hr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ya extends O.ZR{constructor(h,p,v,A){var R;super(p.code,p.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,Ya.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,A){return new Ya(h,p,v,A)}}function Qa(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ya._fromErrorAndOperation(y,R,h,v):R})}function Ji(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function dl(){return(dl=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield ws(!0,p,h);const{providerUserInfo:v}=yield mn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),A=Ji(v||[]);return p.providerData=p.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function yn(y,h){return yo.apply(this,arguments)}function yo(){return(yo=(0,g.Z)(function*(y,h,p=!1){const v=yield ur(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return hr._forOperation(y,"link",v)})).apply(this,arguments)}function ws(y,h,p){return ln.apply(this,arguments)}function ln(){return(ln=(0,g.Z)(function*(y,h,p){yield lr(h);const A=!1===y?"provider-already-linked":"no-such-provider";re(Ji(h.providerData).has(p)===y,h.auth,A)})).apply(this,arguments)}function Nc(y,h){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(y,h,p=!1){const{auth:v}=y,A="reauthenticate";try{const R=yield ur(y,Qa(v,A,h,y),p);re(R.idToken,v,"internal-error");const G=it(R.idToken);re(G,v,"internal-error");const{sub:te}=G;return re(y.uid===te,v,"user-mismatch"),hr._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&we(v,"user-mismatch"),R}})).apply(this,arguments)}function Zs(y,h){return fr.apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(y,h,p=!1){const v="signIn",A=yield Qa(y,v,h),R=yield hr._fromIdTokenResponse(y,v,A);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function kn(y,h){return ea.apply(this,arguments)}function ea(){return(ea=(0,g.Z)(function*(y,h){return Zs(Re(y),h)})).apply(this,arguments)}function yi(y,h){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield ws(!1,p,h.providerId),yn(p,h)})).apply(this,arguments)}function Is(y,h){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(y,h){return Nc((0,O.m9)(y),h)})).apply(this,arguments)}function Ja(y,h){return zr.apply(this,arguments)}function zr(){return(zr=(0,g.Z)(function*(y,h){return Lt(y,"POST","/v1/accounts:signInWithCustomToken",_e(y,h))})).apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(y,h){const p=Re(y),v=yield Ja(p,{token:h,returnSecureToken:!0}),A=yield hr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class ft{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?_o._fromServerResponse(h,p):we(h,"internal-error")}}class _o extends ft{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new _o(p)}}function Xa(y,h,p){var v;re((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),re(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(re(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(re(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function tu(){return(tu=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:h};p&&Xa(v,A,p),yield $a(v,A)})).apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h,p){yield Pn((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Ys(){return(Ys=(0,g.Z)(function*(y,h){yield qs((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function Ie(y,h){return jt.apply(this,arguments)}function jt(){return(jt=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),v=yield Pn(p,{oobCode:h}),A=v.requestType;switch(re(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(v.mfaInfo,p,"internal-error");default:re(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=ft._fromServerResponse(Re(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(y,h){const{data:p}=yield Ie((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(y,h,p){const v=Re(y),A=yield Ka(v,{returnSecureToken:!0,email:h,password:p}),R=yield hr._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function na(){return(na=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};re(p.handleCodeInApp,v,"argument-error"),p&&Xa(v,A,p),yield mi(v,A)})).apply(this,arguments)}function ru(){return(ru=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),A=cl.credentialWithLink(h,p||ki());return re(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),kn(v,A)})).apply(this,arguments)}function ra(y,h){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,g.Z)(function*(y,h){return Pe(y,"POST","/v1/accounts:createAuthUri",_e(y,h))})).apply(this,arguments)}function iu(){return(iu=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:Wi()?ki():"http://localhost"},{signinMethods:A}=yield ra((0,O.m9)(y),v);return A||[]})).apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Xa(p.auth,A,h);const{email:R}=yield si(p.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function ia(){return(ia=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&Xa(v.auth,R,p);const{email:G}=yield bc(v.auth,R);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function yl(y,h){return _l.apply(this,arguments)}function _l(){return(_l=(0,g.Z)(function*(y,h){return Pe(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function su(){return(su=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield ur(v,yl(v.auth,R));v.displayName=G.displayName||null,v.photoURL=G.photoUrl||null;const te=v.providerData.find(({providerId:Fe})=>"password"===Fe);te&&(te.displayName=v.displayName,te.photoURL=v.photoURL),yield v._updateTokensIfNecessary(G)})).apply(this,arguments)}function kc(y,h,p){return oa.apply(this,arguments)}function oa(){return(oa=(0,g.Z)(function*(y,h,p){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const G=yield ur(y,Tt(v,R));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Qs{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Fc extends Qs{constructor(h,p,v,A){super(h,p,v),this.username=A}}class Lc extends Qs{constructor(h,p){super(h,"facebook.com",p)}}class aa extends Fc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Ei extends Qs{constructor(h,p){super(h,"google.com",p)}}class vl extends Fc{constructor(h,p,v){super(h,"twitter.com",p,v)}}function lh(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function au(y){var h,p;if(!y)return null;const{providerId:v}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const G=null===(p=null===(h=it(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new Qs(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!v)return null;switch(v){case"facebook.com":return new Lc(R,A);case"github.com":return new aa(R,A);case"google.com":return new Ei(R,A);case"twitter.com":return new vl(R,A,y.screenName||null);case"custom":case"anonymous":return new Qs(R,null);default:return new Qs(R,v,A)}}(p)}class vo{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new vo("enroll",h)}static _fromMfaPendingCredential(h){return new vo("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return vo._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return vo._fromIdtoken(h.multiFactorSession.idToken)}return null}}class ua{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=Re(h),A=p.customData._serverResponse,R=(A.mfaInfo||[]).map(te=>ft._fromServerResponse(v,te));re(A.mfaPendingCredential,v,"internal-error");const G=vo._fromMfaPendingCredential(A.mfaPendingCredential);return new ua(G,R,function(){var te=(0,g.Z)(function*(Fe){const ot=yield Fe._process(v,G);delete A.mfaInfo,delete A.mfaPendingCredential;const Mt=Object.assign(Object.assign({},A),{idToken:ot.idToken,refreshToken:ot.refreshToken});switch(p.operationType){case"signIn":const q=yield hr._fromIdTokenResponse(v,p.operationType,Mt);return yield v._updateCurrentUser(q.user),q;case"reauthenticate":return re(p.user,v,"internal-error"),hr._forOperation(p.user,p.operationType,Mt);default:we(v,"internal-error")}});return function(Fe){return te.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function Fn(y,h){return Pe(y,"POST","/v2/accounts/mfaEnrollment:start",_e(y,h))}class Vc{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>ft._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Vc(h)}getSession(){var h=this;return(0,g.Z)(function*(){return vo._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const A=h,R=yield v.getSession(),G=yield ur(v.user,A._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary(G),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,A=yield p.user.getIdToken(),R=yield ur(p.user,function ch(y,h){return Pe(y,"POST","/v2/accounts/mfaEnrollment:withdraw",_e(y,h))}(p.user.auth,{idToken:A,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:G})=>G!==v),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch(G){if("auth/user-token-expired"!==G.code)throw G}})()}}const es=new WeakMap,Dl="__sak";class bl{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Dl,"1"),this.storage.removeItem(Dl),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Tn=(()=>{class y extends bl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function lu(){const y=(0,O.z$)();return Zt(y)||rr(y)}()&&function Yn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ki(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),R=this.localCache[v];A!==R&&p(v,R,A)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((te,Fe,ot)=>{this.notifyListeners(te,ot)});const A=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(A);if(p.newValue!==te)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!v)return}const R=()=>{const te=this.storage.getItem(A);!v&&this.localCache[A]===te||this.notifyListeners(A,te)},G=this.storage.getItem(A);!function Zo(){return(0,O.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var A=()=>super._set,R=this;return(0,g.Z)(function*(){yield A().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,A=this;return(0,g.Z)(function*(){const R=yield v().call(A,p);return A.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,A=this;return(0,g.Z)(function*(){yield v().call(A,p),delete A.localCache[p]})()}}return y.type="LOCAL",y})(),wi=(()=>{class y extends bl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let cu=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const A=new y(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const A=p,{eventId:R,eventType:G,data:te}=A.data,Fe=v.handlersMap[G];if(!(null==Fe?void 0:Fe.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const ot=Array.from(Fe).map(function(){var q=(0,g.Z)(function*(Ht){return Ht(A.origin,te)});return function(Ht){return q.apply(this,arguments)}}()),Mt=yield function Uc(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(ot);A.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:Mt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ts(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Bc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p){var v=this;return(0,g.Z)(function*(A,R,G=50){const te="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!te)throw new Error("connection_unavailable");let Fe,ot;return new Promise((Mt,q)=>{const Ht=ts("",20);te.port1.start();const Yr=setTimeout(()=>{q(new Error("unsupported_event"))},G);ot={messageChannel:te,onMessage(xt){const Qr=xt;if(Qr.data.eventId===Ht)switch(Qr.data.status){case"ack":clearTimeout(Yr),Fe=setTimeout(()=>{q(new Error("timeout"))},3e3);break;case"done":clearTimeout(Fe),Mt(Qr.data.response);break;default:clearTimeout(Yr),clearTimeout(Fe),q(new Error("invalid_response"))}}},v.handlers.add(ot),te.port1.addEventListener("message",ot.onMessage),v.target.postMessage({eventType:A,eventId:Ht,data:R},[te.port2])}).finally(()=>{ot&&v.removeMessageHandler(ot)})}).apply(this,arguments)}}function _n(){return window}function jn(){return void 0!==_n().WorkerGlobalScope&&"function"==typeof _n().importScripts}function Xs(){return(Xs=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const hu="firebaseLocalStorageDb",eo="firebaseLocalStorage",As="fbase_key";class Ln{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function wo(y,h){return y.transaction([eo],h?"readwrite":"readonly").objectStore(eo)}function to(){const y=indexedDB.open(hu,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(eo,{keyPath:As})}catch(A){p(A)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(eo)?h(v):(v.close(),yield function ui(){const y=indexedDB.deleteDatabase(hu);return new Ln(y).toPromise()}(),h(yield to()))}))})}function Io(y,h,p){return Do.apply(this,arguments)}function Do(){return(Do=(0,g.Z)(function*(y,h,p){const v=wo(y,!0).put({[As]:h,value:p});return new Ln(v).toPromise()})).apply(this,arguments)}function li(){return(li=(0,g.Z)(function*(y,h){const p=wo(y,!1).get(h),v=yield new Ln(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Ss(y,h){const p=wo(y,!0).delete(h);return new Ln(p).toPromise()}const Ms=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield to()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let A=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(A++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return jn()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=cu._getInstance(function dh(){return jn()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(A,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(A,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,A;if(p.activeServiceWorker=yield function It(){return Xs.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Bc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function du(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield to();return yield Io(p,Dl,"1"),yield Ss(p,Dl),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(R=>Io(R,p,v)),A.localCache[p]=v,A.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const A=yield v._withRetries(R=>function bo(y,h){return li.apply(this,arguments)}(R,p));return v.localCache[p]=A,A})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(A=>Ss(A,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(G=>{const te=wo(G,!1).getAll();return new Ln(te).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:G,value:te}of v)R.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(te)&&(p.notifyListeners(G,te),A.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!R.has(G)&&(p.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(p,v){this.localCache[p]=v;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Co(y,h){return Pe(y,"POST","/v2/accounts/mfaSignIn:start",_e(y,h))}function ro(){return(ro=(0,g.Z)(function*(y){return(yield Pe(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function To(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=A=>{const R=ye("internal-error");R.customData=A,p(R)},v.type="text/javascript",v.charset="UTF-8",function io(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function la(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ci=1e12;class So{constructor(h){this.auth=h,this.counter=ci,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new Al(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||ci;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||ci))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||ci))||void 0===v||v.execute(),""})()}}class Al{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;re(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pu(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ui=la("rcb"),qp=new K(3e4,6e4);class An{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!_n().grecaptcha}load(h,p=""){return re(function fh(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(_n().grecaptcha):new Promise((v,A)=>{const R=_n().setTimeout(()=>{A(ye(h,"network-request-failed"))},qp.get());_n()[Ui]=()=>{_n().clearTimeout(R),delete _n()[Ui];const te=_n().grecaptcha;if(!te)return void A(ye(h,"internal-error"));const Fe=te.render;te.render=(ot,Mt)=>{const q=Fe(ot,Mt);return this.counter++,q},this.hostLanguage=p,v(te)},To(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Ui,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),A(ye(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!_n().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $c{load(h){return(0,g.Z)(function*(){return new So(h)})()}clearedOneInstance(){}}const Sl="recaptcha",Hc={theme:"light",type:"image"};class ph{constructor(h,p=Object.assign({},Hc),v){this.parameters=p,this.type=Sl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Re(v),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;re(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $c:new An,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const G=te=>{!te||(h.tokenChangeListeners.delete(G),R(te))};h.tokenChangeListeners.add(G),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=_n()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){re(Wi()&&!jn(),h.auth,"internal-error"),yield function Gc(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Tl(y){return ro.apply(this,arguments)}(h.auth);re(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ca{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=po._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Ml(){return(Ml=(0,g.Z)(function*(y,h,p){const v=Re(y),A=yield Rl(v,h,(0,O.m9)(p));return new ca(A,R=>kn(v,R))})).apply(this,arguments)}function Di(){return(Di=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);yield ws(!1,v,"phone");const A=yield Rl(v.auth,h,(0,O.m9)(p));return new ca(A,R=>yi(v,R))})).apply(this,arguments)}function xl(){return(xl=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y),A=yield Rl(v.auth,h,(0,O.m9)(p));return new ca(A,R=>Is(v,R))})).apply(this,arguments)}function Rl(y,h,p){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(function*(y,h,p){var v;const A=yield p.verify();try{let R;if(re("string"==typeof A,y,"argument-error"),re(p.type===Sl,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const G=R.session;if("phoneNumber"in R)return re("enroll"===G.type,y,"internal-error"),(yield Fn(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{re("signin"===G.type,y,"internal-error");const te=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return re(te,y,"missing-multi-factor-info"),(yield Co(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Vp(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return G}}finally{p._reset()}})).apply(this,arguments)}function da(){return(da=(0,g.Z)(function*(y,h){yield yn((0,O.m9)(y),h)})).apply(this,arguments)}let di=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Re(p)}verifyPhoneNumber(p,v){return Rl(this.auth,p,(0,O.m9)(v))}static credential(p,v){return po._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:A}=p;return v&&A?po._fromTokenResponse(v,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function br(y,h){return h?rt(h):(re(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class xo extends sn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Bn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Bn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Bn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function gu(y){return Zs(y.auth,new xo(y),y.bypassAuthState)}function Nl(y){const{auth:h,user:p}=y;return re(p,h,"internal-error"),Nc(p,new xo(y),y.bypassAuthState)}function gh(y){return zp.apply(this,arguments)}function zp(){return(zp=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return re(p,h,"internal-error"),yn(p,new xo(y),y.bypassAuthState)})).apply(this,arguments)}class mh{constructor(h,p,v,A,R=!1){this.auth=h,this.resolver=v,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,A){h.pendingPromise={resolve:v,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(v,A){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:R,tenantId:G,error:te,type:Fe}=h;if(te)return void p.reject(te);const ot={auth:p.auth,requestUri:v,sessionId:A,tenantId:G||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Fe)(ot))}catch(Mt){p.reject(Mt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return gu;case"linkViaPopup":case"linkViaRedirect":return gh;case"reauthViaPopup":case"reauthViaRedirect":return Nl;default:we(this.auth,"internal-error")}}resolve(h){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ci=new K(2e3,1e4);function so(){return(so=(0,g.Z)(function*(y,h,p){const v=Re(y);Ve(y,h,vs);const A=br(v,p);return new rs(v,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function Ro(){return(Ro=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);Ve(v.auth,h,vs);const A=br(v.auth,p);return new rs(v.auth,"reauthViaPopup",h,A,v).executeNotNull()})).apply(this,arguments)}function Ol(){return(Ol=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);Ve(v.auth,h,vs);const A=br(v.auth,p);return new rs(v.auth,"linkViaPopup",h,A,v).executeNotNull()})).apply(this,arguments)}let rs=(()=>{class y extends mh{constructor(p,v,A,R,G){super(p,v,R,G),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return re(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){pt(1===p.filter.length,"Popup operations only handle one event");const v=ts();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(ye(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,A;this.pollId=(null===(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Ci.get())};p()}}return y.currentPopupAction=null,y})();const Mr=new Map;class yu extends mh{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=Mr.get(p.auth._key());if(!v){try{const R=(yield function fa(y,h){return oo.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(R)}catch(A){v=()=>Promise.reject(A)}Mr.set(p.auth._key(),v)}return p.bypassAuthState||Mr.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const A=yield v.auth._redirectUserForId(h.eventId);if(A)return v.user=A,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function oo(){return(oo=(0,g.Z)(function*(y,h){const p=b(h),v=D(y);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(p));return yield v._remove(p),A})).apply(this,arguments)}function _u(y,h){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,g.Z)(function*(y,h){return D(y)._set(b(h),"true")})).apply(this,arguments)}function D(y){return rt(y._redirectPersistence)}function b(y){return ae("pendingRedirect",y.config.apiKey,y.name)}function z(){return(z=(0,g.Z)(function*(y,h,p){const v=Re(y);Ve(y,h,vs);const A=br(v,p);return yield _u(A,v),A._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function ze(){return(ze=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);Ve(v.auth,h,vs);const A=br(v.auth,p);yield _u(A,v.auth);const R=yield No(v);return A._openRedirect(v.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function $t(){return($t=(0,g.Z)(function*(y,h,p){const v=(0,O.m9)(y);Ve(v.auth,h,vs);const A=br(v.auth,p);yield ws(!1,v,h.providerId),yield _u(A,v.auth);const R=yield No(v);return A._openRedirect(v.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function Jn(){return(Jn=(0,g.Z)(function*(y,h){return yield Re(y)._initializationPromise,fn(y,h,!1)})).apply(this,arguments)}function fn(y,h){return pa.apply(this,arguments)}function pa(){return(pa=(0,g.Z)(function*(y,h,p=!1){const v=Re(y),A=br(v,h),G=yield new yu(v,A,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield v._persistUserIfCurrent(G.user),yield v._setRedirectUser(null,h)),G})).apply(this,arguments)}function No(y){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,g.Z)(function*(y){const h=ts(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class pr{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function _h(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vu(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!vu(h)){const A=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(ye(this.auth,A))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xs(h))}saveEventToCache(h){this.cachedEventUids.add(xs(h)),this.lastProcessedEventTime=Date.now()}}function xs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function vu({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Wc(y){return ga.apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(y,h={}){return Pe(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Pl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kl=/^https?/;function Fl(){return(Fl=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Wc(y);for(const p of h)try{if(Eu(p))return}catch(v){}we(y,"unauthorized-domain")})).apply(this,arguments)}function Eu(y){const h=ki(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===v}if(!kl.test(p))return!1;if(Pl.test(y))return v===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const wu=new K(3e4,6e4);function vh(){const y=_n().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let ma=null;function Kp(y){return ma=ma||function ly(y){return new Promise((h,p)=>{var v,A,R;function G(){vh(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{vh(),p(ye(y,"network-request-failed"))},timeout:wu.get()})}if(null===(A=null===(v=_n().gapi)||void 0===v?void 0:v.iframes)||void 0===A?void 0:A.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=_n().gapi)||void 0===R?void 0:R.load)){const te=la("iframefcb");return _n()[te]=()=>{gapi.load?G():p(ye(y,"network-request-failed"))},To(`https://apis.google.com/js/api.js?onload=${te}`).catch(Fe=>p(Fe))}G()}}).catch(h=>{throw ma=null,h})}(y),ma}const Zp=new K(5e3,15e3),Ll={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Eh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hy(y){const h=y.config;re(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?ne(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},A=Eh.get(y.config.apiHost);A&&(v.eid=A);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function Yp(){return Yp=(0,g.Z)(function*(y){const h=yield Kp(y),p=_n().gapi;return re(p,y,"internal-error"),h.open({where:document.body,url:hy(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ll,dontclear:!0},v=>new Promise(function(){var A=(0,g.Z)(function*(R,G){yield v.restyle({setHideOnLeave:!1});const te=ye(y,"network-request-failed"),Fe=_n().setTimeout(()=>{G(te)},Zp.get());function ot(){_n().clearTimeout(Fe),R(v)}v.ping(ot).then(ot,()=>{G(te)})});return function(R,G){return A.apply(this,arguments)}}()))}),Yp.apply(this,arguments)}const L0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kc{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Ih(y,h,p,v,A,R){re(y.config.authDomain,y,"auth-domain-config-required"),re(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:oe.SDK_VERSION,eventId:A};if(h instanceof vs){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,ot]of Object.entries(R||{}))G[Fe]=ot}if(h instanceof Gr){const Fe=h.getScopes().filter(ot=>""!==ot);Fe.length>0&&(G.scopes=Fe.join(","))}y.tenantId&&(G.tid=y.tenantId);const te=G;for(const Fe of Object.keys(te))void 0===te[Fe]&&delete te[Fe];return`${function U0({config:y}){return y.emulator?ne(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(te).slice(1)}`}const Ul="webStorageSupport";class Bl extends class py{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return Ge("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Bl(h)}_finalizeEnroll(h,p,v){return function Il(y,h){return Pe(y,"POST","/v2/accounts/mfaEnrollment:finalize",_e(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function fu(y,h){return Pe(y,"POST","/v2/accounts/mfaSignIn:finalize",_e(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Jp=(()=>{class y{constructor(){}static assertion(p){return Bl._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Xp="@firebase/auth",jl="0.19.12";class Dh{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var A;h((null===(A=v)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Oo(){return window}function $l(){return($l=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:A}=Oo();pt(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Ah(h.sessionId),G={};return rr()?G.ibi=A.packageName:Mn()?G.apn=A.packageName:we(y,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=R,Ih(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,G)})).apply(this,arguments)}function tg(){return(tg=(0,g.Z)(function*(y){const{BuildInfo:h}=Oo(),p={};rr()?p.iosBundleId=h.packageName:Mn()?p.androidPackageName=h.packageName:we(y,"operation-not-supported-in-this-environment"),yield Wc(y,p)})).apply(this,arguments)}function Du(){return(Du=(0,g.Z)(function*(y,h,p){const{cordova:v}=Oo();let A=()=>{};try{yield new Promise((R,G)=>{let te=null;function Fe(){var q;R();const Ht=null===(q=v.plugins.browsertab)||void 0===q?void 0:q.close;"function"==typeof Ht&&Ht(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function ot(){te||(te=window.setTimeout(()=>{G(ye(y,"redirect-cancelled-by-user"))},2e3))}function Mt(){"visible"===(null==document?void 0:document.visibilityState)&&ot()}h.addPassiveListener(Fe),document.addEventListener("resume",ot,!1),Mn()&&document.addEventListener("visibilitychange",Mt,!1),A=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",ot,!1),document.removeEventListener("visibilitychange",Mt,!1),te&&window.clearTimeout(te)}})}finally{A()}})).apply(this,arguments)}function Ah(y){return ed.apply(this,arguments)}function ed(){return(ed=(0,g.Z)(function*(y){const h=my(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function my(y){if(pt(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function eg(y){(0,oe._registerComponent)(new ie.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:R,authDomain:G}=v.options;return((te,Fe)=>{re(R&&!R.includes(":"),"invalid-api-key",{appName:te.name}),re(!(null==G?void 0:G.includes(":")),"argument-error",{appName:te.name});const ot={apiKey:R,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yo(y)},Mt=new ii(te,Fe,ot);return function tt(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(rt);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(Mt,p),Mt})(v,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ie.wA("auth-internal",h=>{const p=Re(h.getProvider("auth").getImmediate());return new Dh(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Xp,jl,function bh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(Xp,jl,"esm2017")}("Browser");class Sh extends pr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Mh(y){return bu.apply(this,arguments)}function bu(){return(bu=(0,g.Z)(function*(y){const h=yield td()._get(Rh(y));return h&&(yield td()._remove(Rh(y))),h})).apply(this,arguments)}function xh(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function td(){return rt(Tn)}function Rh(y){return ae("authEvent",y.config.apiKey,y.name)}function Rs(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Cu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function Tu(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function rd(y=(0,O.z$)()){return!("file:"!==Tu()&&"ionic:"!==Tu()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Bh(){try{const y=self.localStorage,h=ts();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Uh(y=(0,O.z$)()){return function Ey(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Vh(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Au()&&(0,O.hl)()}return!1}function Au(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function sg(){return(function Fh(){return"http:"===Tu()||"https:"===Tu()}()||(0,O.ru)()||rd())&&!function Lh(){return(0,O.b$)()||(0,O.UG)()}()&&Bh()&&!Au()}function og(){return rd()&&"undefined"!=typeof document}function Ns(){return(Ns=(0,g.Z)(function*(){return!!og()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Zr={LOCAL:"local",NONE:"none",SESSION:"session"},ss=re,Cr="persistence";function jh(y){return $h.apply(this,arguments)}function $h(){return($h=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Hh(),p=ae(Cr,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Hh(){var y;try{return(null===(y=function vt(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const id=re;class Ai{constructor(){this.browserResolver=rt(class fy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wi,this._completeRedirectFn=fn}_openPopup(h,p,v,A){var R=this;return(0,g.Z)(function*(){var G;pt(null===(G=R.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const te=Ih(h,p,v,ki(),A);return function Zc(y,h,p,v=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-v)/2,0).toString();let te="";const Fe=Object.assign(Object.assign({},L0),{width:v.toString(),height:A.toString(),top:R,left:G}),ot=(0,O.z$)().toLowerCase();p&&(te=wr(ot)?"_blank":p),gt(ot)&&(h=h||"http://localhost",Fe.scrollbars="yes");const Mt=Object.entries(Fe).reduce((Ht,[Yr,xt])=>`${Ht}${Yr}=${xt},`,"");if(function ja(y=(0,O.z$)()){var h;return rr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(ot)&&"_self"!==te)return function Rr(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",te),new Kc(null);const q=window.open(h||"",te,Mt);re(q,y,"popup-blocked");try{q.focus()}catch(Ht){}return new Kc(q)}(h,te,ts())})()}_openRedirect(h,p,v,A){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function Ii(y){_n().location.href=y}(Ih(h,p,v,ki(),A)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:A,promise:R}=this.eventManagers[p];return A?Promise.resolve(A):(pt(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function ao(y){return Yp.apply(this,arguments)}(h),A=new pr(h);return v.register("authEvent",R=>(re(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:A},p.iframes[h._key()]=v,A})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Ul,{type:Ul},A=>{var R;const G=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[Ul];void 0!==G&&p(!!G),we(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Wp(y){return Fl.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ki()||Zt()||rr()}}),this.cordovaResolver=rt(class Oh{constructor(){this._redirectPersistence=wi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fn}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let A=p.eventManagers.get(v);return A||(A=new Sh(h),p.eventManagers.set(v,A),p.attachCallbackListeners(h,A)),A})()}_openPopup(h){we(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,A){var R=this;return(0,g.Z)(function*(){!function gy(y){var h,p,v,A,R,G,te,Fe,ot,Mt;const q=Oo();re("function"==typeof(null===(h=null==q?void 0:q.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(void 0!==(null===(p=null==q?void 0:q.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(R=null===(A=null===(v=null==q?void 0:q.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Fe=null===(te=null===(G=null==q?void 0:q.cordova)||void 0===G?void 0:G.plugins)||void 0===te?void 0:te.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Mt=null===(ot=null==q?void 0:q.cordova)||void 0===ot?void 0:ot.InAppBrowser)||void 0===Mt?void 0:Mt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield R._initialize(h);yield G.initialized(),G.resetRedirect(),function zc(){Mr.clear()}(),yield R._originValidation(h);const te=function yy(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:xh(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(h,v,A);yield function ng(y,h){return td()._set(Rh(y),h)}(h,te);const Fe=yield function Xc(y,h,p){return $l.apply(this,arguments)}(h,te,p),ot=yield function ya(y){const{cordova:h}=Oo();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let A=null;v?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function Gs(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(A)})})}(Fe);return function Th(y,h,p){return Du.apply(this,arguments)}(h,G,ot)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ch(y){return tg.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:A,BuildInfo:R}=Oo(),G=setTimeout((0,g.Z)(function*(){yield Mh(h),p.onEvent(Cu())}),500),te=function(){var Mt=(0,g.Z)(function*(q){clearTimeout(G);const Ht=yield Mh(h);let Yr=null;Ht&&(null==q?void 0:q.url)&&(Yr=function Po(y,h){var p,v;const A=function rg(y){const h=Rs(y),p=h.link?decodeURIComponent(h.link):void 0,v=Rs(p).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Rs(A).link||A||v||p||y}(h);if(A.includes("/__/auth/callback")){const R=Rs(A),G=R.firebaseError?function Nh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,te=null===(v=null===(p=null==G?void 0:G.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Fe=te?ye(te):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Ht,q.url)),p.onEvent(Yr||Cu())});return function(Ht){return Mt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,te);const Fe=A,ot=`${R.packageName.toLowerCase()}://`;Oo().handleOpenURL=function(){var Mt=(0,g.Z)(function*(q){if(q.toLowerCase().startsWith(ot)&&te({url:q}),"function"==typeof Fe)try{Fe(q)}catch(Ht){console.error(Ht)}});return function(q){return Mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=wi,this._completeRedirectFn=fn}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,A){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,v,A)})()}_openRedirect(h,p,v,A){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,v,A)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return og()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return id(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function is(){return Ns.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function os(y){return y.unwrap()}function sd(y){return qh(y)}function qh(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return di.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=Jo;break;case"facebook.com":v=Ws;break;case"github.com":v=xc;break;case"twitter.com":v=Wa;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:te,nonce:Fe}=h;return R||G||A||te?te?p.startsWith("saml.")?mo._create(p,te):Qi._fromParams({providerId:p,signInMethod:p,pendingToken:te,idToken:A,accessToken:R}):new go(p).credential({idToken:A,accessToken:R,rawNonce:Fe}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function hi(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Gh(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new zh(y,function uu(y,h){var p;const v=(0,O.m9)(y),A=h;return re(h.customData.operationType,v,"argument-error"),re(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),ua._fromError(v,A)}(y,h));else if(v){const A=qh(h),R=h;A&&(R.credential=A,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:sd(p),additionalUserInfo:lh(p),user:Tr.getOrCreate(A)}})}function _a(y,h){return uo.apply(this,arguments)}function uo(){return(uo=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>hi(y,p.confirm(v))}})).apply(this,arguments)}class zh{constructor(h,p){this.resolver=p,this.auth=function ko(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return hi(os(this.auth),this.resolver.resolveSignIn(h))}}class Tr{constructor(h){this._delegate=h,this.multiFactor=function Eo(y){const h=(0,O.m9)(y);return es.has(h)||es.set(h,Vc._fromUser(h)),es.get(h)}(h)}static getOrCreate(h){return Tr.USER_MAP.has(h)||Tr.USER_MAP.set(h,new Tr(h)),Tr.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return hi(p.auth,yi(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return _a(v.auth,function Vn(y,h,p){return Di.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return hi(p.auth,function yh(y,h,p){return Ol.apply(this,arguments)}(p._delegate,h,Ai))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield jh(Re(p.auth)),function _t(y,h,p){return function Xe(y,h,p){return $t.apply(this,arguments)}(y,h,p)}(p._delegate,h,Ai)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return hi(p.auth,Is(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return _a(this.auth,function Hn(y,h,p){return xl.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return hi(this.auth,function ha(y,h,p){return Ro.apply(this,arguments)}(this._delegate,h,Ai))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield jh(Re(p.auth)),function ue(y,h,p){return function Se(y,h,p){return ze.apply(this,arguments)}(y,h,p)}(p._delegate,h,Ai)})()}sendEmailVerification(h){return function Ts(y,h){return vi.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function Xo(y,h){return dl.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Pc(y,h){return kc((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function ou(y,h){return kc((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function bi(y,h){return da.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function sa(y,h){return su.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function ml(y,h,p){return ia.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Tr.USER_MAP=new WeakMap;const as=re;let ir=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;as(A,"invalid-api-key",{appName:p.name}),as(A,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?Ai:void 0;this._delegate=v.initialize({options:{persistence:Wh(A,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Tr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function hn(y,h,p){const v=Re(y);re(v._canInitEmulator,v,"emulator-config-failed"),re(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const A=!!(null==p?void 0:p.disableWarnings),R=cr(h),{host:G,port:te}=function ps(y){const h=cr(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const R=A[1];return{host:R,port:Un(v.substr(R.length+1))}}{const[R,G]=v.split(":");return{host:R,port:Un(G)}}}(h);v.config.emulator={url:`${R}//${G}${null===te?"":`:${te}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:G,port:te,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Li(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function fl(y,h){return Ys.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Ie(this._delegate,p)}confirmPasswordReset(p,v){return function hl(y,h,p){return nu.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var A=this;return(0,g.Z)(function*(){return hi(A._delegate,function pl(y,h,p){return Cs.apply(this,arguments)}(A._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function _i(y,h){return iu.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Oc(y,h){const p=zs.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){as(sg(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function bt(y,h){return Jn.apply(this,arguments)}(p._delegate,Ai);return v?hi(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function vy(y,h){Re(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,A){const{next:R,error:G,complete:te}=ag(p,v,A);return this._delegate.onAuthStateChanged(R,G,te)}onIdTokenChanged(p,v,A){const{next:R,error:G,complete:te}=ag(p,v,A);return this._delegate.onIdTokenChanged(R,G,te)}sendSignInLinkToEmail(p,v){return function gl(y,h,p){return na.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function eu(y,h,p){return tu.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let A;switch(function Gn(y,h){ss(Object.values(Zr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?ss(h!==Zr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?ss(h===Zr.NONE,y,"unsupported-persistence-type"):Au()?ss(h===Zr.NONE||h===Zr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):ss(h===Zr.NONE||Bh(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Zr.SESSION:A=wi;break;case Zr.LOCAL:A=(yield rt(Ms)._isAvailable())?Ms:Tn;break;case Zr.NONE:A=$;break;default:return we("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return hi(this._delegate,function Za(y){return Rc.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return hi(this._delegate,kn(this._delegate,p))}signInWithCustomToken(p){return hi(this._delegate,function Ds(y,h){return bs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return hi(this._delegate,function Vi(y,h,p){return kn((0,O.m9)(y),cl.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return hi(this._delegate,function uh(y,h,p){return ru.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return _a(this._delegate,function Mo(y,h,p){return Ml.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return as(sg(),v._delegate,"operation-not-supported-in-this-environment"),hi(v._delegate,function qc(y,h,p){return so.apply(this,arguments)}(v._delegate,p,Ai))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return as(sg(),v._delegate,"operation-not-supported-in-this-environment"),yield jh(v._delegate),function M(y,h,p){return function F(y,h,p){return z.apply(this,arguments)}(y,h,p)}(v._delegate,p,Ai)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function ta(y,h){return bn.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Zr,y})();function ag(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const A=v;return{next:G=>A(G&&Tr.getOrCreate(G)),error:h,complete:p}}function Wh(y,h){const p=function j0(y,h){const p=Hh();if(!p)return[];const v=ae(Cr,y,h);switch(p.getItem(v)){case Zr.NONE:return[$];case Zr.LOCAL:return[Ms,wi];case Zr.SESSION:return[wi];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(Ms)&&p.push(Ms),"undefined"!=typeof window)for(const v of[Tn,wi])p.includes(v)||p.push(v);return p.includes($)||p.push($),p}class ug{constructor(){this.providerId="phone",this._delegate=new di(os(Y.Z.auth()))}static credential(h,p){return di.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}ug.PHONE_SIGN_IN_METHOD=di.PHONE_SIGN_IN_METHOD,ug.PROVIDER_ID=di.PROVIDER_ID;const hD=re;class $0{constructor(h,p,v=Y.Z.app()){var A;hD(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new ph(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function H0(y){y.INTERNAL.registerComponent(new ie.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new ir(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:cl,FacebookAuthProvider:Ws,GithubAuthProvider:xc,GoogleAuthProvider:Jo,OAuthProvider:go,SAMLAuthProvider:ai,PhoneAuthProvider:ug,PhoneMultiFactorGenerator:Jp,RecaptchaVerifier:$0,TwitterAuthProvider:Wa,Auth:ir,AuthCredential:sn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(Y.Z)},8306:(at,Ae,k)=>{k.d(Ae,{y:()=>j});var g=k(2961),Y=k(727),O=k(8822),oe=k(4671);var ie=k(2416),he=k(576),le=k(2806);let j=(()=>{class De{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const me=new De;return me.source=this,me.operator=ke,me}subscribe(ke,me,ve){const Ye=function He(De){return De&&De instanceof g.Lv||function Q(De){return De&&(0,he.m)(De.next)&&(0,he.m)(De.error)&&(0,he.m)(De.complete)}(De)&&(0,Y.Nn)(De)}(ke)?ke:new g.Hp(ke,me,ve);return(0,le.x)(()=>{const{operator:We,source:we}=this;Ye.add(We?We.call(Ye,we):we?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(ke){try{return this._subscribe(ke)}catch(me){ke.error(me)}}forEach(ke,me){return new(me=B(me))((ve,Ye)=>{const We=new g.Hp({next:we=>{try{ke(we)}catch(ye){Ye(ye),We.unsubscribe()}},error:Ye,complete:ve});this.subscribe(We)})}_subscribe(ke){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe(ke)}[O.L](){return this}pipe(...ke){return function ge(De){return 0===De.length?oe.y:1===De.length?De[0]:function(ke){return De.reduce((me,ve)=>ve(me),ke)}}(ke)(this)}toPromise(ke){return new(ke=B(ke))((me,ve)=>{let Ye;this.subscribe(We=>Ye=We,We=>ve(We),()=>me(Ye))})}}return De.create=xe=>new De(xe),De})();function B(De){var xe;return null!==(xe=null!=De?De:ie.v.Promise)&&void 0!==xe?xe:Promise}},7579:(at,Ae,k)=>{k.d(Ae,{x:()=>ie});var g=k(8306),Y=k(727);const oe=(0,k(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=k(8737),ge=k(2806);let ie=(()=>{class le extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const Q=new he(this,this);return Q.operator=B,Q}_throwIfClosed(){if(this.closed)throw new oe}next(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(B)}})}error(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:Q}=this;for(;Q.length;)Q.shift().error(B)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:Q,isStopped:He,observers:De}=this;return Q||He?Y.Lc:(this.currentObservers=null,De.push(B),new Y.w0(()=>{this.currentObservers=null,(0,X.P)(De,B)}))}_checkFinalizedStatuses(B){const{hasError:Q,thrownError:He,isStopped:De}=this;Q?B.error(He):De&&B.complete()}asObservable(){const B=new g.y;return B.source=this,B}}return le.create=(j,B)=>new he(j,B),le})();class he extends ie{constructor(j,B){super(),this.destination=j,this.source=B}next(j){var B,Q;null===(Q=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===Q||Q.call(B,j)}error(j){var B,Q;null===(Q=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===Q||Q.call(B,j)}complete(){var j,B;null===(B=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===B||B.call(j)}_subscribe(j){var B,Q;return null!==(Q=null===(B=this.source)||void 0===B?void 0:B.subscribe(j))&&void 0!==Q?Q:Y.Lc}}},2961:(at,Ae,k)=>{k.d(Ae,{Hp:()=>ke,Lv:()=>Q});var g=k(576),Y=k(727),O=k(2416),oe=k(7849);function X(){}const ge=le("C",void 0,void 0);function le(we,ye,Ee){return{kind:we,value:ye,error:Ee}}var j=k(3410),B=k(2806);class Q extends Y.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,Y.Nn)(ye)&&ye.add(this)):this.destination=We}static create(ye,Ee,Ve){return new ke(ye,Ee,Ve)}next(ye){this.isStopped?Ye(function he(we){return le("N",we,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Ye(function ie(we){return le("E",void 0,we)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Ye(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function De(we,ye){return He.call(we,ye)}class xe{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(ye)}catch(Ve){me(Ve)}}error(ye){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(ye)}catch(Ve){me(Ve)}else me(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(Ee){me(Ee)}}}class ke extends Q{constructor(ye,Ee,Ve){let Be;if(super(),(0,g.m)(ye)||!ye)Be={next:null!=ye?ye:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ve?Ve:void 0};else{let re;this&&O.v.useDeprecatedNextContext?(re=Object.create(ye),re.unsubscribe=()=>this.unsubscribe(),Be={next:ye.next&&De(ye.next,re),error:ye.error&&De(ye.error,re),complete:ye.complete&&De(ye.complete,re)}):Be=ye}this.destination=new xe(Be)}}function me(we){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(we):(0,oe.h)(we)}function Ye(we,ye){const{onStoppedNotification:Ee}=O.v;Ee&&j.z.setTimeout(()=>Ee(we,ye))}const We={closed:!0,next:X,error:function ve(we){throw we},complete:X}},727:(at,Ae,k)=>{k.d(Ae,{Lc:()=>ge,w0:()=>X,Nn:()=>ie});var g=k(576);const O=(0,k(3888).d)(le=>function(B){le(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((Q,He)=>`${He+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var oe=k(8737);class X{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const De of B)De.remove(this);else B.remove(this);const{initialTeardown:Q}=this;if((0,g.m)(Q))try{Q()}catch(De){j=De instanceof O?De.errors:[De]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const De of He)try{he(De)}catch(xe){j=null!=j?j:[],xe instanceof O?j=[...j,...xe.errors]:j.push(xe)}}if(j)throw new O(j)}}add(j){var B;if(j&&j!==this)if(this.closed)he(j);else{if(j instanceof X){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(j)}}_hasParent(j){const{_parentage:B}=this;return B===j||Array.isArray(B)&&B.includes(j)}_addParent(j){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(j),B):B?[B,j]:j}_removeParent(j){const{_parentage:B}=this;B===j?this._parentage=null:Array.isArray(B)&&(0,oe.P)(B,j)}remove(j){const{_finalizers:B}=this;B&&(0,oe.P)(B,j),j instanceof X&&j._removeParent(this)}}X.EMPTY=(()=>{const le=new X;return le.closed=!0,le})();const ge=X.EMPTY;function ie(le){return le instanceof X||le&&"closed"in le&&(0,g.m)(le.remove)&&(0,g.m)(le.add)&&(0,g.m)(le.unsubscribe)}function he(le){(0,g.m)(le)?le():le.unsubscribe()}},2416:(at,Ae,k)=>{k.d(Ae,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,Ae,k)=>{k.d(Ae,{E:()=>Y});const Y=new(k(8306).y)(X=>X.complete())},8996:(at,Ae,k)=>{k.d(Ae,{D:()=>ye});var g=k(8421),Y=k(5363),O=k(9468),ge=k(8306),he=k(2202),le=k(576),j=k(9672);function Q(Ee,Ve){if(!Ee)throw new Error("Iterable cannot be null");return new ge.y(Be=>{(0,j.f)(Be,Ve,()=>{const re=Ee[Symbol.asyncIterator]();(0,j.f)(Be,Ve,()=>{re.next().then(Ge=>{Ge.done?Be.complete():Be.next(Ge.value)})},0,!0)})})}var He=k(3670),De=k(8239),xe=k(1144),ke=k(6495),me=k(2206),ve=k(4532),Ye=k(3260);function ye(Ee,Ve){return Ve?function we(Ee,Ve){if(null!=Ee){if((0,He.c)(Ee))return function oe(Ee,Ve){return(0,g.Xf)(Ee).pipe((0,O.R)(Ve),(0,Y.Q)(Ve))}(Ee,Ve);if((0,xe.z)(Ee))return function ie(Ee,Ve){return new ge.y(Be=>{let re=0;return Ve.schedule(function(){re===Ee.length?Be.complete():(Be.next(Ee[re++]),Be.closed||this.schedule())})})}(Ee,Ve);if((0,De.t)(Ee))return function X(Ee,Ve){return(0,g.Xf)(Ee).pipe((0,O.R)(Ve),(0,Y.Q)(Ve))}(Ee,Ve);if((0,me.D)(Ee))return Q(Ee,Ve);if((0,ke.T)(Ee))return function B(Ee,Ve){return new ge.y(Be=>{let re;return(0,j.f)(Be,Ve,()=>{re=Ee[he.h](),(0,j.f)(Be,Ve,()=>{let Ge,pt;try{({value:Ge,done:pt}=re.next())}catch(Pt){return void Be.error(Pt)}pt?Be.complete():Be.next(Ge)},0,!0)}),()=>(0,le.m)(null==re?void 0:re.return)&&re.return()})}(Ee,Ve);if((0,Ye.L)(Ee))return function We(Ee,Ve){return Q((0,Ye.Q)(Ee),Ve)}(Ee,Ve)}throw(0,ve.z)(Ee)}(Ee,Ve):(0,g.Xf)(Ee)}},8421:(at,Ae,k)=>{k.d(Ae,{Xf:()=>He});var g=k(7582),Y=k(1144),O=k(8239),oe=k(8306),X=k(3670),ge=k(2206),ie=k(4532),he=k(6495),le=k(3260),j=k(576),B=k(7849),Q=k(8822);function He(we){if(we instanceof oe.y)return we;if(null!=we){if((0,X.c)(we))return function De(we){return new oe.y(ye=>{const Ee=we[Q.L]();if((0,j.m)(Ee.subscribe))return Ee.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(we);if((0,Y.z)(we))return function xe(we){return new oe.y(ye=>{for(let Ee=0;Ee<we.length&&!ye.closed;Ee++)ye.next(we[Ee]);ye.complete()})}(we);if((0,O.t)(we))return function ke(we){return new oe.y(ye=>{we.then(Ee=>{ye.closed||(ye.next(Ee),ye.complete())},Ee=>ye.error(Ee)).then(null,B.h)})}(we);if((0,ge.D)(we))return ve(we);if((0,he.T)(we))return function me(we){return new oe.y(ye=>{for(const Ee of we)if(ye.next(Ee),ye.closed)return;ye.complete()})}(we);if((0,le.L)(we))return function Ye(we){return ve((0,le.Q)(we))}(we)}throw(0,ie.z)(we)}function ve(we){return new oe.y(ye=>{(function We(we,ye){var Ee,Ve,Be,re;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,g.KL)(we);!(Ve=yield Ee.next()).done;)if(ye.next(Ve.value),ye.closed)return}catch(Ge){Be={error:Ge}}finally{try{Ve&&!Ve.done&&(re=Ee.return)&&(yield re.call(Ee))}finally{if(Be)throw Be.error}}ye.complete()})})(we,ye).catch(Ee=>ye.error(Ee))})}},6451:(at,Ae,k)=>{k.d(Ae,{T:()=>ge});var g=k(8189),Y=k(8421),O=k(515),oe=k(7669),X=k(8996);function ge(...ie){const he=(0,oe.yG)(ie),le=(0,oe._6)(ie,1/0),j=ie;return j.length?1===j.length?(0,Y.Xf)(j[0]):(0,g.J)(le)((0,X.D)(j,he)):O.E}},5403:(at,Ae,k)=>{k.d(Ae,{x:()=>Y});var g=k(2961);function Y(oe,X,ge,ie,he){return new O(oe,X,ge,ie,he)}class O extends g.Lv{constructor(X,ge,ie,he,le,j){super(X),this.onFinalize=le,this.shouldUnsubscribe=j,this._next=ge?function(B){try{ge(B)}catch(Q){X.error(Q)}}:super._next,this._error=he?function(B){try{he(B)}catch(Q){X.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(B){X.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(at,Ae,k)=>{k.d(Ae,{U:()=>O});var g=k(4482),Y=k(5403);function O(oe,X){return(0,g.e)((ge,ie)=>{let he=0;ge.subscribe((0,Y.x)(ie,le=>{ie.next(oe.call(X,le,he++))}))})}},8189:(at,Ae,k)=>{k.d(Ae,{J:()=>O});var g=k(5577),Y=k(4671);function O(oe=1/0){return(0,g.z)(Y.y,oe)}},5577:(at,Ae,k)=>{k.d(Ae,{z:()=>he});var g=k(4004),Y=k(8421),O=k(4482),oe=k(9672),X=k(5403),ie=k(576);function he(le,j,B=1/0){return(0,ie.m)(j)?he((Q,He)=>(0,g.U)((De,xe)=>j(Q,De,He,xe))((0,Y.Xf)(le(Q,He))),B):("number"==typeof j&&(B=j),(0,O.e)((Q,He)=>function ge(le,j,B,Q,He,De,xe,ke){const me=[];let ve=0,Ye=0,We=!1;const we=()=>{We&&!me.length&&!ve&&j.complete()},ye=Ve=>ve<Q?Ee(Ve):me.push(Ve),Ee=Ve=>{De&&j.next(Ve),ve++;let Be=!1;(0,Y.Xf)(B(Ve,Ye++)).subscribe((0,X.x)(j,re=>{null==He||He(re),De?ye(re):j.next(re)},()=>{Be=!0},void 0,()=>{if(Be)try{for(ve--;me.length&&ve<Q;){const re=me.shift();xe?(0,oe.f)(j,xe,()=>Ee(re)):Ee(re)}we()}catch(re){j.error(re)}}))};return le.subscribe((0,X.x)(j,ye,()=>{We=!0,we()})),()=>{null==ke||ke()}}(Q,He,le,B)))}},5363:(at,Ae,k)=>{k.d(Ae,{Q:()=>oe});var g=k(9672),Y=k(4482),O=k(5403);function oe(X,ge=0){return(0,Y.e)((ie,he)=>{ie.subscribe((0,O.x)(he,le=>(0,g.f)(he,X,()=>he.next(le),ge),()=>(0,g.f)(he,X,()=>he.complete(),ge),le=>(0,g.f)(he,X,()=>he.error(le),ge)))})}},3099:(at,Ae,k)=>{k.d(Ae,{B:()=>X});var g=k(8421),Y=k(7579),O=k(2961),oe=k(4482);function X(ie={}){const{connector:he=(()=>new Y.x),resetOnError:le=!0,resetOnComplete:j=!0,resetOnRefCountZero:B=!0}=ie;return Q=>{let He,De,xe,ke=0,me=!1,ve=!1;const Ye=()=>{null==De||De.unsubscribe(),De=void 0},We=()=>{Ye(),He=xe=void 0,me=ve=!1},we=()=>{const ye=He;We(),null==ye||ye.unsubscribe()};return(0,oe.e)((ye,Ee)=>{ke++,!ve&&!me&&Ye();const Ve=xe=null!=xe?xe:he();Ee.add(()=>{ke--,0===ke&&!ve&&!me&&(De=ge(we,B))}),Ve.subscribe(Ee),!He&&ke>0&&(He=new O.Hp({next:Be=>Ve.next(Be),error:Be=>{ve=!0,Ye(),De=ge(We,le,Be),Ve.error(Be)},complete:()=>{me=!0,Ye(),De=ge(We,j),Ve.complete()}}),(0,g.Xf)(ye).subscribe(He))})(Q)}}function ge(ie,he,...le){if(!0===he)return void ie();if(!1===he)return;const j=new O.Hp({next:()=>{j.unsubscribe(),ie()}});return he(...le).subscribe(j)}},9468:(at,Ae,k)=>{k.d(Ae,{R:()=>Y});var g=k(4482);function Y(O,oe=0){return(0,g.e)((X,ge)=>{ge.add(O.schedule(()=>X.subscribe(ge),oe))})}},8505:(at,Ae,k)=>{k.d(Ae,{b:()=>X});var g=k(576),Y=k(4482),O=k(5403),oe=k(4671);function X(ge,ie,he){const le=(0,g.m)(ge)||ie||he?{next:ge,error:ie,complete:he}:ge;return le?(0,Y.e)((j,B)=>{var Q;null===(Q=le.subscribe)||void 0===Q||Q.call(le);let He=!0;j.subscribe((0,O.x)(B,De=>{var xe;null===(xe=le.next)||void 0===xe||xe.call(le,De),B.next(De)},()=>{var De;He=!1,null===(De=le.complete)||void 0===De||De.call(le),B.complete()},De=>{var xe;He=!1,null===(xe=le.error)||void 0===xe||xe.call(le,De),B.error(De)},()=>{var De,xe;He&&(null===(De=le.unsubscribe)||void 0===De||De.call(le)),null===(xe=le.finalize)||void 0===xe||xe.call(le)}))}):oe.y}},4408:(at,Ae,k)=>{k.d(Ae,{o:()=>X});var g=k(727);class Y extends g.w0{constructor(ie,he){super()}schedule(ie,he=0){return this}}const O={setInterval(ge,ie,...he){const{delegate:le}=O;return(null==le?void 0:le.setInterval)?le.setInterval(ge,ie,...he):setInterval(ge,ie,...he)},clearInterval(ge){const{delegate:ie}=O;return((null==ie?void 0:ie.clearInterval)||clearInterval)(ge)},delegate:void 0};var oe=k(8737);class X extends Y{constructor(ie,he){super(ie,he),this.scheduler=ie,this.work=he,this.pending=!1}schedule(ie,he=0){var le;if(this.closed)return this;this.state=ie;const j=this.id,B=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(B,j,he)),this.pending=!0,this.delay=he,this.id=null!==(le=this.id)&&void 0!==le?le:this.requestAsyncId(B,this.id,he),this}requestAsyncId(ie,he,le=0){return O.setInterval(ie.flush.bind(ie,this),le)}recycleAsyncId(ie,he,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return he;null!=he&&O.clearInterval(he)}execute(ie,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(ie,he);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,he){let j,le=!1;try{this.work(ie)}catch(B){le=!0,j=B||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ie,scheduler:he}=this,{actions:le}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(le,this),null!=ie&&(this.id=this.recycleAsyncId(he,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,Ae,k)=>{k.d(Ae,{v:()=>O});var g=k(6063);class Y{constructor(X,ge=Y.now){this.schedulerActionCtor=X,this.now=ge}schedule(X,ge=0,ie){return new this.schedulerActionCtor(this,X).schedule(ie,ge)}}Y.now=g.l.now;class O extends Y{constructor(X,ge=Y.now){super(X,ge),this.actions=[],this._active=!1}flush(X){const{actions:ge}=this;if(this._active)return void ge.push(X);let ie;this._active=!0;do{if(ie=X.execute(X.state,X.delay))break}while(X=ge.shift());if(this._active=!1,ie){for(;X=ge.shift();)X.unsubscribe();throw ie}}}},4986:(at,Ae,k)=>{k.d(Ae,{z:()=>O});var g=k(4408);const O=new(k(7565).v)(g.o)},6063:(at,Ae,k)=>{k.d(Ae,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(at,Ae,k)=>{k.d(Ae,{z:()=>g});const g={setTimeout(Y,O,...oe){const{delegate:X}=g;return(null==X?void 0:X.setTimeout)?X.setTimeout(Y,O,...oe):setTimeout(Y,O,...oe)},clearTimeout(Y){const{delegate:O}=g;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(at,Ae,k)=>{k.d(Ae,{h:()=>Y});const Y=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,Ae,k)=>{k.d(Ae,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,Ae,k)=>{k.d(Ae,{_6:()=>ge,jO:()=>oe,yG:()=>X});var g=k(576);function O(ie){return ie[ie.length-1]}function oe(ie){return(0,g.m)(O(ie))?ie.pop():void 0}function X(ie){return function Y(ie){return ie&&(0,g.m)(ie.schedule)}(O(ie))?ie.pop():void 0}function ge(ie,he){return"number"==typeof O(ie)?ie.pop():he}},8737:(at,Ae,k)=>{function g(Y,O){if(Y){const oe=Y.indexOf(O);0<=oe&&Y.splice(oe,1)}}k.d(Ae,{P:()=>g})},3888:(at,Ae,k)=>{function g(Y){const oe=Y(X=>{Error.call(X),X.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(Ae,{d:()=>g})},2806:(at,Ae,k)=>{k.d(Ae,{O:()=>oe,x:()=>O});var g=k(2416);let Y=null;function O(X){if(g.v.useDeprecatedSynchronousErrorHandling){const ge=!Y;if(ge&&(Y={errorThrown:!1,error:null}),X(),ge){const{errorThrown:ie,error:he}=Y;if(Y=null,ie)throw he}}else X()}function oe(X){g.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},9672:(at,Ae,k)=>{function g(Y,O,oe,X=0,ge=!1){const ie=O.schedule(function(){oe(),ge?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(ie),!ge)return ie}k.d(Ae,{f:()=>g})},4671:(at,Ae,k)=>{function g(Y){return Y}k.d(Ae,{y:()=>g})},1144:(at,Ae,k)=>{k.d(Ae,{z:()=>g});const g=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(at,Ae,k)=>{k.d(Ae,{D:()=>Y});var g=k(576);function Y(O){return Symbol.asyncIterator&&(0,g.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(at,Ae,k)=>{function g(Y){return"function"==typeof Y}k.d(Ae,{m:()=>g})},3670:(at,Ae,k)=>{k.d(Ae,{c:()=>O});var g=k(8822),Y=k(576);function O(oe){return(0,Y.m)(oe[g.L])}},6495:(at,Ae,k)=>{k.d(Ae,{T:()=>O});var g=k(2202),Y=k(576);function O(oe){return(0,Y.m)(null==oe?void 0:oe[g.h])}},8239:(at,Ae,k)=>{k.d(Ae,{t:()=>Y});var g=k(576);function Y(O){return(0,g.m)(null==O?void 0:O.then)}},3260:(at,Ae,k)=>{k.d(Ae,{L:()=>oe,Q:()=>O});var g=k(7582),Y=k(576);function O(X){return(0,g.FC)(this,arguments,function*(){const ie=X.getReader();try{for(;;){const{value:he,done:le}=yield(0,g.qq)(ie.read());if(le)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(he)}}finally{ie.releaseLock()}})}function oe(X){return(0,Y.m)(null==X?void 0:X.getReader)}},4482:(at,Ae,k)=>{k.d(Ae,{A:()=>Y,e:()=>O});var g=k(576);function Y(oe){return(0,g.m)(null==oe?void 0:oe.lift)}function O(oe){return X=>{if(Y(X))return X.lift(function(ge){try{return oe(ge,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(at,Ae,k)=>{k.d(Ae,{h:()=>O});var g=k(2416),Y=k(3410);function O(oe){Y.z.setTimeout(()=>{const{onUnhandledError:X}=g.v;if(!X)throw oe;X(oe)})}},4532:(at,Ae,k)=>{function g(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ae,{z:()=>g})},5e3:(at,Ae,k)=>{k.d(Ae,{$8M:()=>Ao,$Z:()=>wf,AFp:()=>Ov,AaK:()=>he,CRH:()=>Ju,CZH:()=>Um,CqO:()=>ku,EJc:()=>sC,F4k:()=>S_,FYo:()=>uv,FiY:()=>pr,GfV:()=>Dm,Gpc:()=>B,JOm:()=>ao,LFG:()=>Xe,LSH:()=>dg,Lbi:()=>kv,NdJ:()=>um,OlP:()=>An,Oqu:()=>xa,PXZ:()=>fp,Q6J:()=>rm,QGY:()=>am,Qsj:()=>Gw,R0b:()=>Hi,RDi:()=>Ji,Rgc:()=>fc,SBq:()=>Gd,Sil:()=>Vv,Suo:()=>ka,TTD:()=>Ws,TgZ:()=>sm,VLi:()=>dp,X6Q:()=>Yv,XFs:()=>Ze,Xpm:()=>Ot,Y36:()=>Jl,YKP:()=>Kw,YNc:()=>Cd,Yjl:()=>wr,Yz7:()=>ee,ZZ4:()=>u0,_Bn:()=>jw,_UZ:()=>Xl,_Vd:()=>qu,_c5:()=>IC,_uU:()=>zn,aQg:()=>Ym,c2e:()=>Fv,cJS:()=>_e,cg1:()=>fm,dDg:()=>DI,deG:()=>fh,dqk:()=>Ut,eFA:()=>yc,ekj:()=>lm,g9A:()=>_I,h0i:()=>yr,hGG:()=>c0,iGM:()=>oI,ifc:()=>zt,ip1:()=>ap,kL8:()=>Ew,lG2:()=>Zt,n5z:()=>To,oAB:()=>Z,oxw:()=>R_,q4F:()=>qw,qLn:()=>fg,qOj:()=>_d,qZA:()=>Df,sBO:()=>Jv,sIi:()=>Ed,s_b:()=>Sm,soG:()=>Lv,tBr:()=>Kr,tb:()=>vI,tp0:()=>vu,uIk:()=>Qg,vHH:()=>xe,vpe:()=>js,wAp:()=>dt,xp6:()=>tE,z2F:()=>Hm,zSh:()=>o_,zs3:()=>ks});var g=k(7579),Y=k(727),O=k(8306),oe=k(6451),X=k(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function ie(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=ge({__forward_ref__:ge});function B(i){return i.__forward_ref__=B,i.toString=function(){return he(this())},i}function Q(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===B}class xe extends Error{constructor(s,a){super(function ke(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}function ye(i,s){const a=s?` in ${s}`:"";throw new xe(-201,`No provider for ${ve(i)} found${a}`)}function Nn(i,s){null==i&&function At(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function ee(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function _e(i){return{providers:i.providers||[],imports:i.imports||[]}}function Pe(i){return wt(i,cn)||wt(i,qt)}function wt(i,s){return i.hasOwnProperty(s)?i[s]:null}function Lt(i){return i&&(i.hasOwnProperty(On)||i.hasOwnProperty(In))?i[On]:null}const cn=ge({\u0275prov:ge}),On=ge({\u0275inj:ge}),qt=ge({ngInjectableDef:ge}),In=ge({ngInjectorDef:ge});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let Dn;function Zn(i){const s=Dn;return Dn=i,s}function ri(i,s,a){const u=Pe(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&Ze.Optional?null:void 0!==s?s:void ye(he(i),"Injector")}function wn(i){return{toString:i}.toString()}var nr=(()=>((nr=nr||{})[nr.OnPush=0]="OnPush",nr[nr.Default=1]="Default",nr))(),zt=(()=>{return(i=zt||(zt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",zt;var i})();const it="undefined"!=typeof globalThis&&globalThis,yt="undefined"!=typeof window&&window,ur="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ut=it||"undefined"!=typeof global&&global||yt||ur,lr={},ut=[],Er=ge({\u0275cmp:ge}),kt=ge({\u0275dir:ge}),Ke=ge({\u0275pipe:ge}),Ce=ge({\u0275mod:ge}),Qe=ge({\u0275fac:ge}),lt=ge({__NG_ELEMENT_ID__:ge});let Vt=0;function Ot(i){return wn(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===nr.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ut,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||zt.Emulated,id:"c",styles:i.styles||ut,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,_=i.pipes;return u.id+=Vt++,u.inputs=gt(i.inputs,a),u.outputs=gt(i.outputs),f&&f.forEach(E=>E(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,u})}function L(i){return Bt(i)||function Mn(i){return i[kt]||null}(i)}function $(i){return function St(i){return i[Ke]||null}(i)}const ae={};function Z(i){return wn(()=>{const s={type:i.type,bootstrap:i.bootstrap||ut,declarations:i.declarations||ut,imports:i.imports||ut,exports:i.exports||ut,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ae[i.id]=i.type),s})}function gt(i,s){if(null==i)return lr;const a={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=u,s&&(s[c]=f)}return a}const Zt=Ot;function wr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Bt(i){return i[Er]||null}function dn(i,s){const a=i[Ce]||null;if(!a&&!0===s)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function mi(i){return Array.isArray(i)&&"object"==typeof i[1]}function oi(i){return Array.isArray(i)&&!0===i[1]}function bc(i){return 0!=(8&i.flags)}function ys(i){return 2==(2&i.flags)}function Ga(i){return 1==(1&i.flags)}function Hr(i){return null!==i.template}function sh(i){return 0!=(512&i[2])}function Gr(i,s){return i.hasOwnProperty(Qe)?i[Qe]:null}class go{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ws(){return Jo}function Jo(i){return i.type.prototype.ngOnChanges&&(i.setInput=$p),xc}function xc(){const i=Es(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===lr)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function $p(i,s,a,u){const c=Es(i)||function ai(i,s){return i[mo]=s}(i,{previous:lr,current:null}),f=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];f[E]=new go(I&&I.currentValue,s,_===lr),i[u]=s}Ws.ngInherit=!0;const mo="__ngSimpleChanges__";function Es(i){return i[mo]||null}let Qa;function Ji(i){Qa=i}function yn(i){return!!i.listen}const yo={createRenderer:(i,s)=>function Xo(){return void 0!==Qa?Qa:"undefined"!=typeof document?document:void 0}()};function ln(i){for(;Array.isArray(i);)i=i[0];return i}function Zs(i,s){return ln(s[i])}function fr(i,s){return ln(s[i.index])}function ea(i,s){return i.data[s]}function Ir(i,s){const a=s[i];return mi(a)?a:a[0]}function Is(i){return 4==(4&i[2])}function Xi(i){return 128==(128&i[2])}function zr(i,s){return null==s?null:i[s]}function Ds(i){i[18]=0}function bs(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const ft={lFrame:Fc(null),bindingsEnabled:!0};function nu(){return ft.bindingsEnabled}function Ie(){return ft.lFrame.lView}function jt(){return ft.lFrame.tView}function bn(){let i=pl();for(;null!==i&&64===i.type;)i=i.parent;return i}function pl(){return ft.lFrame.currentTNode}function Vi(i,s){const a=ft.lFrame;a.currentTNode=i,a.isParent=s}function gl(){return ft.lFrame.isParent}function Ts(){return ft.lFrame.bindingIndex++}function yl(i,s){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=i,sa(s)}function sa(i){ft.lFrame.currentDirectiveIndex=i}function Pc(){return ft.lFrame.currentQueryIndex}function ou(i){ft.lFrame.currentQueryIndex=i}function kc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function oa(i,s,a){if(a&Ze.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&Ze.Host||(c=kc(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const u=ft.lFrame=Qs();return u.currentTNode=s,u.lView=i,!0}function au(i){const s=Qs(),a=i[1];ft.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Qs(){const i=ft.lFrame,s=null===i?null:i.child;return null===s?Fc(i):s}function Fc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Lc(){const i=ft.lFrame;return ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const aa=Lc;function Ei(){const i=Lc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Dr(){return ft.lFrame.selectedIndex}function Js(i){ft.lFrame.selectedIndex=i}function Cn(){const i=ft.lFrame;return ea(i.tView,i.selectedIndex)}function ua(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:S}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function uu(i,s,a){ch(i,s,3,a)}function Fn(i,s,a,u){(3&i[2])===a&&ch(i,s,a,u)}function Il(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function ch(i,s,a,u){const f=null!=u?u:-1,_=s.length-1;let E=0;for(let I=void 0!==u?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=u&&E>=u)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(Vc(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Vc(i,s,a,u){const c=a[u]<0,f=a[u+1],E=i[c?-a[u]:a[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Eo{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function wi(i,s,a){const u=yn(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const _=a[c++],E=a[c++],I=a[c++];u?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=f,E=a[++c];cu(_)?u&&i.setProperty(s,_,E):u?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function Uc(i){return 3===i||4===i||6===i}function cu(i){return 64===i.charCodeAt(0)}function ts(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?a=c:0===a||Bc(i,a,c,null,-1===a||2===a?s[++u]:null)}}return i}function Bc(i,s,a,u,c){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===u)return void(null!==c&&(i[f+1]=c));if(u===i[f+1])return void(i[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==u&&i.splice(f++,0,u),null!==c&&i.splice(f++,0,c)}function _n(i){return-1!==i}function Ii(i){return 32767&i}function It(i,s){let a=function jn(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let Xs=!0;function du(i){const s=Xs;return Xs=i,s}let eo=0;function Ln(i,s){const a=ui(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,wo(u.data,i),wo(s,null),wo(u.blueprint,null));const c=to(i,s),f=i.injectorIndex;if(_n(c)){const _=Ii(c),E=It(c,s),I=E[1].data;for(let T=0;T<8;T++)s[f+T]=E[_+T]|I[_+T]}return s[f+8]=c,f}function wo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function ui(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function to(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,c=s;for(;null!==c;){const f=c[1],_=f.type;if(u=2===_?f.declTNode:1===_?c[6]:null,null===u)return-1;if(a++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function Io(i,s,a){!function As(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(lt)&&(u=a[lt]),null==u&&(u=a[lt]=eo++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function bo(i,s,a){if(a&Ze.Optional)return i;ye(s,"NodeInjector")}function li(i,s,a,u){if(a&Ze.Optional&&void 0===u&&(u=null),0==(a&(Ze.Self|Ze.Host))){const c=i[9],f=Zn(void 0);try{return c?c.get(s,u,a&Ze.Optional):ri(s,u,a&Ze.Optional)}finally{Zn(f)}}return bo(u,s,a)}function Ss(i,s,a,u=Ze.Default,c){if(null!==i){const f=function fu(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(lt)?i[lt]:void 0;return"number"==typeof s?s>=0?255&s:no:s}(a);if("function"==typeof f){if(!oa(s,i,u))return u&Ze.Host?bo(c,a,u):li(s,a,u,c);try{const _=f(u);if(null!=_||u&Ze.Optional)return _;ye(a)}finally{aa()}}else if("number"==typeof f){let _=null,E=ui(i,s),I=-1,T=u&Ze.Host?s[16][6]:null;for((-1===E||u&Ze.SkipSelf)&&(I=-1===E?to(i,s):s[E+8],-1!==I&&ro(u,!1)?(_=s[1],E=Ii(I),s=It(I,s)):E=-1);-1!==E;){const S=s[1];if(Tl(f,E,S.data)){const P=Gp(E,s,a,_,u,T);if(P!==$n)return P}I=s[E+8],-1!==I&&ro(u,s[1].data[E+8]===T)&&Tl(f,E,s)?(_=S,E=Ii(I),s=It(I,s)):E=-1}}}return li(s,a,u,c)}const $n={};function no(){return new io(bn(),Ie())}function Gp(i,s,a,u,c,f){const _=s[1],E=_.data[i+8],S=Ms(E,_,a,null==u?ys(E)&&Xs:u!=_&&0!=(3&E.type),c&Ze.Host&&f===E);return null!==S?Co(s,_,S,E):$n}function Ms(i,s,a,u,c){const f=i.providerIndexes,_=s.data,E=1048575&f,I=i.directiveStart,S=f>>20,V=c?E+S:i.directiveEnd;for(let W=u?E:E+S;W<V;W++){const de=_[W];if(W<I&&a===de||W>=I&&de.type===a)return W}if(c){const W=_[I];if(W&&Hr(W)&&W.type===a)return I}return null}function Co(i,s,a,u){let c=i[a];const f=s.data;if(function Dl(i){return i instanceof Eo}(c)){const _=c;_.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new xe(-200,`Circular dependency in DI detected for ${i}${a}`)}(ve(f[a]));const E=du(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Zn(_.injectImpl):null;oa(i,u,Ze.Default);try{c=i[a]=_.factory(void 0,f,i,u),s.firstCreatePass&&a>=u.directiveStart&&function vo(i,s,a){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(u){const _=Jo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&Zn(I),du(E),_.resolving=!1,aa()}}return c}function Tl(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function ro(i,s){return!(i&Ze.Self||i&Ze.Host&&s)}class io{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return Ss(this._tNode,this._lView,s,u,a)}}function To(i){return wn(()=>{const s=i.prototype.constructor,a=s[Qe]||la(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const f=c[Qe]||la(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function la(i){return He(i)?()=>{const s=la(Q(i));return s&&s()}:Gr(i)}function Ao(i){return function Do(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let c=0;for(;c<u;){const f=a[c];if(Uc(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(bn(),i)}const ci="__parameters__";function Ui(i,s,a){return wn(()=>{const u=function pu(i){return function(...a){if(i){const u=i(...a);for(const c in u)this[c]=u[c]}}}(s);function c(...f){if(this instanceof c)return u.apply(this,f),this;const _=new c(...f);return E.annotation=_,E;function E(I,T,S){const P=I.hasOwnProperty(ci)?I[ci]:Object.defineProperty(I,ci,{value:[]})[ci];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class An{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ee({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const fh=new An("AnalyzeForEntryComponents");function Wr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),Wr(u,s)):s!==i&&s.push(u)}return s}function bi(i,s){i.forEach(a=>Array.isArray(a)?bi(a,s):s(a))}function da(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function di(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Ci(i,s,a){let u=so(i,s);return u>=0?i[1|u]=a:(u=~u,function Nl(i,s,a,u){let c=i.length;if(c==s)i.push(a,u);else if(1===c)i.push(u,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function qc(i,s){const a=so(i,s);if(a>=0)return i[1|a]}function so(i,s){return function Ro(i,s,a){let u=0,c=i.length>>a;for(;c!==u;){const f=u+(c-u>>1),_=i[f<<a];if(s===_)return f<<a;_>s?c=f:u=f+1}return~(c<<a)}(i,s,1)}const Bi={},zc="__NG_DI_FLAG__",D="ngTempTokenPath",M=/\n/gm,z="__source",ue=ge({provide:String,useValue:ge});let Se;function ze(i){const s=Se;return Se=i,s}function _t(i,s=Ze.Default){if(void 0===Se)throw new xe(203,"");return null===Se?ri(i,void 0,s):Se.get(i,s&Ze.Optional?null:void 0,s)}function Xe(i,s=Ze.Default){return(function mn(){return Dn}()||_t)(Q(i),s)}const bt=Xe;function Jn(i){const s=[];for(let a=0;a<i.length;a++){const u=Q(i[a]);if(Array.isArray(u)){if(0===u.length)throw new xe(900,"");let c,f=Ze.Default;for(let _=0;_<u.length;_++){const E=u[_],I=pa(E);"number"==typeof I?-1===I?c=E.token:f|=I:c=E}s.push(Xe(c,f))}else s.push(Xe(u))}return s}function fn(i,s){return i[zc]=s,i.prototype[zc]=s,i}function pa(i){return i[zc]}const Kr=fn(Ui("Inject",i=>({token:i})),-1),pr=fn(Ui("Optional"),8),vu=fn(Ui("SkipSelf"),4);var ao=(()=>((ao=ao||{})[ao.Important=1]="Important",ao[ao.DashCase=2]="DashCase",ao))();const Zc="__ngContext__";function Rr(i,s){i[Zc]=s}function Yc(i){const s=function Vl(i){return i[Zc]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Dh(i,s){return undefined(i,s)}function Iu(i){const s=i[3];return oi(s)?s[3]:s}function Xc(i){return Ch(i[13])}function $l(i){return Ch(i[4])}function Ch(i){for(;null!==i&&!oi(i);)i=i[4];return i}function ya(i,s,a,u,c){if(null!=u){let f,_=!1;oi(u)?f=u:mi(u)&&(_=!0,u=u[0]);const E=ln(u);0===i&&null!==a?null==c?nd(s,a,E):Rs(s,a,E,c||null,!0):1===i&&null!==a?Rs(s,a,E,c||null,!0):2===i?function Uh(i,s,a){const u=Cu(i,s);u&&function _y(i,s,a,u){yn(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=f&&function is(i,s,a,u,c){const f=a[7];f!==ln(a)&&ya(s,i,u,f,c);for(let E=10;E<a.length;E++){const I=a[E];Au(I[1],I,i,s,u,f)}}(s,i,f,a,c)}}function Ah(i,s,a){if(yn(i))return i.createElement(s,a);{const u=null!==a?function Ya(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===u?i.createElement(s):i.createElementNS(u,s)}}function Mh(i,s){const a=i[9],u=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,bs(c,-1)),a.splice(u,1)}function bu(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const c=u[17];null!==c&&c!==i&&Mh(c,u),s>0&&(i[a-1][4]=u[4]);const f=di(i,10+s);!function ed(i,s){Au(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const _=f[19];null!==_&&_.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Po(i,s){if(!(256&s[2])){const a=s[11];yn(a)&&a.destroyNode&&Au(i,s,a,3,null,null),function Sh(i){let s=i[13];if(!s)return xh(i[1],i);for(;s;){let a=null;if(mi(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)mi(s)&&xh(s[1],s),s=s[3];null===s&&(s=i),mi(s)&&xh(s[1],s),a=s&&s[4]}s=a}}(s)}}function xh(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Rh(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const c=s[a[u]];if(!(c instanceof Eo)){const f=a[u+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=c[f[_]],I=f[_+1];try{I.call(E)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function td(i,s){const a=i.cleanup,u=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(s):ln(s[_]),I=u[c=a[f+2]],T=a[f+3];"boolean"==typeof T?E.removeEventListener(a[f],I,T):T>=0?u[c=T]():u[c=-T].unsubscribe(),f+=2}else{const _=u[c=a[f+1]];a[f].call(_)}if(null!==u){for(let f=c+1;f<u.length;f++)u[f]();s[7]=null}}(i,s),1===s[1].type&&yn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&oi(s[3])){a!==s[3]&&Mh(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function Nh(i,s,a){return function rg(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===zt.None||c===zt.Emulated)return null}return fr(u,a)}(i,s.parent,a)}function Rs(i,s,a,u,c){yn(i)?i.insertBefore(s,a,u,c):s.insertBefore(a,u,c)}function nd(i,s,a){yn(i)?i.appendChild(s,a):s.appendChild(a)}function Oh(i,s,a,u,c){null!==u?Rs(i,s,a,u,c):nd(i,s,a)}function Cu(i,s){return yn(i)?i.parentNode(s):s.parentNode}let kh=function ig(i,s,a){return 40&i.type?fr(i,a):null};function rd(i,s,a,u){const c=Nh(i,u,s),f=s[11],E=function Ph(i,s,a){return kh(i,s,a)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)Oh(f,c,a[I],E,!1);else Oh(f,c,a,E,!1)}function Lh(i,s){if(null!==s){const a=s.type;if(3&a)return fr(s,i);if(4&a)return Vh(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return Lh(i,u);{const c=i[s.index];return oi(c)?Vh(-1,c):ln(c)}}if(32&a)return Dh(s,i)()||ln(i[s.index]);{const u=Ey(i,s);return null!==u?Array.isArray(u)?u[0]:Lh(Iu(i[16]),u):Lh(i,s.next)}}return null}function Ey(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Vh(i,s){const a=10+i+1;if(a<s.length){const u=s[a],c=u[1].firstChild;if(null!==c)return Lh(u,c)}return s[7]}function Bh(i,s,a,u,c,f,_){for(;null!=a;){const E=u[a.index],I=a.type;if(_&&0===s&&(E&&Rr(ln(E),u),a.flags|=4),64!=(64&a.flags))if(8&I)Bh(i,s,a.child,u,c,f,!1),ya(s,i,c,E,f);else if(32&I){const T=Dh(a,u);let S;for(;S=T();)ya(s,i,c,S,f);ya(s,i,c,E,f)}else 16&I?og(i,s,u,a,c,f):ya(s,i,c,E,f);a=_?a.projectionNext:a.next}}function Au(i,s,a,u,c,f){Bh(a,u,i.firstChild,s,c,f,!1)}function og(i,s,a,u,c,f){const _=a[16],I=_[6].projection[u.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)ya(s,i,c,I[T],f);else Bh(i,s,I,_[3],c,f,!0)}function vt(i,s,a){yn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Zr(i,s,a){yn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}class Gh{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Tr(i){return i instanceof Gh?i.changingThisBreaksApplicationSecurity:i}const p=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,A=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var gr=(()=>((gr=gr||{})[gr.NONE=0]="NONE",gr[gr.HTML=1]="HTML",gr[gr.STYLE=2]="STYLE",gr[gr.SCRIPT=3]="SCRIPT",gr[gr.URL=4]="URL",gr[gr.RESOURCE_URL=5]="RESOURCE_URL",gr))();function dg(i){const s=function Kh(){const i=Ie();return i&&i[12]}();return s?s.sanitize(gr.URL,i)||"":function as(i,s){const a=function ir(i){return i instanceof Gh&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Tr(i):function R(i){return(i=String(i)).match(p)||i.match(A)?i:"unsafe:"+i}(me(i))}function ld(i){return i.ngOriginalError}function mD(i,...s){i.error(...s)}class fg{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=function z0(i){return i&&i.ngErrorLogger||mD}(s);u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&ld(s);for(;a&&ld(a);)a=ld(a);return a||null}}const Z0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ut))();function Fo(i){return i instanceof Function?i():i}function J0(i,s,a){let u=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===u||i.charCodeAt(c+f)<=32)return c}a=c+1}}const X0="ng-template";function pg(i,s,a){let u=0;for(;u<i.length;){let c=i[u++];if(a&&"class"===c){if(c=i[u],-1!==J0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function gg(i){return 4===i.type&&i.value!==X0}function Ny(i,s,a){return s===(4!==i.type||a?i.value:X0)}function Oy(i,s,a){let u=4;const c=i.attrs||[],f=function ID(i){for(let s=0;s<i.length;s++)if(Uc(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&u){if(u=2|1&u,""!==I&&!Ny(i,I,a)||""===I&&1===s.length){if(Os(u))return!1;_=!0}}else{const T=8&u?I:s[++E];if(8&u&&null!==i.attrs){if(!pg(i.attrs,T,a)){if(Os(u))return!1;_=!0}continue}const P=wD(8&u?"class":I,c,gg(i),a);if(-1===P){if(Os(u))return!1;_=!0;continue}if(""!==T){let V;V=P>f?"":c[P+1].toLowerCase();const W=8&u?V:null;if(W&&-1!==J0(W,T,0)||2&u&&T!==V){if(Os(u))return!1;_=!0}}}}else{if(!_&&!Os(u)&&!Os(I))return!1;if(_&&Os(I))continue;_=!1,u=I|1&u}}return Os(u)||_}function Os(i){return 0==(1&i)}function wD(i,s,a,u){if(null===s)return-1;let c=0;if(u||!a){let f=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function DD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function Py(i,s,a=!1){for(let u=0;u<s.length;u++)if(Oy(i,s[u],a))return!0;return!1}function eE(i,s){return i?":not("+s.trim()+")":s}function CD(i){let s=i[0],a=1,u=2,c="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&u){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?c+="."+_:4&u&&(c+=" "+_);else""!==c&&!Os(_)&&(s+=eE(f,c),c=""),u=_,f=f||!Os(u);a++}return""!==c&&(s+=eE(f,c)),s}const Rt={};function tE(i){nE(jt(),Ie(),Dr()+i,!1)}function nE(i,s,a,u){if(!u)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&uu(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Fn(s,f,0,a)}Js(a)}function Jh(i,s){return i<<17|s<<2}function Ps(i){return i>>17&32767}function ky(i){return 2|i}function va(i){return(131068&i)>>2}function _g(i,s){return-131069&i|s<<2}function vg(i){return 1|i}function ef(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const c=a[u],f=a[u+1];if(-1!==f){const _=i.data[f];ou(c),_.contentQueries(2,s[f],f)}}}function wa(i,s,a,u,c,f,_,E,I,T){const S=s.blueprint.slice();return S[0]=c,S[2]=140|u,Ds(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=T||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function cd(i,s,a,u,c){let f=i.data[s];if(null===f)f=function Wy(i,s,a,u,c){const f=pl(),_=gl(),I=i.data[s]=function Jr(i,s,a,u,c,f){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,u,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,u,c),function ml(){return ft.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=u,f.attrs=c;const _=function Cs(){const i=ft.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Vi(f,!0),f}function tf(i,s,a,u){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function nf(i,s,a){au(s);try{const u=i.viewQuery;null!==u&&i_(1,u,a);const c=i.template;null!==c&&et(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&ef(i,s),i.staticViewQueries&&i_(2,i.viewQuery,a);const f=i.components;null!==f&&function PD(i,s){for(let a=0;a<s.length;a++)UD(i,s[a])}(s,f)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Ei()}}function dd(i,s,a,u){const c=s[2];if(256!=(256&c)){au(s);try{Ds(s),function iu(i){return ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&et(i,s,a,2,u);const _=3==(3&c);if(_){const T=i.preOrderCheckHooks;null!==T&&uu(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Fn(s,T,0,null),Il(s,0)}if(function t_(i){for(let s=Xc(i);null!==s;s=$l(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const c=a[u],f=c[3];0==(1024&c[2])&&bs(f,1),c[2]|=1024}}}(s),function Pg(i){for(let s=Xc(i);null!==s;s=$l(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1];Xi(u)&&dd(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&ef(i,s),_){const T=i.contentCheckHooks;null!==T&&uu(s,T)}else{const T=i.contentHooks;null!==T&&Fn(s,T,1),Il(s,1)}!function qy(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const c=a[u];if(c<0)Js(~c);else{const f=c,_=a[++u],E=a[++u];yl(_,f),E(2,s[f])}}}finally{Js(-1)}}(i,s);const E=i.components;null!==E&&function zy(i,s){for(let a=0;a<s.length;a++)n_(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&i_(2,I,u),_){const T=i.viewCheckHooks;null!==T&&uu(s,T)}else{const T=i.viewHooks;null!==T&&Fn(s,T,2),Il(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,bs(s[3],-1))}finally{Ei()}}}function Ia(i,s,a,u){const c=s[10],_=Is(s);try{!_&&c.begin&&c.begin(),_&&nf(i,s,u),dd(i,s,a,u)}finally{!_&&c.end&&c.end()}}function et(i,s,a,u,c){const f=Dr(),_=2&u;try{Js(-1),_&&s.length>20&&nE(i,s,20,!1),a(u,c)}finally{Js(f)}}function Ct(i,s,a){!nu()||(function xi(i,s,a,u){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ln(a,s),Rr(u,s);const _=a.initialInputs;for(let E=c;E<f;E++){const I=i.data[E],T=Hr(I);T&&VD(s,a,I);const S=Co(s,i,E,a);Rr(S,s),null!==_&&Xy(0,E-c,S,I,0,_),T&&(Ir(a.index,s)[8]=S)}}(i,s,a,fr(a,s)),128==(128&a.flags)&&function pE(i,s,a){const u=a.directiveStart,c=a.directiveEnd,_=a.index,E=function _l(){return ft.lFrame.currentDirectiveIndex}();try{Js(_);for(let I=u;I<c;I++){const T=i.data[I],S=s[I];sa(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Yy(T,S)}}finally{Js(-1),sa(E)}}(i,s,a))}function hd(i,s,a=fr){const u=s.localNames;if(null!==u){let c=s.index+1;for(let f=0;f<u.length;f+=2){const _=u[f+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function Sg(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=xu(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function xu(i,s,a,u,c,f,_,E,I,T){const S=20+u,P=S+c,V=function kD(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:Rt);return a}(S,P),W="function"==typeof T?T():T;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:W,incompleteFirstPass:!1}}function dE(i,s,a,u){const c=of(s);null===a?c.push(u):(c.push(a),i.firstCreatePass&&Vg(i).push(u,c.length-1))}function rf(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,c):a[u]=[s,c]}return a}function Rg(i,s,a,u){let c=!1;if(nu()){const f=function Qy(i,s,a){const u=i.directiveRegistry;let c=null;if(u)for(let f=0;f<u.length;f++){const _=u[f];Py(a,_.selectors,!1)&&(c||(c=[]),Io(Ln(a,s),i,_.type),Hr(_)?(Jy(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===u?null:{"":-1};if(null!==f){c=!0,Ng(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const P=f[S];P.providersResolver&&P.providersResolver(P)}let E=!1,I=!1,T=tf(i,s,f.length,null);for(let S=0;S<f.length;S++){const P=f[S];a.mergedAttrs=ts(a.mergedAttrs,P.hostAttrs),yE(i,a,s,T,P),mE(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}!function Xr(i,s){const u=s.directiveEnd,c=i.data,f=s.attrs,_=[];let E=null,I=null;for(let T=s.directiveStart;T<u;T++){const S=c[T],P=S.inputs,V=null===f||gg(s)?null:_E(P,f);_.push(V),E=rf(P,T,E),I=rf(S.outputs,T,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function gE(i,s,a){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new xe(-301,!1);u.push(s[c],f)}}}(a,u,_)}return a.mergedAttrs=ts(a.mergedAttrs,a.attrs),c}function fi(i,s,a,u,c,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function Zy(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(u,c,_)}}function Yy(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Jy(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function mE(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;Hr(s)&&(a[""]=i)}}function Ng(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function yE(i,s,a,u,c){i.data[u]=c;const f=c.factory||(c.factory=Gr(c.type)),_=new Eo(f,Hr(c),null);i.blueprint[u]=_,a[u]=_,fi(i,s,0,u,tf(i,a,c.hostVars,Rt),c)}function VD(i,s,a){const u=fr(s,i),c=Sg(a),f=i[10],_=fd(i,wa(i,c,null,a.onPush?64:16,u,s,f,f.createRenderer(u,a),null,null));i[s.index]=_}function Ri(i,s,a,u,c,f){const _=fr(i,s);!function Og(i,s,a,u,c,f,_){if(null==f)yn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?me(f):_(f,u||"",c);yn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,f,i.value,a,u,c)}function Xy(i,s,a,u,c,f){const _=f[s];if(null!==_){const E=u.setInput;for(let I=0;I<_.length;){const T=_[I++],S=_[I++],P=_[I++];null!==E?u.setInput(a,P,T,S):a[S]=P}}}function _E(i,s){let a=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return a}function e_(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function n_(i,s){const a=Ir(s,i);if(Xi(a)){const u=a[1];80&a[2]?dd(u,a,u.template,a[8]):a[5]>0&&sf(a)}}function sf(i){for(let u=Xc(i);null!==u;u=$l(u))for(let c=10;c<u.length;c++){const f=u[c];if(1024&f[2]){const _=f[1];dd(_,f,_.template,f[8])}else f[5]>0&&sf(f)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const c=Ir(a[u],i);Xi(c)&&c[5]>0&&sf(c)}}function UD(i,s){const a=Ir(s,i),u=a[1];(function BD(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),nf(u,a,a[8])}function fd(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function kg(i){for(;i;){i[2]|=64;const s=Iu(i);if(sh(i)&&!s)return i;i=s}return null}function pd(i){!function r_(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=Yc(a),c=u[1];Ia(c,u,c.template,a)}}(i[8])}function i_(i,s,a){ou(0),s(i,a)}const Lg=(()=>Promise.resolve(null))();function of(i){return i[7]||(i[7]=[])}function Vg(i){return i.cleanup||(i.cleanup=[])}function Bg(i,s){const a=i[9],u=a?a.get(fg,null):null;u&&u.handleError(s)}function jg(i,s,a,u,c){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],I=s[_],T=i.data[_];null!==T.setInput?T.setInput(I,c,u,E):I[E]=c}}function Lo(i,s,a){const u=Zs(s,i);!function Du(i,s,a){yn(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function af(i,s,a){let u=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?f=E:1==f?c=le(c,E):2==f&&(u=le(u,E+": "+s[++_]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=c:i.classesWithoutHost=c}const uf=new An("INJECTOR",-1);class s_{get(s,a=Bi){if(a===Bi){const u=new Error(`NullInjectorError: No provider for ${he(s)}!`);throw u.name="NullInjectorError",u}return a}}const o_=new An("Set Injector scope."),Wl={},a_={};let lf;function Ar(){return void 0===lf&&(lf=new s_),lf}function Or(i,s=null,a=null,u){const c=cf(i,s,a,u);return c._resolveInjectorDefTypes(),c}function cf(i,s=null,a=null,u){return new u_(i,a,s||Ar(),u)}class u_{constructor(s,a,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&bi(a,E=>this.processProvider(E,s,a)),bi([s],E=>this.processInjectorType(E,[],f)),this.records.set(uf,gd(void 0,this));const _=this.records.get(o_);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:he(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Bi,u=Ze.Default){this.assertNotDestroyed();const c=ze(this),f=Zn(void 0);try{if(!(u&Ze.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function d_(i){return"function"==typeof i||"object"==typeof i&&i instanceof An}(s)&&Pe(s);E=I&&this.injectableDefInScope(I)?gd(l_(s),Wl):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&Ze.Self?Ar():this.parent).get(s,a=u&Ze.Optional&&a===Bi?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[D]=_[D]||[]).unshift(he(s)),c)throw _;return function No(i,s,a,u){const c=i[D];throw s[z]&&c.unshift(s[z]),i.message=function Ti(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=he(s);if(Array.isArray(s))c=s.map(he).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):he(E)))}c=`{${f.join(", ")}}`}return`${a}${u?"("+u+")":""}[${c}]: ${i.replace(M,"\n  ")}`}("\n"+i.message,c,a,u),i.ngTokenPath=c,i[D]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Zn(f),ze(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(he(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processInjectorType(s,a,u){if(!(s=Q(s)))return!1;let c=Lt(s);const f=null==c&&s.ngModule||void 0,_=void 0===f?s:f,E=-1!==u.indexOf(_);if(void 0!==f&&(c=Lt(f)),null==c)return!1;if(null!=c.imports&&!E){let S;u.push(_);try{bi(c.imports,P=>{this.processInjectorType(P,a,u)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:V,providers:W}=S[P];bi(W,de=>this.processProvider(de,V,W||ut))}}this.injectorDefTypes.add(_);const I=Gr(_)||(()=>new _);this.records.set(_,gd(I,Wl));const T=c.providers;if(null!=T&&!E){const S=s;bi(T,P=>this.processProvider(P,S,T))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,u){let c=Nu(s=Q(s))?s:Q(s&&s.provide);const f=function EE(i,s,a){return $g(i)?gd(void 0,i.useValue):gd(wE(i),Wl)}(s);if(Nu(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=gd(void 0,Wl,!0),_.factory=()=>Jn(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===Wl&&(a.value=a_,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Hg(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function l_(i){const s=Pe(i),a=null!==s?s.factory:Gr(i);if(null!==a)return a;if(i instanceof An)throw new xe(204,!1);if(i instanceof Function)return function GD(i){const s=i.length;if(s>0)throw function br(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new xe(204,!1);const a=function an(i){const s=i&&(i[cn]||i[qt]);if(s){const a=function ct(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new xe(204,!1)}function wE(i,s,a){let u;if(Nu(i)){const c=Q(i);return Gr(c)||l_(c)}if($g(i))u=()=>Q(i.useValue);else if(function qD(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...Jn(i.deps||[]));else if(function c_(i){return!(!i||!i.useExisting)}(i))u=()=>Xe(Q(i.useExisting));else{const c=Q(i&&(i.useClass||i.provide));if(!function zD(i){return!!i.deps}(i))return Gr(c)||l_(c);u=()=>new c(...Jn(i.deps))}return u}function gd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function $g(i){return null!==i&&"object"==typeof i&&ue in i}function Nu(i){return"function"==typeof i}let ks=(()=>{class i{static create(a,u){var c;if(Array.isArray(a))return Or({name:""},u,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return Or({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=Bi,i.NULL=new s_,i.\u0275prov=ee({token:i,providedIn:"any",factory:()=>Xe(uf)}),i.__NG_ELEMENT_ID__=-1,i})();function __(i,s){ua(Yc(i)[1],bn())}function _d(i){let s=function Wg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let c;if(Hr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new xe(903,"");c=s.\u0275dir}if(c){if(a){u.push(c);const _=i;_.inputs=Kg(i.inputs),_.declaredInputs=Kg(i.declaredInputs),_.outputs=Kg(i.outputs);const E=c.hostBindings;E&&Zg(i,E);const I=c.viewQuery,T=c.contentQueries;if(I&&QD(i,I),T&&v_(i,T),ie(i.inputs,c.inputs),ie(i.declaredInputs,c.declaredInputs),ie(i.outputs,c.outputs),Hr(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===_d&&(a=!1)}}s=Object.getPrototypeOf(s)}!function df(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=ts(c.hostAttrs,a=ts(a,c.hostAttrs))}}(u)}function Kg(i){return i===lr?{}:i===ut?[]:i}function QD(i,s){const a=i.viewQuery;i.viewQuery=a?(u,c)=>{s(u,c),a(u,c)}:s}function v_(i,s){const a=i.contentQueries;i.contentQueries=a?(u,c,f)=>{s(u,c,f),a(u,c,f)}:s}function Zg(i,s){const a=i.hostBindings;i.hostBindings=a?(u,c)=>{s(u,c),a(u,c)}:s}let hf=null;function vd(){if(!hf){const i=Ut.Symbol;if(i&&i.iterator)hf=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(hf=u)}}}return hf}function Ed(i){return!!Da(i)&&(Array.isArray(i)||!(i instanceof Map)&&vd()in i)}function Da(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Pr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Qg(i,s,a,u){const c=Ie();return Pr(c,Ts(),s)&&(jt(),Ri(Cn(),c,i,s,a,u)),Qg}function Cd(i,s,a,u,c,f,_,E){const I=Ie(),T=jt(),S=i+20,P=T.firstCreatePass?function JD(i,s,a,u,c,f,_,E,I){const T=s.consts,S=cd(s,i,4,_||null,zr(T,E));Rg(s,a,S,zr(T,I)),ua(s,S);const P=S.tViews=xu(2,S,u,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,T,I,s,a,u,c,f,_):T.data[S];Vi(P,!1);const V=I[11].createComment("");rd(T,I,V,P),Rr(V,I),fd(I,I[S]=e_(V,I,V,P)),Ga(P)&&Ct(T,I,P),null!=_&&hd(I,P,E)}function Jl(i,s=Ze.Default){const a=Ie();return null===a?Xe(i,s):Ss(bn(),a,Q(i),s)}function wf(){throw new Error("invalid")}function rm(i,s,a){const u=Ie();return Pr(u,Ts(),s)&&function us(i,s,a,u,c,f,_,E){const I=fr(s,a);let S,T=s.inputs;!E&&null!=T&&(S=T[u])?(jg(i,a,S,u,c),ys(s)&&function FD(i,s){const a=Ir(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function Ru(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=_?_(c,s.value||"",u):c,yn(f)?f.setProperty(I,u,c):cu(u)||(I.setProperty?I.setProperty(u,c):I[u]=c))}(jt(),Cn(),u,i,s,u[11],a,!1),rm}function If(i,s,a,u,c){const _=c?"class":"style";jg(i,a,s.inputs[_],_,u)}function sm(i,s,a,u){const c=Ie(),f=jt(),_=20+i,E=c[11],I=c[_]=Ah(E,s,function wl(){return ft.lFrame.currentNamespace}()),T=f.firstCreatePass?function im(i,s,a,u,c,f,_){const E=s.consts,T=cd(s,i,2,c,zr(E,f));return Rg(s,a,T,zr(E,_)),null!==T.attrs&&af(T,T.attrs,!1),null!==T.mergedAttrs&&af(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,f,c,0,s,a,u):f.data[_];Vi(T,!0);const S=T.mergedAttrs;null!==S&&wi(E,I,S);const P=T.classes;null!==P&&Zr(E,I,P);const V=T.styles;return null!==V&&vt(E,I,V),64!=(64&T.flags)&&rd(f,c,I,T),0===function eu(){return ft.lFrame.elementDepthCount}()&&Rr(I,c),function tu(){ft.lFrame.elementDepthCount++}(),Ga(T)&&(Ct(f,c,T),function Ag(i,s,a){if(bc(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,T,c)),null!==u&&hd(c,T),sm}function Df(){let i=bn();gl()?function na(){ft.lFrame.isParent=!1}():(i=i.parent,Vi(i,!1));const s=i;!function hl(){ft.lFrame.elementDepthCount--}();const a=jt();return a.firstCreatePass&&(ua(a,i),bc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Hp(i){return 0!=(16&i.flags)}(s)&&If(a,s,Ie(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function xn(i){return 0!=(32&i.flags)}(s)&&If(a,s,Ie(),s.stylesWithoutHost,!1),Df}function Xl(i,s,a,u){return sm(i,s,a,u),Df(),Xl}function am(i){return!!i&&"function"==typeof i.then}function S_(i){return!!i&&"function"==typeof i.subscribe}const ku=S_;function um(i,s,a,u){const c=Ie(),f=jt(),_=bn();return function x_(i,s,a,u,c,f,_,E){const I=Ga(u),S=i.firstCreatePass&&Vg(i),P=s[8],V=of(s);let W=!0;if(3&u.type||E){const $e=fr(u,s),Je=E?E($e):$e,be=V.length,ht=E?Gt=>E(ln(Gt[u.index])):u.index;if(yn(a)){let Gt=null;if(!E&&I&&(Gt=function QE(i,s,a,u){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===a&&c[f+1]===u){const E=s[7],I=c[f+2];return E.length>I?E[I]:null}"string"==typeof _&&(f+=2)}return null}(i,s,c,u.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=f,Gt.__ngLastListenerFn__=f,W=!1;else{f=Ni(u,s,P,f,!1);const gn=a.listen(Je,c,f);V.push(f,gn),S&&S.push(c,ht,be,be+1)}}else f=Ni(u,s,P,f,!0),Je.addEventListener(c,f,_),V.push(f),S&&S.push(c,ht,be,_)}else f=Ni(u,s,P,f,!1);const de=u.outputs;let Ne;if(W&&null!==de&&(Ne=de[c])){const $e=Ne.length;if($e)for(let Je=0;Je<$e;Je+=2){const Oi=s[Ne[Je]][Ne[Je+1]].subscribe(f),vc=V.length;V.push(f,Oi),S&&S.push(c,u.index,vc,-(vc+1))}}}(f,c,c[11],_,i,s,!!a,u),um}function Tf(i,s,a,u){try{return!1!==a(u)}catch(c){return Bg(i,c),!1}}function Ni(i,s,a,u,c){return function f(_){if(_===Function)return u;const E=2&i.flags?Ir(i.index,s):s;0==(32&s[2])&&kg(E);let I=Tf(s,0,u,_),T=f.__ngNextListenerFn__;for(;T;)I=Tf(s,0,T,_)&&I,T=T.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function R_(i=1){return function vl(i){return(ft.lFrame.contextLView=function lh(i,s){for(;i>0;)s=s[15],i--;return s}(i,ft.lFrame.contextLView))[8]}(i)}function iw(i,s,a,u,c){const f=i[a+1],_=null===s;let E=u?Ps(f):va(f),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];Oe(i[E],s)&&(I=!0,i[E+1]=u?vg(S):ky(S)),E=u?Ps(S):va(S)}I&&(i[a+1]=u?ky(f):vg(f))}function Oe(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&so(i,s)>=0}function lm(i,s){return function Us(i,s,a,u){const c=Ie(),f=jt(),_=function vi(i){const s=ft.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function F_(i,s,a,u){const c=i.data;if(null===c[a+1]){const f=c[Dr()],_=function ec(i,s){return s>=i.expandoStartIndex}(i,a);(function Ma(i,s){return 0!=(i.flags&(s?16:32))})(f,u)&&null===s&&!_&&(s=!1),s=function or(i,s,a,u){const c=function su(i){const s=ft.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(a=Sa(a=cm(null,i,s,a,u),s.attrs,u),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=cm(c,i,s,a,u),null===f){let I=function Et(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==va(u))return i[Ps(u)]}(i,s,u);void 0!==I&&Array.isArray(I)&&(I=cm(null,i,s,I[1],u),I=Sa(I,s.attrs,u),function lw(i,s,a,u){i[Ps(a?s.classBindings:s.styleBindings)]=u}(i,s,u,I))}else f=function tc(i,s,a){let u;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)u=Sa(u,i[f].hostAttrs,a);return Sa(u,s.attrs,a)}(i,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,u),function Fu(i,s,a,u,c,f){let _=f?s.classBindings:s.styleBindings,E=Ps(_),I=va(_);i[u]=a;let S,T=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||so(P,S)>0)&&(T=!0)}else S=a;if(c)if(0!==I){const V=Ps(i[E+1]);i[u+1]=Jh(V,E),0!==V&&(i[V+1]=_g(i[V+1],u)),i[E+1]=function SD(i,s){return 131071&i|s<<17}(i[E+1],u)}else i[u+1]=Jh(E,0),0!==E&&(i[E+1]=_g(i[E+1],u)),E=u;else i[u+1]=Jh(I,0),0===E?E=u:i[I+1]=_g(i[I+1],u),I=u;T&&(i[u+1]=ky(i[u+1])),iw(i,S,u,!0),iw(i,S,u,!1),function P_(i,s,a,u,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&so(f,s)>=0&&(a[u+1]=vg(a[u+1]))}(s,S,i,u,f),_=Jh(E,I),f?s.classBindings=_:s.styleBindings=_}(c,f,s,a,_,u)}}(f,i,_,u),s!==Rt&&Pr(c,_,s)&&function nc(i,s,a,u,c,f,_,E){if(!(3&s.type))return;const I=i.data,T=I[E+1];Xn(function Fy(i){return 1==(1&i)}(T)?dw(I,s,a,c,va(T),_):void 0)||(Xn(f)||function yg(i){return 2==(2&i)}(T)&&(f=dw(I,null,a,c,E,_)),function Ns(i,s,a,u,c){const f=yn(i);if(s)c?f?i.addClass(a,u):a.classList.add(u):f?i.removeClass(a,u):a.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:ao.DashCase;if(null==c)f?i.removeStyle(a,u,_):a.style.removeProperty(u);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=ao.Important),f?i.setStyle(a,u,c,_):a.style.setProperty(u,c,E?"important":"")}}}(u,_,Zs(Dr(),a),c,f))}(f,f.data[Dr()],c,c[11],i,c[_+1]=function db(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=he(Tr(i)))),i}(s,a),u,_)}(i,s,null,!0),lm}function cm(i,s,a,u,c){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=s[E],u=Sa(u,f.hostAttrs,c),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),u}function Sa(i,s,a){const u=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?c=_:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Ci(i,_,!!a||s[++f]))}return void 0===i?null:i}function dw(i,s,a,u,c,f){const _=null===s;let E;for(;c>0;){const I=i[c],T=Array.isArray(I),S=T?I[1]:I,P=null===S;let V=a[c+1];V===Rt&&(V=P?ut:void 0);let W=P?qc(V,u):S===u?V:void 0;if(T&&!Xn(W)&&(W=qc(I,u)),Xn(W)&&(E=W,_))return E;const de=i[c+1];c=_?Ps(de):va(de)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=qc(I,u))}return E}function Xn(i){return void 0!==i}function zn(i,s=""){const a=Ie(),u=jt(),c=i+20,f=u.firstCreatePass?cd(u,c,1,s,null):u.data[c],_=a[c]=function Th(i,s){return yn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);rd(u,a,_,f),Vi(f,!1)}function xa(i){return xf("",i,""),xa}function xf(i,s,a){const u=Ie(),c=function Vs(i,s,a,u){return Pr(i,Ts(),a)?s+me(a)+u:Rt}(u,i,s,a);return c!==Rt&&Lo(u,Dr(),c),xf}const Bu=void 0;var Ra=["en",[["a","p"],["AM","PM"],Bu],[["AM","PM"],Bu,Bu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bu,"{1} 'at' {0}",Bu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fb(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Pd={};function fm(i){const s=function ww(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Fd(s);if(a)return a;const u=s.split("-")[0];if(a=Fd(u),a)return a;if("en"===u)return Ra;throw new Error(`Missing locale data for the locale "${i}".`)}function Ew(i){return fm(i)[dt.PluralCase]}function Fd(i){return i in Pd||(Pd[i]=Ut.ng&&Ut.ng.common&&Ut.ng.common.locales&&Ut.ng.common.locales[i]),Pd[i]}var dt=(()=>((dt=dt||{})[dt.LocaleId=0]="LocaleId",dt[dt.DayPeriodsFormat=1]="DayPeriodsFormat",dt[dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",dt[dt.DaysFormat=3]="DaysFormat",dt[dt.DaysStandalone=4]="DaysStandalone",dt[dt.MonthsFormat=5]="MonthsFormat",dt[dt.MonthsStandalone=6]="MonthsStandalone",dt[dt.Eras=7]="Eras",dt[dt.FirstDayOfWeek=8]="FirstDayOfWeek",dt[dt.WeekendRange=9]="WeekendRange",dt[dt.DateFormat=10]="DateFormat",dt[dt.TimeFormat=11]="TimeFormat",dt[dt.DateTimeFormat=12]="DateTimeFormat",dt[dt.NumberSymbols=13]="NumberSymbols",dt[dt.NumberFormats=14]="NumberFormats",dt[dt.CurrencyCode=15]="CurrencyCode",dt[dt.CurrencySymbol=16]="CurrencySymbol",dt[dt.CurrencyName=17]="CurrencyName",dt[dt.Currencies=18]="Currencies",dt[dt.Directionality=19]="Directionality",dt[dt.PluralCase=20]="PluralCase",dt[dt.ExtraData=21]="ExtraData",dt))();const pm="en-US";let Dw=pm;function wm(i,s,a,u,c){if(i=Q(i),Array.isArray(i))for(let f=0;f<i.length;f++)wm(i[f],s,a,u,c);else{const f=jt(),_=Ie();let E=Nu(i)?i:Q(i.provide),I=wE(i);const T=bn(),S=1048575&T.providerIndexes,P=T.directiveStart,V=T.providerIndexes>>20;if(Nu(i)||!i.multi){const W=new Eo(I,c,Jl),de=sv(E,s,c?S:S+V,P);-1===de?(Io(Ln(T,_),f,E),Im(f,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(W),_.push(W)):(a[de]=W,_[de]=W)}else{const W=sv(E,s,S+V,P),de=sv(E,s,S,S+V),Ne=W>=0&&a[W],$e=de>=0&&a[de];if(c&&!$e||!c&&!Ne){Io(Ln(T,_),f,E);const Je=function Ab(i,s,a,u,c){const f=new Eo(i,a,Jl);return f.multi=[],f.index=s,f.componentProviders=0,iv(f,c,u&&!a),f}(c?Bw:Uw,a.length,c,u,I);!c&&$e&&(a[de].providerFactory=Je),Im(f,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Je),_.push(Je)}else Im(f,i,W>-1?W:de,iv(a[c?de:W],I,!c&&u));!c&&u&&$e&&a[de].componentProviders++}}}function Im(i,s,a,u){const c=Nu(s),f=function IE(i){return!!i.useClass}(s);if(c||f){const I=(f?Q(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=T.indexOf(a);-1===S?T.push(a,[u,I]):T[S+1].push(u,I)}else T.push(a,I)}}}function iv(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function sv(i,s,a,u){for(let c=a;c<u;c++)if(s[c]===i)return c;return-1}function Uw(i,s,a,u){return ov(this.multi,[])}function Bw(i,s,a,u){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Co(a,a[1],this.providerFactory.index,u);f=E.slice(0,_),ov(c,f);for(let I=_;I<E.length;I++)f.push(E[I])}else f=[],ov(c,f);return f}function ov(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function jw(i,s=[]){return a=>{a.providersResolver=(u,c)=>function Em(i,s,a){const u=jt();if(u.firstCreatePass){const c=Hr(i);wm(a,u.data,u.blueprint,c,!0),wm(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class av{}class Hw{resolveComponentFactory(s){throw function Sb(i){const s=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let qu=(()=>{class i{}return i.NULL=new Hw,i})();function Ho(){return zu(bn(),Ie())}function zu(i,s){return new Gd(fr(i,s))}let Gd=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Ho,i})();function Kf(i){return i instanceof Gd?i.nativeElement:i}class uv{}let Gw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Rb(){const i=Ie(),a=Ir(bn().index,i);return function xb(i){return i[11]}(mi(a)?a:i)}(),i})(),Zf=(()=>{class i{}return i.\u0275prov=ee({token:i,providedIn:"root",factory:()=>null}),i})();class Dm{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const qw=new Dm("13.3.12"),bm={};function Yf(i,s,a,u,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&u.push(ln(f)),oi(f))for(let E=10;E<f.length;E++){const I=f[E],T=I[1].firstChild;null!==T&&Yf(I[1],I,T,u)}const _=a.type;if(8&_)Yf(i,s,a.child,u);else if(32&_){const E=Dh(a,s);let I;for(;I=E();)u.push(I)}else if(16&_){const E=Ey(s,a);if(Array.isArray(E))u.push(...E);else{const I=Iu(s[16]);Yf(I[1],I,E,u,!0)}}a=c?a.projectionNext:a.next}return u}class qd{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Yf(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(oi(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(bu(s,u),di(a,u))}this._attachedToViewContainer=!1}Po(this._lView[1],this._lView)}onDestroy(s){dE(this._lView[1],this._lView,null,s)}markForCheck(){kg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Nr(i,s,a){const u=s[10];u.begin&&u.begin();try{dd(i,s,i.template,a)}catch(c){throw Bg(s,c),c}finally{u.end&&u.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function B0(i,s){Au(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new xe(902,"");this._appRef=s}}class Nb extends qd{constructor(s){super(s),this._view=s}detectChanges(){pd(this._view)}checkNoChanges(){}get context(){return null}}class lv extends qu{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Bt(s);return new Wu(a,this.ngModule)}}function zw(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Wu extends av{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function TD(i){return i.map(CD).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return zw(this.componentDef.inputs)}get outputs(){return zw(this.componentDef.outputs)}create(s,a,u,c){const f=(c=c||this.ngModule)?function zd(i,s){return{get:(a,u,c)=>{const f=i.get(a,bm,c);return f!==bm||u===bm?f:s.get(a,u,c)}}}(s,c.injector):s,_=f.get(uv,yo),E=f.get(Zf,null),I=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=u?function cE(i,s,a){if(yn(i))return i.selectRootElement(s,a===zt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(I,u,this.componentDef.encapsulation):Ah(_.createRenderer(null,this.componentDef),T,function Ob(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),P=this.componentDef.onPush?576:528,V=function yd(i,s){return{components:[],scheduler:i||Z0,clean:Lg,playerHandler:s||null,flags:0}}(),W=xu(0,null,null,1,0,null,null,null,null,null),de=wa(null,W,V,P,null,null,_,I,E,f);let Ne,$e;au(de);try{const Je=function m_(i,s,a,u,c,f){const _=a[1];a[20]=i;const I=cd(_,20,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(af(I,T,!0),null!==i&&(wi(c,i,T),null!==I.classes&&Zr(c,i,I.classes),null!==I.styles&&vt(c,i,I.styles)));const S=u.createRenderer(i,s),P=wa(a,Sg(s),null,s.onPush?64:16,a[20],I,u,S,f||null,null);return _.firstCreatePass&&(Io(Ln(I,a),_,s.type),Jy(_,I),Ng(I,a.length,1)),fd(a,P),a[20]=P}(S,this.componentDef,de,_,I);if(S)if(u)wi(I,S,["ng-version",qw.full]);else{const{attrs:be,classes:ht}=function AD(i){const s=[],a=[];let u=1,c=2;for(;u<i.length;){let f=i[u];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++u]):8===c&&a.push(f);else{if(!Os(c))break;c=f}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);be&&wi(I,S,be),ht&&ht.length>0&&Zr(I,S,ht.join(" "))}if($e=ea(W,20),void 0!==a){const be=$e.projection=[];for(let ht=0;ht<this.ngContentSelectors.length;ht++){const Gt=a[ht];be.push(null!=Gt?Array.from(Gt):null)}}Ne=function y_(i,s,a,u,c){const f=a[1],_=function xg(i,s,a){const u=bn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),yE(i,u,s,tf(i,s,1,null),a));const c=Co(s,i,u.directiveStart,u);Rr(c,s);const f=fr(u,s);return f&&Rr(f,s),c}(f,a,s);if(u.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=bn();s.contentQueries(1,_,I.directiveStart)}const E=bn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Js(E.index),fi(a[1],E,0,E.directiveStart,E.directiveEnd,s),Yy(s,_)),_}(Je,this.componentDef,de,V,[__]),nf(W,de,null)}finally{Ei()}return new kb(this.componentType,Ne,zu($e,de),de,$e)}}class kb extends class Wf{}{constructor(s,a,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Nb(c),this.componentType=s}get injector(){return new io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class yr{}class Kw{}const cc=new Map;class Yw extends yr{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new lv(this);const u=dn(s);this._bootstrapComponents=Fo(u.bootstrap),this._r3Injector=cf(s,a,[{provide:yr,useValue:this},{provide:qu,useValue:this.componentFactoryResolver}],he(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ks.THROW_IF_NOT_FOUND,u=Ze.Default){return s===ks||s===yr||s===uf?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class dv extends Kw{constructor(s){super(),this.moduleType=s,null!==dn(s)&&function Cm(i){const s=new Set;!function a(u){const c=dn(u,!0),f=c.id;null!==f&&(function cv(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${he(s)} vs ${he(s.name)}`)}(f,cc.get(f),u),cc.set(f,u));const _=Fo(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new Yw(this.moduleType,s)}}function Am(i){return s=>{setTimeout(i,void 0,s)}}const js=class hc extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var c,f,_;let E=s,I=a||(()=>null),T=u;if(s&&"object"==typeof s){const P=s;E=null===(c=P.next)||void 0===c?void 0:c.bind(P),I=null===(f=P.error)||void 0===f?void 0:f.bind(P),T=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(I=Am(I),E&&(E=Am(E)),T&&(T=Am(T)));const S=super.subscribe({next:E,error:I,complete:T});return s instanceof Y.w0&&s.add(S),S}};function eI(){return this._results[vd()]()}class _r{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=vd(),u=_r.prototype;u[a]||(u[a]=eI)}get changes(){return this._changes||(this._changes=new js)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const c=Wr(s);(this._changesDetected=!function Rl(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let c=i[u],f=s[u];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(u._results,c,a))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let fc=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ku,i})();const gv=fc,mv=class extends gv{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=wa(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(u[19]=f.createEmbeddedView(a)),nf(a,u,s),new qd(u)}};function Ku(){return ep(bn(),Ie())}function ep(i,s){return 4&i.type?new mv(s,i,zu(i,s)):null}let Sm=(()=>{class i{}return i.__NG_ELEMENT_ID__=tI,i})();function tI(){return Wd(bn(),Ie())}const Mm=Sm,Zu=class extends Mm{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return zu(this._hostTNode,this._hostLView)}get injector(){return new io(this._hostTNode,this._hostLView)}get parentInjector(){const s=to(this._hostTNode,this._hostLView);if(_n(s)){const a=It(s,this._hostLView),u=Ii(s);return new io(a[1].data[u+8],a)}return new io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Yu(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const c=s.createEmbeddedView(a||{});return this.insert(c,u),c}createComponent(s,a,u,c,f){const _=s&&!function Hn(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const P=a||{};E=P.index,u=P.injector,c=P.projectableNodes,f=P.ngModuleRef}const I=_?s:new Wu(Bt(s)),T=u||this.parentInjector;if(!f&&null==I.ngModule){const V=(_?T:this.parentInjector).get(yr,null);V&&(f=V)}const S=I.create(T,c,void 0,f);return this.insert(S.hostView,E),S}insert(s,a){const u=s._lView,c=u[1];if(function Ja(i){return oi(i[3])}(u)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=u[3],V=new Zu(P,P[6],P[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function yy(i,s,a,u){const c=10+u,f=a.length;u>0&&(a[c-1][4]=s),u<f-10?(s[4]=a[c],da(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function ng(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,u,_,f);const E=Vh(f,_),I=u[11],T=Cu(I,_[7]);return null!==T&&function my(i,s,a,u,c,f){u[0]=c,u[6]=s,Au(i,u,a,1,c,f)}(c,_[6],I,u,T,E),s.attachToViewContainerRef(),da(Qu(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Yu(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=bu(this._lContainer,a);u&&(di(Qu(this._lContainer),a),Po(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=bu(this._lContainer,a);return u&&null!=di(Qu(this._lContainer),a)?new qd(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Yu(i){return i[8]}function Qu(i){return i[8]||(i[8]=[])}function Wd(i,s){let a;const u=s[i.index];if(oi(u))a=u;else{let c;if(8&i.type)c=ln(u);else{const f=s[11];c=f.createComment("");const _=fr(i,s);Rs(f,Cu(f,_),c,function vy(i,s){return yn(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=e_(u,s,c,i),fd(s,a)}return new Zu(a,i,s)}class xm{constructor(s){this.queryList=s,this.matches=null}clone(){return new xm(this.queryList)}setDirty(){this.queryList.setDirty()}}class _v{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<u;f++){const _=a.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new _v(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==gc(s,a).matches&&this.queries[a].setDirty()}}class vv{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class Rm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const c=null!==a?a.length:0,f=this.getByIndex(u).embeddedTView(s,c);f&&(f.indexInDeclarationView=u,null!==a?a.push(f):a=[f])}return null!==a?new Rm(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class tp{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new tp(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(s,a,np(a,f)),this.matchTNodeWithReadOption(s,a,Ms(a,s,f,!1,!1))}else u===fc?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ms(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Gd||c===Sm||c===fc&&4&a.type)this.addMatch(a.index,-2);else{const f=Ms(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function np(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function Kb(i,s,a,u){return-1===a?function pc(i,s){return 11&i.type?zu(i,s):4&i.type?ep(i,s):null}(s,i):-2===a?function iI(i,s,a){return a===Gd?zu(s,i):a===fc?ep(s,i):a===Sm?Wd(s,i):void 0}(i,s,u):Co(i,i[1],a,s)}function sI(i,s,a,u){const c=s[19].queries[u];if(null===c.matches){const f=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const T=_[I];E.push(T<0?null:Kb(s,f[T],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function Ev(i,s,a,u){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const _=sI(i,s,c,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)u.push(_[E/2]);else{const T=f[E+1],S=s[-I];for(let P=10;P<S.length;P++){const V=S[P];V[17]===V[3]&&Ev(V[1],V,T,u)}if(null!==S[9]){const P=S[9];for(let V=0;V<P.length;V++){const W=P[V];Ev(W[1],W,T,u)}}}}}return u}function oI(i){const s=Ie(),a=jt(),u=Pc();ou(u+1);const c=gc(a,u);if(i.dirty&&Is(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?Ev(a,s,u,[]):sI(a,s,c,u);i.reset(f,Kf),i.notifyOnChanges()}return!0}return!1}function ka(i,s,a,u){const c=jt();if(c.firstCreatePass){const f=bn();(function lI(i,s,a){null===i.queries&&(i.queries=new Rm),i.queries.track(new tp(s,a))})(c,new vv(s,a,u),f.index),function wv(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function uI(i,s,a){const u=new _r(4==(4&a));dE(i,s,u,u.destroy),null===s[19]&&(s[19]=new _v),s[19].queries.push(new xm(u))}(c,Ie(),a)}function Ju(){return function aI(i,s){return i[19].queries[s].queryList}(Ie(),Pc())}function gc(i,s){return i.queries.getByIndex(s)}function La(...i){}const ap=new An("Application Initializer");let Um=(()=>{class i{constructor(a){this.appInits=a,this.resolve=La,this.reject=La,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(am(f))a.push(f);else if(ku(f)){const _=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{u()}).catch(c=>{this.reject(c)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Xe(ap,8))},i.\u0275prov=ee({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ov=new An("AppId",{providedIn:"root",factory:function Pv(){return`${up()}${up()}${up()}`}});function up(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _I=new An("Platform Initializer"),kv=new An("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vI=new An("appBootstrapListener");let Fv=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ee({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Lv=new An("LocaleId",{providedIn:"root",factory:()=>bt(Lv,Ze.Optional|Ze.SkipSelf)||function jr(){return"undefined"!=typeof $localize&&$localize.locale||pm}()}),sC=new An("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class oC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Vv=(()=>{class i{compileModuleSync(a){return new dv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),f=Fo(dn(a).declarations).reduce((_,E)=>{const I=Bt(E);return I&&_.push(new Wu(I)),_},[]);return new oC(u,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ee({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Uv=(()=>Promise.resolve(0))();function Jd(i){"undefined"==typeof Zone?Uv.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Hi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new js(!1),this.onMicrotaskEmpty=new js(!1),this.onStable=new js(!1),this.onError=new js(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&a,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function lp(){let i=Ut.requestAnimationFrame,s=Ut.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function wI(i){const s=()=>{!function jv(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ut,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,$v(i),i.isCheckStableRunning=!0,cp(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),$v(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,c,f,_,E)=>{try{return Hv(i),a.invokeTask(c,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),II(i)}},onInvoke:(a,u,c,f,_,E,I)=>{try{return Hv(i),a.invoke(c,f,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),II(i)}},onHasTask:(a,u,c,f)=>{a.hasTask(c,f),u===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,$v(i),cp(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,u,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,s,Bv,La,La);try{return f.runTask(_,a,u)}finally{f.cancelTask(_)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const Bv={};function cp(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function $v(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Hv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function II(i){i._nesting--,cp(i)}class uC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new js,this.onMicrotaskEmpty=new js,this.onStable=new js,this.onError=new js}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,c){return s.apply(a,u)}}let DI=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hi.assertNotInAngularZone(),Jd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jd(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Xe(Hi))},i.\u0275prov=ee({token:i,factory:i.\u0275fac}),i})(),bI=(()=>{class i{constructor(){this._applications=new Map,hp.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return hp.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ee({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Bm{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function dp(i){hp=i}let hp=new Bm,rl=null;const CI=new An("AllowMultipleToken"),TI=new An("PlatformOnDestroy");class fp{constructor(s,a){this.name=s,this.token=a}}function yc(i,s,a=[]){const u=`Platform: ${s}`,c=new An(u);return(f=[])=>{let _=pp();if(!_||_.injector.get(CI,!1)){const E=[...a,...f,{provide:c,useValue:!0}];i?i(E):function Gv(i){if(rl&&!rl.get(CI,!1))throw new xe(400,"");rl=i;const s=i.get(zv),a=i.get(_I,null);a&&a.forEach(u=>u())}(function jm(i=[],s){return ks.create({name:s,providers:[{provide:o_,useValue:"platform"},{provide:TI,useValue:()=>rl=null},...i]})}(E,u))}return function qv(i){const s=pp();if(!s)throw new xe(401,"");return s}()}}function pp(){var i;return null!==(i=null==rl?void 0:rl.get(zv))&&void 0!==i?i:null}let zv=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const E=function Wv(i,s){let a;return a="noop"===i?new uC:("zone.js"===i?void 0:i)||new Hi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),I=[{provide:Hi,useValue:E}];return E.run(()=>{const T=ks.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(T),P=S.injector.get(fg,null);if(!P)throw new xe(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:W=>{P.handleError(W)}});S.onDestroy(()=>{Zv(this._modules,S),V.unsubscribe()})}),function Kv(i,s,a){try{const u=a();return am(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(P,E,()=>{const V=S.injector.get(Um);return V.runInitializers(),V.donePromise.then(()=>(function gb(i){Nn(i,"Expected localeId to be defined"),"string"==typeof i&&(Dw=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Lv,pm)||pm),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const c=Va({},u);return function lC(i,s,a){const u=new dv(a);return Promise.resolve(u)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const u=a.injector.get(Hm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new xe(403,"");a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const a=this._injector.get(TI,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Xe(ks))},i.\u0275prov=ee({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Va(i,s){return Array.isArray(s)?s.reduce(Va,i):Object.assign(Object.assign({},i),s)}let Hm=(()=>{class i{constructor(a,u,c,f){this._zone=a,this._injector=u,this._exceptionHandler=c,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new O.y(I=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Hi.assertNotInAngularZone(),Jd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Hi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{T.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(_,E.pipe((0,X.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new xe(405,"");let c;c=a instanceof av?a:this._injector.get(qu).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function cC(i){return i.isBoundToModule}(c)?void 0:this._injector.get(yr),E=c.create(ks.NULL,[],u||c.selector,f),I=E.location.nativeElement,T=E.injector.get(DI,null),S=T&&E.injector.get(bI);return T&&S&&S.registerApplication(I,T),E.onDestroy(()=>{this.detachView(E.hostView),Zv(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new xe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;Zv(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(vI,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Xe(Hi),Xe(ks),Xe(fg),Xe(Um))},i.\u0275prov=ee({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Zv(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let AI=!1;function Yv(){return AI=!0,true}let Jv=(()=>{class i{}return i.__NG_ELEMENT_ID__=fC,i})();function fC(i){return function pC(i,s,a){if(ys(i)&&!a){const u=Ir(i.index,s);return new qd(u,u)}return 47&i.type?new qd(s[16],s):null}(bn(),Ie(),16==(16&i))}class xI{constructor(){}supports(s){return Ed(s)}create(s){return new n0(s)}}const t0=(i,s)=>s;class n0{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||t0}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,c=0,f=null;for(;a||u;){const _=!u||a&&a.currentIndex<NI(u,c,f)?a:u,E=NI(_,c,f),I=_.currentIndex;if(_===u)c--,u=u._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{f||(f=[]);const T=E-c,S=I-c;if(T!=S){for(let V=0;V<T;V++){const W=V<f.length?f[V]:f[V]=0,de=W+V;S<=de&&de<T&&(f[V]=W+1)}f[_.previousIndex]=S-T}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Ed(s))throw new xe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,_,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),u=!0),a=a._next}else c=0,function pf(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[vd()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),u=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new r0(a,u),f,c),s}_verifyReinsertion(s,a,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new RI),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new RI),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class r0{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class s0{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class RI{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new s0,this.map.set(a,u)),u.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NI(i,s,a){const u=i.previousIndex;if(null===u)return u;let c=0;return a&&u<a.length&&(c=a[u]),u+s+c}class Zm{constructor(){}supports(s){return s instanceof Map||Da(s)}create(){return new o0}}class o0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Da(s)))throw new xe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,u);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const u=new vC(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class vC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function a0(){return new u0([new xI])}let u0=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||a0()),deps:[[i,new vu,new pr]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(null!=u)return u;throw new xe(901,"")}}return i.\u0275prov=ee({token:i,providedIn:"root",factory:a0}),i})();function l0(){return new Ym([new Zm])}let Ym=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||l0()),deps:[[i,new vu,new pr]]}}find(a){const u=this.factories.find(f=>f.supports(a));if(u)return u;throw new xe(901,"")}}return i.\u0275prov=ee({token:i,providedIn:"root",factory:l0}),i})();const IC=yc(null,"core",[]);let c0=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Xe(Hm))},i.\u0275mod=Z({type:i}),i.\u0275inj=_e({}),i})()},3942:(at,Ae,k)=>{k.d(Ae,{Z:()=>xe});var g=k(2090),Y=k(4859),O=k(9681),oe=k(1877);class X{constructor(me,ve){this._delegate=me,this.firebase=ve,(0,O._addComponent)(me,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(me,ve=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(me);return!We.isInitialized()&&"EXPLICIT"===(null===(Ye=We.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&We.initialize(),We.getImmediate({identifier:ve})}_removeServiceInstance(me,ve=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(ve)}_addComponent(me){(0,O._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,O._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function le(){const ke=function he(ke){const me={},ve={__esModule:!0,initializeApp:function we(Be,re={}){const Ge=O.initializeApp(Be,re);if((0,g.r3)(me,Ge.name))return me[Ge.name];const pt=new ke(Ge,ve);return me[Ge.name]=pt,pt},app:We,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(Be){const re=Be.name,Ge=re.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const pt=(Pt=We())=>{if("function"!=typeof Pt[Ge])throw ie.create("invalid-app-argument",{appName:re});return Pt[Ge]()};void 0!==Be.serviceProps&&(0,g.ZB)(pt,Be.serviceProps),ve[Ge]=pt,ke.prototype[Ge]=function(...Pt){return this._getService.bind(this,re).apply(this,Be.multipleInstances?Pt:[])}}return"PUBLIC"===Be.type?ve[Ge]:null},removeApp:function Ye(Be){delete me[Be]},useAsService:function Ve(Be,re){return"serverAuth"===re?null:re},modularAPIs:O}};function We(Be){if(!(0,g.r3)(me,Be=Be||O._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:Be});return me[Be]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function ye(){return Object.keys(me).map(Be=>me[Be])}}),We.App=ke,ve}(X);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function me(ve){(0,g.ZB)(ke,ve)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),ke}(),B=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=j;!function De(ke){(0,O.registerVersion)("@firebase/app-compat","0.1.22",ke)}()},9681:(at,Ae,k)=>{k.r(Ae),k.d(Ae,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Lt,_DEFAULT_ENTRY_NAME:()=>ni,_addComponent:()=>ne,_addOrOverwriteComponent:()=>pe,_apps:()=>At,_clearComponents:()=>Pe,_components:()=>K,_getProvider:()=>Me,_registerComponent:()=>ee,_removeServiceInstance:()=>_e,deleteApp:()=>In,getApp:()=>On,getApps:()=>qt,initializeApp:()=>cn,onLog:()=>mn,registerVersion:()=>Dn,setLogLevel:()=>Zn});var g=k(5861),Y=k(4859),O=k(1877),oe=k(2090);class X{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(function ge(Ke){const Ce=Ke.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(Qe)){const lt=Qe.getImmediate();return`${lt.library}/${lt.version}`}return null}).filter(Qe=>Qe).join(" ")}}const ie="@firebase/app",le=new O.Yd("@firebase/app"),ni="[DEFAULT]",Nn={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},At=new Map,K=new Map;function ne(Ke,Ce){try{Ke.container.addComponent(Ce)}catch(Qe){le.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Ke.name}`,Qe)}}function pe(Ke,Ce){Ke.container.addOrOverwriteComponent(Ce)}function ee(Ke){const Ce=Ke.name;if(K.has(Ce))return le.debug(`There were multiple attempts to register component ${Ce}.`),!1;K.set(Ce,Ke);for(const Qe of At.values())ne(Qe,Ke);return!0}function Me(Ke,Ce){const Qe=Ke.container.getProvider("heartbeat").getImmediate({optional:!0});return Qe&&Qe.triggerHeartbeat(),Ke.container.getProvider(Ce)}function _e(Ke,Ce,Qe=ni){Me(Ke,Ce).clearInstance(Qe)}function Pe(){K.clear()}const an=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ct{constructor(Ce,Qe,lt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},Qe),this._name=Qe.name,this._automaticDataCollectionEnabled=Qe.automaticDataCollectionEnabled,this._container=lt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}const Lt="9.6.11";function cn(Ke,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const Qe=Object.assign({name:ni,automaticDataCollectionEnabled:!1},Ce),lt=Qe.name;if("string"!=typeof lt||!lt)throw an.create("bad-app-name",{appName:String(lt)});const Vt=At.get(lt);if(Vt){if((0,oe.vZ)(Ke,Vt.options)&&(0,oe.vZ)(Qe,Vt.config))return Vt;throw an.create("duplicate-app",{appName:lt})}const Ot=new Y.H0(lt);for(const L of K.values())Ot.addComponent(L);const U=new ct(Ke,Qe,Ot);return At.set(lt,U),U}function On(Ke=ni){const Ce=At.get(Ke);if(!Ce)throw an.create("no-app",{appName:Ke});return Ce}function qt(){return Array.from(At.values())}function In(Ke){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,g.Z)(function*(Ke){const Ce=Ke.name;At.has(Ce)&&(At.delete(Ce),yield Promise.all(Ke.container.getProviders().map(Qe=>Qe.delete())),Ke.isDeleted=!0)})).apply(this,arguments)}function Dn(Ke,Ce,Qe){var lt;let Vt=null!==(lt=Nn[Ke])&&void 0!==lt?lt:Ke;Qe&&(Vt+=`-${Qe}`);const Ot=Vt.match(/\s|\//),U=Ce.match(/\s|\//);if(Ot||U){const L=[`Unable to register library "${Vt}" with version "${Ce}":`];return Ot&&L.push(`library name "${Vt}" contains illegal characters (whitespace or "/")`),Ot&&U&&L.push("and"),U&&L.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void le.warn(L.join(" "))}ee(new Y.wA(`${Vt}-version`,()=>({library:Vt,version:Ce}),"VERSION"))}function mn(Ke,Ce){if(null!==Ke&&"function"!=typeof Ke)throw an.create("invalid-log-argument");(0,O.Am)(Ke,Ce)}function Zn(Ke){(0,O.Ub)(Ke)}const wn="firebase-heartbeat-store";let nr=null;function fs(){return nr||(nr=(0,oe.X3)("firebase-heartbeat-database",1,(Ke,Ce)=>{0===Ce&&Ke.createObjectStore(wn)}).catch(Ke=>{throw an.create("storage-open",{originalErrorMessage:Ke.message})})),nr}function zt(){return(zt=(0,g.Z)(function*(Ke){try{return(yield fs()).transaction(wn).objectStore(wn).get(ur(Ke))}catch(Ce){throw an.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function it(Ke,Ce){return yt.apply(this,arguments)}function yt(){return(yt=(0,g.Z)(function*(Ke,Ce){try{const lt=(yield fs()).transaction(wn,"readwrite");return yield lt.objectStore(wn).put(Ce,ur(Ke)),lt.complete}catch(Qe){throw an.create("storage-set",{originalErrorMessage:Qe.message})}})).apply(this,arguments)}function ur(Ke){return`${Ke.name}!${Ke.options.appId}`}class Hs{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const Qe=this.container.getProvider("app").getImmediate();this._storage=new ut(Qe),this._heartbeatsCachePromise=this._storage.read().then(lt=>(this._heartbeatsCache=lt,lt))}triggerHeartbeat(){var Ce=this;return(0,g.Z)(function*(){const lt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Vt=vr();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Vt&&!Ce._heartbeatsCache.heartbeats.some(Ot=>Ot.date===Vt))return Ce._heartbeatsCache.heartbeats.push({date:Vt,agent:lt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Ot=>{const U=new Date(Ot.date).valueOf();return Date.now()-U<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,g.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const Qe=vr(),{heartbeatsToSend:lt,unsentEntries:Vt}=function lr(Ke,Ce=1024){const Qe=[];let lt=Ke.slice();for(const Vt of Ke){const Ot=Qe.find(U=>U.agent===Vt.agent);if(Ot){if(Ot.dates.push(Vt.date),Er(Qe)>Ce){Ot.dates.pop();break}}else if(Qe.push({agent:Vt.agent,dates:[Vt.date]}),Er(Qe)>Ce){Qe.pop();break}lt=lt.slice(1)}return{heartbeatsToSend:Qe,unsentEntries:lt}}(Ce._heartbeatsCache.heartbeats),Ot=(0,oe.L)(JSON.stringify({version:2,heartbeats:lt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=Qe,Vt.length>0?(Ce._heartbeatsCache.heartbeats=Vt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Ot})()}}function vr(){return(new Date).toISOString().substring(0,10)}class ut{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,g.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function Ko(Ke){return zt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var Qe=this;return(0,g.Z)(function*(){var lt;if(yield Qe._canUseIndexedDBPromise){const Ot=yield Qe.read();return it(Qe.app,{lastSentHeartbeatDate:null!==(lt=Ce.lastSentHeartbeatDate)&&void 0!==lt?lt:Ot.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var Qe=this;return(0,g.Z)(function*(){var lt;if(yield Qe._canUseIndexedDBPromise){const Ot=yield Qe.read();return it(Qe.app,{lastSentHeartbeatDate:null!==(lt=Ce.lastSentHeartbeatDate)&&void 0!==lt?lt:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...Ce.heartbeats]})}})()}}function Er(Ke){return(0,oe.L)(JSON.stringify({version:2,heartbeats:Ke})).length}!function kt(Ke){ee(new Y.wA("platform-logger",Ce=>new X(Ce),"PRIVATE")),ee(new Y.wA("heartbeat",Ce=>new Hs(Ce),"PRIVATE")),Dn(ie,"0.7.21",Ke),Dn(ie,"0.7.21","esm2017"),Dn("fire-js","")}("")},4859:(at,Ae,k)=>{k.d(Ae,{H0:()=>he,wA:()=>O});var g=k(5861),Y=k(2090);class O{constructor(j,B,Q){this.name=j,this.instanceFactory=B,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class X{constructor(j,B){this.name=j,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const B=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(B)){const Q=new Y.BH;if(this.instancesDeferred.set(B,Q),this.isInitialized(B)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:B});He&&Q.resolve(He)}catch(He){}}return this.instancesDeferred.get(B).promise}getImmediate(j){var B;const Q=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),He=null!==(B=null==j?void 0:j.optional)&&void 0!==B&&B;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(De){if(He)return null;throw De}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ie(le){return"EAGER"===le.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(B){}for(const[B,Q]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(B);try{const De=this.getOrInitializeService({instanceIdentifier:He});Q.resolve(De)}catch(De){}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,g.Z)(function*(){const B=Array.from(j.instances.values());yield Promise.all([...B.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...B.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:B={}}=j,Q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Q,options:B});for(const[De,xe]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(De)&&xe.resolve(He);return He}onInit(j,B){var Q;const He=this.normalizeInstanceIdentifier(B),De=null!==(Q=this.onInitCallbacks.get(He))&&void 0!==Q?Q:new Set;De.add(j),this.onInitCallbacks.set(He,De);const xe=this.instances.get(He);return xe&&j(xe,He),()=>{De.delete(j)}}invokeOnInitCallbacks(j,B){const Q=this.onInitCallbacks.get(B);if(Q)for(const He of Q)try{He(j,B)}catch(De){}}getOrInitializeService({instanceIdentifier:j,options:B={}}){let Q=this.instances.get(j);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(le=j,le===oe?void 0:le),options:B}),this.instances.set(j,Q),this.instancesOptions.set(j,B),this.invokeOnInitCallbacks(Q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Q)}catch(He){}var le;return Q||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const B=this.getProvider(j.name);if(B.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);B.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const B=new X(j,this);return this.providers.set(j,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(at,Ae,k)=>{k.d(Ae,{Am:()=>le,Ub:()=>he,Yd:()=>ie,in:()=>Y});const g=[];var Y=(()=>{return(j=Y||(Y={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Y;var j})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},oe=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ge=(j,B,...Q)=>{if(B<j.logLevel)return;const He=(new Date).toISOString(),De=X[B];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[De](`[${He}]  ${j.name}:`,...Q)};class ie{constructor(B){this.name=B,this._logLevel=oe,this._logHandler=ge,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in Y))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...B),this._logHandler(this,Y.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...B),this._logHandler(this,Y.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...B),this._logHandler(this,Y.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...B),this._logHandler(this,Y.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...B),this._logHandler(this,Y.ERROR,...B)}}function he(j){g.forEach(B=>{B.setLogLevel(j)})}function le(j,B){for(const Q of g){let He=null;B&&B.level&&(He=O[B.level]),Q.userLogHandler=null===j?null:(De,xe,...ke)=>{const me=ke.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(Ye){return null}}).filter(ve=>ve).join(" ");xe>=(null!=He?He:De.logLevel)&&j({level:Y[xe].toLowerCase(),message:me,args:ke,type:De.name})}}}},5861:(at,Ae,k)=>{function g(O,oe,X,ge,ie,he,le){try{var j=O[he](le),B=j.value}catch(Q){return void X(Q)}j.done?oe(B):Promise.resolve(B).then(ge,ie)}function Y(O){return function(){var oe=this,X=arguments;return new Promise(function(ge,ie){var he=O.apply(oe,X);function le(B){g(he,ge,ie,le,j,"next",B)}function j(B){g(he,ge,ie,le,j,"throw",B)}le(void 0)})}}k.d(Ae,{Z:()=>Y})},7582:(at,Ae,k)=>{function oe(K,ne){var pe={};for(var ee in K)Object.prototype.hasOwnProperty.call(K,ee)&&ne.indexOf(ee)<0&&(pe[ee]=K[ee]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(ee=Object.getOwnPropertySymbols(K);Me<ee.length;Me++)ne.indexOf(ee[Me])<0&&Object.prototype.propertyIsEnumerable.call(K,ee[Me])&&(pe[ee[Me]]=K[ee[Me]])}return pe}function Q(K,ne,pe,ee){return new(pe||(pe=Promise))(function(_e,Pe){function wt(Lt){try{ct(ee.next(Lt))}catch(cn){Pe(cn)}}function an(Lt){try{ct(ee.throw(Lt))}catch(cn){Pe(cn)}}function ct(Lt){Lt.done?_e(Lt.value):function Me(_e){return _e instanceof pe?_e:new pe(function(Pe){Pe(_e)})}(Lt.value).then(wt,an)}ct((ee=ee.apply(K,ne||[])).next())})}function we(K){return this instanceof we?(this.v=K,this):new we(K)}function ye(K,ne,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,ee=pe.apply(K,ne||[]),_e=[];return Me=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),wt("next"),wt("throw"),wt("return",function Pe(qt){return function(In){return Promise.resolve(In).then(qt,cn)}}),Me[Symbol.asyncIterator]=function(){return this},Me;function wt(qt,In){ee[qt]&&(Me[qt]=function(Ze){return new Promise(function(Dn,mn){_e.push([qt,Ze,Dn,mn])>1||an(qt,Ze)})},In&&(Me[qt]=In(Me[qt])))}function an(qt,In){try{!function ct(qt){qt.value instanceof we?Promise.resolve(qt.value.v).then(Lt,cn):On(_e[0][2],qt)}(ee[qt](In))}catch(Ze){On(_e[0][3],Ze)}}function Lt(qt){an("next",qt)}function cn(qt){an("throw",qt)}function On(qt,In){qt(In),_e.shift(),_e.length&&an(_e[0][0],_e[0][1])}}function Ve(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,ne=K[Symbol.asyncIterator];return ne?ne.call(K):(K=function ke(K){var ne="function"==typeof Symbol&&Symbol.iterator,pe=ne&&K[ne],ee=0;if(pe)return pe.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ee>=K.length&&(K=void 0),{value:K&&K[ee++],done:!K}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),pe={},ee("next"),ee("throw"),ee("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function ee(_e){pe[_e]=K[_e]&&function(Pe){return new Promise(function(wt,an){!function Me(_e,Pe,wt,an){Promise.resolve(an).then(function(ct){_e({value:ct,done:wt})},Pe)}(wt,an,(Pe=K[_e](Pe)).done,Pe.value)})}}}k.d(Ae,{FC:()=>ye,KL:()=>Ve,_T:()=>oe,mG:()=>Q,qq:()=>we}),"function"==typeof SuppressedError&&SuppressedError}},at=>{at(at.s=7085)}]);